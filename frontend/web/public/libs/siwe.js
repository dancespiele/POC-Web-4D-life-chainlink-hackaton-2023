"use strict";var siwe=(()=>{var bu=Object.create;var Ln=Object.defineProperty,wu=Object.defineProperties,xu=Object.getOwnPropertyDescriptor,Eu=Object.getOwnPropertyDescriptors,Tu=Object.getOwnPropertyNames,Jo=Object.getOwnPropertySymbols,Au=Object.getPrototypeOf,Xo=Object.prototype.hasOwnProperty,ku=Object.prototype.propertyIsEnumerable;var Ni=(r,e,t)=>e in r?Ln(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,kt=(r,e)=>{for(var t in e||(e={}))Xo.call(e,t)&&Ni(r,t,e[t]);if(Jo)for(var t of Jo(e))ku.call(e,t)&&Ni(r,t,e[t]);return r},Xr=(r,e)=>wu(r,Eu(e));var Qo=(r=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(r,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):r)(function(r){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+r+'" is not supported')});var ke=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),ea=(r,e)=>{for(var t in e)Ln(r,t,{get:e[t],enumerable:!0})},ta=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Tu(e))!Xo.call(r,s)&&s!==t&&Ln(r,s,{get:()=>e[s],enumerable:!(n=xu(e,s))||n.enumerable});return r};var ds=(r,e,t)=>(t=r!=null?bu(Au(r)):{},ta(e||!r||!r.__esModule?Ln(t,"default",{value:r,enumerable:!0}):t,r)),Su=r=>ta(Ln({},"__esModule",{value:!0}),r);var U=(r,e,t)=>(Ni(r,typeof e!="symbol"?e+"":e,t),t),Oi=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var Y=(r,e,t)=>(Oi(r,e,"read from private field"),t?t.call(r):e.get(r)),be=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},ye=(r,e,t,n)=>(Oi(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t);var ra=(r,e,t,n)=>({set _(s){ye(r,e,s,t)},get _(){return Y(r,e,n)}}),Ie=(r,e,t)=>(Oi(r,e,"access private method"),t);var ia=ke(ms=>{"use strict";ms.byteLength=Cu;ms.toByteArray=Ou;ms.fromByteArray=Iu;var Pt=[],bt=[],Bu=typeof Uint8Array<"u"?Uint8Array:Array,Ri="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Br=0,na=Ri.length;Br<na;++Br)Pt[Br]=Ri[Br],bt[Ri.charCodeAt(Br)]=Br;var Br,na;bt[45]=62;bt[95]=63;function sa(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Cu(r){var e=sa(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Nu(r,e,t){return(e+t)*3/4-t}function Ou(r){var e,t=sa(r),n=t[0],s=t[1],i=new Bu(Nu(r,n,s)),o=0,a=s>0?n-4:n,c;for(c=0;c<a;c+=4)e=bt[r.charCodeAt(c)]<<18|bt[r.charCodeAt(c+1)]<<12|bt[r.charCodeAt(c+2)]<<6|bt[r.charCodeAt(c+3)],i[o++]=e>>16&255,i[o++]=e>>8&255,i[o++]=e&255;return s===2&&(e=bt[r.charCodeAt(c)]<<2|bt[r.charCodeAt(c+1)]>>4,i[o++]=e&255),s===1&&(e=bt[r.charCodeAt(c)]<<10|bt[r.charCodeAt(c+1)]<<4|bt[r.charCodeAt(c+2)]>>2,i[o++]=e>>8&255,i[o++]=e&255),i}function Ru(r){return Pt[r>>18&63]+Pt[r>>12&63]+Pt[r>>6&63]+Pt[r&63]}function Lu(r,e,t){for(var n,s=[],i=e;i<t;i+=3)n=(r[i]<<16&16711680)+(r[i+1]<<8&65280)+(r[i+2]&255),s.push(Ru(n));return s.join("")}function Iu(r){for(var e,t=r.length,n=t%3,s=[],i=16383,o=0,a=t-n;o<a;o+=i)s.push(Lu(r,o,o+i>a?a:o+i));return n===1?(e=r[t-1],s.push(Pt[e>>2]+Pt[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],s.push(Pt[e>>10]+Pt[e>>4&63]+Pt[e<<2&63]+"=")),s.join("")}});var oa=ke(Li=>{Li.read=function(r,e,t,n,s){var i,o,a=s*8-n-1,c=(1<<a)-1,l=c>>1,h=-7,u=t?s-1:0,m=t?-1:1,T=r[e+u];for(u+=m,i=T&(1<<-h)-1,T>>=-h,h+=a;h>0;i=i*256+r[e+u],u+=m,h-=8);for(o=i&(1<<-h)-1,i>>=-h,h+=n;h>0;o=o*256+r[e+u],u+=m,h-=8);if(i===0)i=1-l;else{if(i===c)return o?NaN:(T?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-l}return(T?-1:1)*o*Math.pow(2,i-n)};Li.write=function(r,e,t,n,s,i){var o,a,c,l=i*8-s-1,h=(1<<l)-1,u=h>>1,m=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=n?0:i-1,y=n?1:-1,d=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+u>=1?e+=m/c:e+=m*Math.pow(2,1-u),e*c>=2&&(o++,c/=2),o+u>=h?(a=0,o=h):o+u>=1?(a=(e*c-1)*Math.pow(2,s),o=o+u):(a=e*Math.pow(2,u-1)*Math.pow(2,s),o=0));s>=8;r[t+T]=a&255,T+=y,a/=256,s-=8);for(o=o<<s|a,l+=s;l>0;r[t+T]=o&255,T+=y,o/=256,l-=8);r[t+T-y]|=d*128}});var bs=ke(rn=>{"use strict";var Ii=ia(),en=oa(),aa=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;rn.Buffer=V;rn.SlowBuffer=_u;rn.INSPECT_MAX_BYTES=50;var gs=2147483647;rn.kMaxLength=gs;V.TYPED_ARRAY_SUPPORT=Mu();!V.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Mu(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch(r){return!1}}Object.defineProperty(V.prototype,"parent",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.buffer}});Object.defineProperty(V.prototype,"offset",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.byteOffset}});function Vt(r){if(r>gs)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,V.prototype),e}function V(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return $i(r)}return ha(r,e,t)}V.poolSize=8192;function ha(r,e,t){if(typeof r=="string")return vu(r,e);if(ArrayBuffer.isView(r))return $u(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(vt(r,ArrayBuffer)||r&&vt(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(vt(r,SharedArrayBuffer)||r&&vt(r.buffer,SharedArrayBuffer)))return Pi(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return V.from(n,e,t);let s=Uu(r);if(s)return s;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return V.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}V.from=function(r,e,t){return ha(r,e,t)};Object.setPrototypeOf(V.prototype,Uint8Array.prototype);Object.setPrototypeOf(V,Uint8Array);function fa(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Pu(r,e,t){return fa(r),r<=0?Vt(r):e!==void 0?typeof t=="string"?Vt(r).fill(e,t):Vt(r).fill(e):Vt(r)}V.alloc=function(r,e,t){return Pu(r,e,t)};function $i(r){return fa(r),Vt(r<0?0:Ui(r)|0)}V.allocUnsafe=function(r){return $i(r)};V.allocUnsafeSlow=function(r){return $i(r)};function vu(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!V.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=pa(r,e)|0,n=Vt(t),s=n.write(r,e);return s!==t&&(n=n.slice(0,s)),n}function Mi(r){let e=r.length<0?0:Ui(r.length)|0,t=Vt(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function $u(r){if(vt(r,Uint8Array)){let e=new Uint8Array(r);return Pi(e.buffer,e.byteOffset,e.byteLength)}return Mi(r)}function Pi(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,V.prototype),n}function Uu(r){if(V.isBuffer(r)){let e=Ui(r.length)|0,t=Vt(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||Fi(r.length)?Vt(0):Mi(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Mi(r.data)}function Ui(r){if(r>=gs)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+gs.toString(16)+" bytes");return r|0}function _u(r){return+r!=r&&(r=0),V.alloc(+r)}V.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==V.prototype};V.compare=function(e,t){if(vt(e,Uint8Array)&&(e=V.from(e,e.offset,e.byteLength)),vt(t,Uint8Array)&&(t=V.from(t,t.offset,t.byteLength)),!V.isBuffer(e)||!V.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,s=t.length;for(let i=0,o=Math.min(n,s);i<o;++i)if(e[i]!==t[i]){n=e[i],s=t[i];break}return n<s?-1:s<n?1:0};V.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};V.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return V.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let s=V.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){let o=e[n];if(vt(o,Uint8Array))i+o.length>s.length?(V.isBuffer(o)||(o=V.from(o)),o.copy(s,i)):Uint8Array.prototype.set.call(s,o,i);else if(V.isBuffer(o))o.copy(s,i);else throw new TypeError('"list" argument must be an Array of Buffers');i+=o.length}return s};function pa(r,e){if(V.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||vt(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let s=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return vi(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Ta(r).length;default:if(s)return n?-1:vi(r).length;e=(""+e).toLowerCase(),s=!0}}V.byteLength=pa;function Fu(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return Wu(this,e,t);case"utf8":case"utf-8":return ma(this,e,t);case"ascii":return Yu(this,e,t);case"latin1":case"binary":return ju(this,e,t);case"base64":return zu(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Zu(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}V.prototype._isBuffer=!0;function Cr(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}V.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)Cr(this,t,t+1);return this};V.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)Cr(this,t,t+3),Cr(this,t+1,t+2);return this};V.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)Cr(this,t,t+7),Cr(this,t+1,t+6),Cr(this,t+2,t+5),Cr(this,t+3,t+4);return this};V.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?ma(this,0,e):Fu.apply(this,arguments)};V.prototype.toLocaleString=V.prototype.toString;V.prototype.equals=function(e){if(!V.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:V.compare(this,e)===0};V.prototype.inspect=function(){let e="",t=rn.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};aa&&(V.prototype[aa]=V.prototype.inspect);V.prototype.compare=function(e,t,n,s,i){if(vt(e,Uint8Array)&&(e=V.from(e,e.offset,e.byteLength)),!V.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),s===void 0&&(s=0),i===void 0&&(i=this.length),t<0||n>e.length||s<0||i>this.length)throw new RangeError("out of range index");if(s>=i&&t>=n)return 0;if(s>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,s>>>=0,i>>>=0,this===e)return 0;let o=i-s,a=n-t,c=Math.min(o,a),l=this.slice(s,i),h=e.slice(t,n);for(let u=0;u<c;++u)if(l[u]!==h[u]){o=l[u],a=h[u];break}return o<a?-1:a<o?1:0};function da(r,e,t,n,s){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Fi(t)&&(t=s?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(s)return-1;t=r.length-1}else if(t<0)if(s)t=0;else return-1;if(typeof e=="string"&&(e=V.from(e,n)),V.isBuffer(e))return e.length===0?-1:ca(r,e,t,n,s);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):ca(r,[e],t,n,s);throw new TypeError("val must be string, number or Buffer")}function ca(r,e,t,n,s){let i=1,o=r.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;i=2,o/=2,a/=2,t/=2}function c(h,u){return i===1?h[u]:h.readUInt16BE(u*i)}let l;if(s){let h=-1;for(l=t;l<o;l++)if(c(r,l)===c(e,h===-1?0:l-h)){if(h===-1&&(h=l),l-h+1===a)return h*i}else h!==-1&&(l-=l-h),h=-1}else for(t+a>o&&(t=o-a),l=t;l>=0;l--){let h=!0;for(let u=0;u<a;u++)if(c(r,l+u)!==c(e,u)){h=!1;break}if(h)return l}return-1}V.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};V.prototype.indexOf=function(e,t,n){return da(this,e,t,n,!0)};V.prototype.lastIndexOf=function(e,t,n){return da(this,e,t,n,!1)};function Hu(r,e,t,n){t=Number(t)||0;let s=r.length-t;n?(n=Number(n),n>s&&(n=s)):n=s;let i=e.length;n>i/2&&(n=i/2);let o;for(o=0;o<n;++o){let a=parseInt(e.substr(o*2,2),16);if(Fi(a))return o;r[t+o]=a}return o}function Du(r,e,t,n){return ys(vi(e,r.length-t),r,t,n)}function Vu(r,e,t,n){return ys(eh(e),r,t,n)}function Ku(r,e,t,n){return ys(Ta(e),r,t,n)}function Gu(r,e,t,n){return ys(th(e,r.length-t),r,t,n)}V.prototype.write=function(e,t,n,s){if(t===void 0)s="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")s=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,s===void 0&&(s="utf8")):(s=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let i=this.length-t;if((n===void 0||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let o=!1;for(;;)switch(s){case"hex":return Hu(this,e,t,n);case"utf8":case"utf-8":return Du(this,e,t,n);case"ascii":case"latin1":case"binary":return Vu(this,e,t,n);case"base64":return Ku(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Gu(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),o=!0}};V.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function zu(r,e,t){return e===0&&t===r.length?Ii.fromByteArray(r):Ii.fromByteArray(r.slice(e,t))}function ma(r,e,t){t=Math.min(r.length,t);let n=[],s=e;for(;s<t;){let i=r[s],o=null,a=i>239?4:i>223?3:i>191?2:1;if(s+a<=t){let c,l,h,u;switch(a){case 1:i<128&&(o=i);break;case 2:c=r[s+1],(c&192)===128&&(u=(i&31)<<6|c&63,u>127&&(o=u));break;case 3:c=r[s+1],l=r[s+2],(c&192)===128&&(l&192)===128&&(u=(i&15)<<12|(c&63)<<6|l&63,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:c=r[s+1],l=r[s+2],h=r[s+3],(c&192)===128&&(l&192)===128&&(h&192)===128&&(u=(i&15)<<18|(c&63)<<12|(l&63)<<6|h&63,u>65535&&u<1114112&&(o=u))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),s+=a}return qu(n)}var la=4096;function qu(r){let e=r.length;if(e<=la)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=la));return t}function Yu(r,e,t){let n="";t=Math.min(r.length,t);for(let s=e;s<t;++s)n+=String.fromCharCode(r[s]&127);return n}function ju(r,e,t){let n="";t=Math.min(r.length,t);for(let s=e;s<t;++s)n+=String.fromCharCode(r[s]);return n}function Wu(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let s="";for(let i=e;i<t;++i)s+=rh[r[i]];return s}function Zu(r,e,t){let n=r.slice(e,t),s="";for(let i=0;i<n.length-1;i+=2)s+=String.fromCharCode(n[i]+n[i+1]*256);return s}V.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let s=this.subarray(e,t);return Object.setPrototypeOf(s,V.prototype),s};function qe(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}V.prototype.readUintLE=V.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||qe(e,t,this.length);let s=this[e],i=1,o=0;for(;++o<t&&(i*=256);)s+=this[e+o]*i;return s};V.prototype.readUintBE=V.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||qe(e,t,this.length);let s=this[e+--t],i=1;for(;t>0&&(i*=256);)s+=this[e+--t]*i;return s};V.prototype.readUint8=V.prototype.readUInt8=function(e,t){return e=e>>>0,t||qe(e,1,this.length),this[e]};V.prototype.readUint16LE=V.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||qe(e,2,this.length),this[e]|this[e+1]<<8};V.prototype.readUint16BE=V.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||qe(e,2,this.length),this[e]<<8|this[e+1]};V.prototype.readUint32LE=V.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||qe(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};V.prototype.readUint32BE=V.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||qe(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};V.prototype.readBigUInt64LE=ir(function(e){e=e>>>0,tn(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&In(e,this.length-8);let s=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,i=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(s)+(BigInt(i)<<BigInt(32))});V.prototype.readBigUInt64BE=ir(function(e){e=e>>>0,tn(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&In(e,this.length-8);let s=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],i=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(s)<<BigInt(32))+BigInt(i)});V.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||qe(e,t,this.length);let s=this[e],i=1,o=0;for(;++o<t&&(i*=256);)s+=this[e+o]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s};V.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||qe(e,t,this.length);let s=t,i=1,o=this[e+--s];for(;s>0&&(i*=256);)o+=this[e+--s]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o};V.prototype.readInt8=function(e,t){return e=e>>>0,t||qe(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};V.prototype.readInt16LE=function(e,t){e=e>>>0,t||qe(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};V.prototype.readInt16BE=function(e,t){e=e>>>0,t||qe(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};V.prototype.readInt32LE=function(e,t){return e=e>>>0,t||qe(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};V.prototype.readInt32BE=function(e,t){return e=e>>>0,t||qe(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};V.prototype.readBigInt64LE=ir(function(e){e=e>>>0,tn(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&In(e,this.length-8);let s=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(s)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});V.prototype.readBigInt64BE=ir(function(e){e=e>>>0,tn(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&In(e,this.length-8);let s=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(s)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});V.prototype.readFloatLE=function(e,t){return e=e>>>0,t||qe(e,4,this.length),en.read(this,e,!0,23,4)};V.prototype.readFloatBE=function(e,t){return e=e>>>0,t||qe(e,4,this.length),en.read(this,e,!1,23,4)};V.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||qe(e,8,this.length),en.read(this,e,!0,52,8)};V.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||qe(e,8,this.length),en.read(this,e,!1,52,8)};function ct(r,e,t,n,s,i){if(!V.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<i)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}V.prototype.writeUintLE=V.prototype.writeUIntLE=function(e,t,n,s){if(e=+e,t=t>>>0,n=n>>>0,!s){let a=Math.pow(2,8*n)-1;ct(this,e,t,n,a,0)}let i=1,o=0;for(this[t]=e&255;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n};V.prototype.writeUintBE=V.prototype.writeUIntBE=function(e,t,n,s){if(e=+e,t=t>>>0,n=n>>>0,!s){let a=Math.pow(2,8*n)-1;ct(this,e,t,n,a,0)}let i=n-1,o=1;for(this[t+i]=e&255;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n};V.prototype.writeUint8=V.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||ct(this,e,t,1,255,0),this[t]=e&255,t+1};V.prototype.writeUint16LE=V.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||ct(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};V.prototype.writeUint16BE=V.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||ct(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};V.prototype.writeUint32LE=V.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||ct(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};V.prototype.writeUint32BE=V.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||ct(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function ga(r,e,t,n,s){Ea(e,n,s,r,t,7);let i=Number(e&BigInt(4294967295));r[t++]=i,i=i>>8,r[t++]=i,i=i>>8,r[t++]=i,i=i>>8,r[t++]=i;let o=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,t}function ya(r,e,t,n,s){Ea(e,n,s,r,t,7);let i=Number(e&BigInt(4294967295));r[t+7]=i,i=i>>8,r[t+6]=i,i=i>>8,r[t+5]=i,i=i>>8,r[t+4]=i;let o=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=o,o=o>>8,r[t+2]=o,o=o>>8,r[t+1]=o,o=o>>8,r[t]=o,t+8}V.prototype.writeBigUInt64LE=ir(function(e,t=0){return ga(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});V.prototype.writeBigUInt64BE=ir(function(e,t=0){return ya(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});V.prototype.writeIntLE=function(e,t,n,s){if(e=+e,t=t>>>0,!s){let c=Math.pow(2,8*n-1);ct(this,e,t,n,c-1,-c)}let i=0,o=1,a=0;for(this[t]=e&255;++i<n&&(o*=256);)e<0&&a===0&&this[t+i-1]!==0&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n};V.prototype.writeIntBE=function(e,t,n,s){if(e=+e,t=t>>>0,!s){let c=Math.pow(2,8*n-1);ct(this,e,t,n,c-1,-c)}let i=n-1,o=1,a=0;for(this[t+i]=e&255;--i>=0&&(o*=256);)e<0&&a===0&&this[t+i+1]!==0&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n};V.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||ct(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};V.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||ct(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};V.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||ct(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};V.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||ct(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};V.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||ct(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};V.prototype.writeBigInt64LE=ir(function(e,t=0){return ga(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});V.prototype.writeBigInt64BE=ir(function(e,t=0){return ya(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ba(r,e,t,n,s,i){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function wa(r,e,t,n,s){return e=+e,t=t>>>0,s||ba(r,e,t,4,34028234663852886e22,-34028234663852886e22),en.write(r,e,t,n,23,4),t+4}V.prototype.writeFloatLE=function(e,t,n){return wa(this,e,t,!0,n)};V.prototype.writeFloatBE=function(e,t,n){return wa(this,e,t,!1,n)};function xa(r,e,t,n,s){return e=+e,t=t>>>0,s||ba(r,e,t,8,17976931348623157e292,-17976931348623157e292),en.write(r,e,t,n,52,8),t+8}V.prototype.writeDoubleLE=function(e,t,n){return xa(this,e,t,!0,n)};V.prototype.writeDoubleBE=function(e,t,n){return xa(this,e,t,!1,n)};V.prototype.copy=function(e,t,n,s){if(!V.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!s&&s!==0&&(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<n&&(s=n),s===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-n&&(s=e.length-t+n);let i=s-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,s):Uint8Array.prototype.set.call(e,this.subarray(n,s),t),i};V.prototype.fill=function(e,t,n,s){if(typeof e=="string"){if(typeof t=="string"?(s=t,t=0,n=this.length):typeof n=="string"&&(s=n,n=this.length),s!==void 0&&typeof s!="string")throw new TypeError("encoding must be a string");if(typeof s=="string"&&!V.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(e.length===1){let o=e.charCodeAt(0);(s==="utf8"&&o<128||s==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let i;if(typeof e=="number")for(i=t;i<n;++i)this[i]=e;else{let o=V.isBuffer(e)?e:V.from(e,s),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%a]}return this};var Qr={};function _i(r,e,t){Qr[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(s){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:s,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}_i("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);_i("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);_i("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,s=t;return Number.isInteger(t)&&Math.abs(t)>2**32?s=ua(String(t)):typeof t=="bigint"&&(s=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(s=ua(s)),s+="n"),n+=` It must be ${e}. Received ${s}`,n},RangeError);function ua(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function Ju(r,e,t){tn(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&In(e,r.length-(t+1))}function Ea(r,e,t,n,s,i){if(r>t||r<e){let o=typeof e=="bigint"?"n":"",a;throw i>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(i+1)*8}${o}`:a=`>= -(2${o} ** ${(i+1)*8-1}${o}) and < 2 ** ${(i+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${t}${o}`,new Qr.ERR_OUT_OF_RANGE("value",a,r)}Ju(n,s,i)}function tn(r,e){if(typeof r!="number")throw new Qr.ERR_INVALID_ARG_TYPE(e,"number",r)}function In(r,e,t){throw Math.floor(r)!==r?(tn(r,t),new Qr.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new Qr.ERR_BUFFER_OUT_OF_BOUNDS:new Qr.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var Xu=/[^+/0-9A-Za-z-_]/g;function Qu(r){if(r=r.split("=")[0],r=r.trim().replace(Xu,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function vi(r,e){e=e||1/0;let t,n=r.length,s=null,i=[];for(let o=0;o<n;++o){if(t=r.charCodeAt(o),t>55295&&t<57344){if(!s){if(t>56319){(e-=3)>-1&&i.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}s=t;continue}if(t<56320){(e-=3)>-1&&i.push(239,191,189),s=t;continue}t=(s-55296<<10|t-56320)+65536}else s&&(e-=3)>-1&&i.push(239,191,189);if(s=null,t<128){if((e-=1)<0)break;i.push(t)}else if(t<2048){if((e-=2)<0)break;i.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;i.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;i.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return i}function eh(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function th(r,e){let t,n,s,i=[];for(let o=0;o<r.length&&!((e-=2)<0);++o)t=r.charCodeAt(o),n=t>>8,s=t%256,i.push(s),i.push(n);return i}function Ta(r){return Ii.toByteArray(Qu(r))}function ys(r,e,t,n){let s;for(s=0;s<n&&!(s+t>=e.length||s>=r.length);++s)e[s+t]=r[s];return s}function vt(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function Fi(r){return r!==r}var rh=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let s=0;s<16;++s)e[n+s]=r[t]+r[s]}return e}();function ir(r){return typeof BigInt>"u"?nh:r}function nh(){throw new Error("BigInt not supported")}});var St=ke((jp,Aa)=>{Aa.exports={ALT:1,CAT:2,REP:3,RNM:4,TRG:5,TBS:6,TLS:7,UDT:11,AND:12,NOT:13,BKR:14,BKA:15,BKN:16,ABG:17,AEN:18,ACTIVE:100,MATCH:101,EMPTY:102,NOMATCH:103,SEM_PRE:200,SEM_POST:201,SEM_OK:300,SEM_SKIP:301,ATTR_N:400,ATTR_R:401,ATTR_MR:402,LOOKAROUND_NONE:500,LOOKAROUND_AHEAD:501,LOOKAROUND_BEHIND:502,BKR_MODE_UM:601,BKR_MODE_PM:602,BKR_MODE_CS:603,BKR_MODE_CI:604}});var Mn=ke((Wp,ka)=>{ka.exports={CLASS_MONOSPACE:"apg-mono",CLASS_ACTIVE:"apg-active",CLASS_EMPTY:"apg-empty",CLASS_MATCH:"apg-match",CLASS_NOMATCH:"apg-nomatch",CLASS_LOOKAHEAD:"apg-lh-match",CLASS_LOOKBEHIND:"apg-lb-match",CLASS_REMAINDER:"apg-remainder",CLASS_CTRLCHAR:"apg-ctrl-char",CLASS_LINEEND:"apg-line-end",CLASS_ERROR:"apg-error",CLASS_PHRASE:"apg-phrase",CLASS_EMPTYPHRASE:"apg-empty-phrase",CLASS_STATE:"apg-state",CLASS_STATS:"apg-stats",CLASS_TRACE:"apg-trace",CLASS_GRAMMAR:"apg-grammar",CLASS_RULES:"apg-rules",CLASS_RULESLINK:"apg-rules-link",CLASS_ATTRIBUTES:"apg-attrs"}});var Ba=ke(Ye=>{"use strict;";var{Buffer:Ve}=bs(),ws=4294967292,xs=4294967293,Hi=4294967294,Sa=4294967295,ne=[0,1,3,7,15,31,63,127,255,511,1023],or=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],sh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),ht=[];sh.forEach(r=>{ht.push(r.charCodeAt(0))});Ye.utf8={encode(r){let e=[];return r.forEach(t=>{if(t>=0&&t<=127)e.push(t);else if(t<=2047)e.push(192+(t>>6&ne[5])),e.push(128+(t&ne[6]));else if(t<55296||t>57343&&t<=65535)e.push(224+(t>>12&ne[4])),e.push(128+(t>>6&ne[6])),e.push(128+(t&ne[6]));else if(t>=65536&&t<=1114111){let n=t>>16&ne[5];e.push(240+(n>>2)),e.push(128+((n&ne[2])<<4)+(t>>12&ne[4])),e.push(128+(t>>6&ne[6])),e.push(128+(t&ne[6]))}else throw new RangeError(`utf8.encode: character out of range: char: ${t}`)}),Ve.from(e)},decode(r,e){function t(y,d){if((d&192)!==128)return xs;let A=((y&ne[5])<<6)+(d&ne[6]);return A<128?ws:A}function n(y,d,A){if((A&192)!==128||(d&192)!==128)return xs;let p=((y&ne[4])<<12)+((d&ne[6])<<6)+(A&ne[6]);return p<2048?ws:p>=55296&&p<=57343?Hi:p}function s(y,d,A,p){if((p&192)!==128||(A&192)!==128||(d&192)!==128)return xs;let b=(((y&ne[3])<<2)+(d>>4&ne[2])<<16)+((d&ne[4])<<12)+((A&ne[6])<<6)+(p&ne[6]);return b<65536?ws:b>1114111?Hi:b}let i,o,a,c,l,h,u=r.length,m=e?3:0,T=[];for(;m<u;){o=r[m],i=Sa;let y=!0;for(;y;){if(o>=0&&o<=127){i=o,h=1;break}if(a=m+1,a<u&&o>=194&&o<=223){i=t(o,r[a]),h=2;break}if(c=m+2,c<u&&o>=224&&o<=239){i=n(o,r[a],r[c]),h=3;break}if(l=m+3,l<u&&o>=240&&o<=244){i=s(o,r[a],r[c],r[l]),h=4;break}break}if(i>1114111){let d=`byte[${m}]`;throw i===Sa?new RangeError(`utf8.decode: ill-formed UTF8 byte sequence found at: ${d}`):i===xs?new RangeError(`utf8.decode: illegal trailing byte found at: ${d}`):i===Hi?new RangeError(`utf8.decode: code point out of range found at: ${d}`):i===ws?new RangeError(`utf8.decode: non-shortest form found at: ${d}`):new RangeError(`utf8.decode: unrecognized error found at: ${d}`)}T.push(i),m+=h}return T}};Ye.utf16be={encode(r){let e=[],t,n,s;for(let i=0;i<r.length;i+=1)if(t=r[i],t>=0&&t<=55295||t>=57344&&t<=65535)e.push(t>>8&ne[8]),e.push(t&ne[8]);else if(t>=65536&&t<=1114111)s=t-65536,n=55296+(s>>10),s=56320+(s&ne[10]),e.push(n>>8&ne[8]),e.push(n&ne[8]),e.push(s>>8&ne[8]),e.push(s&ne[8]);else throw new RangeError(`utf16be.encode: UTF16BE value out of range: char[${i}]: ${t}`);return Ve.from(e)},decode(r,e){if(r.length%2>0)throw new RangeError(`utf16be.decode: data length must be even multiple of 2: length: ${r.length}`);let t=[],n=r.length,s=e?2:0,i=0,o,a,c,l,h,u;for(;s<n;){for(;;){if(c=s+1,c<n){if(h=(r[s]<<8)+r[c],h<55296||h>57343){o=h,a=2;break}if(l=s+3,l<n&&(u=(r[s+2]<<8)+r[l],h<=56319&&u>=56320&&u<=57343)){o=65536+(h-55296<<10)+(u-56320),a=4;break}}throw new RangeError(`utf16be.decode: ill-formed UTF16BE byte sequence found: byte[${s}]`)}t[i++]=o,s+=a}return t}};Ye.utf16le={encode(r){let e=[],t,n,s;for(let i=0;i<r.length;i+=1)if(t=r[i],t>=0&&t<=55295||t>=57344&&t<=65535)e.push(t&ne[8]),e.push(t>>8&ne[8]);else if(t>=65536&&t<=1114111)s=t-65536,n=55296+(s>>10),s=56320+(s&ne[10]),e.push(n&ne[8]),e.push(n>>8&ne[8]),e.push(s&ne[8]),e.push(s>>8&ne[8]);else throw new RangeError(`utf16le.encode: UTF16LE value out of range: char[${i}]: ${t}`);return Ve.from(e)},decode(r,e){if(r.length%2>0)throw new RangeError(`utf16le.decode: data length must be even multiple of 2: length: ${r.length}`);let t=[],n=r.length,s=e?2:0,i=0,o,a,c,l,h,u;for(;s<n;){for(;;){if(c=s+1,c<n){if(h=(r[c]<<8)+r[s],h<55296||h>57343){o=h,a=2;break}if(l=s+3,l<n&&(u=(r[l]<<8)+r[s+2],h<=56319&&u>=56320&&u<=57343)){o=65536+(h-55296<<10)+(u-56320),a=4;break}}throw new RangeError(`utf16le.decode: ill-formed UTF16LE byte sequence found: byte[${s}]`)}t[i++]=o,s+=a}return t}};Ye.utf32be={encode(r){let e=Ve.alloc(r.length*4),t=0;return r.forEach(n=>{if(n>=55296&&n<=57343||n>1114111)throw new RangeError(`utf32be.encode: UTF32BE character code out of range: char[${t/4}]: ${n}`);e[t++]=n>>24&ne[8],e[t++]=n>>16&ne[8],e[t++]=n>>8&ne[8],e[t++]=n&ne[8]}),e},decode(r,e){if(r.length%4>0)throw new RangeError(`utf32be.decode: UTF32BE byte length must be even multiple of 4: length: ${r.length}`);let t=[],n=e?4:0;for(;n<r.length;n+=4){let s=(r[n]<<24)+(r[n+1]<<16)+(r[n+2]<<8)+r[n+3];if(s>=55296&&s<=57343||s>1114111)throw new RangeError(`utf32be.decode: UTF32BE character code out of range: char[${n/4}]: ${s}`);t.push(s)}return t}};Ye.utf32le={encode(r){let e=Ve.alloc(r.length*4),t=0;return r.forEach(n=>{if(n>=55296&&n<=57343||n>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${t/4}]: ${n}`);e[t++]=n&ne[8],e[t++]=n>>8&ne[8],e[t++]=n>>16&ne[8],e[t++]=n>>24&ne[8]}),e},decode(r,e){if(r.length%4>0)throw new RangeError(`utf32be.decode: UTF32LE byte length must be even multiple of 4: length: ${r.length}`);let t=[],n=e?4:0;for(;n<r.length;n+=4){let s=(r[n+3]<<24)+(r[n+2]<<16)+(r[n+1]<<8)+r[n];if(s>=55296&&s<=57343||s>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${n/4}]: ${s}`);t.push(s)}return t}};Ye.uint7={encode(r){let e=Ve.alloc(r.length);for(let t=0;t<r.length;t+=1){if(r[t]>127)throw new RangeError(`uint7.encode: UINT7 character code out of range: char[${t}]: ${r[t]}`);e[t]=r[t]}return e},decode(r){let e=[];for(let t=0;t<r.length;t+=1){if(r[t]>127)throw new RangeError(`uint7.decode: UINT7 character code out of range: byte[${t}]: ${r[t]}`);e[t]=r[t]}return e}};Ye.uint8={encode(r){let e=Ve.alloc(r.length);for(let t=0;t<r.length;t+=1){if(r[t]>255)throw new RangeError(`uint8.encode: UINT8 character code out of range: char[${t}]: ${r[t]}`);e[t]=r[t]}return e},decode(r){let e=[];for(let t=0;t<r.length;t+=1)e[t]=r[t];return e}};Ye.uint16be={encode(r){let e=Ve.alloc(r.length*2),t=0;return r.forEach(n=>{if(n>65535)throw new RangeError(`uint16be.encode: UINT16BE character code out of range: char[${t/2}]: ${n}`);e[t++]=n>>8&ne[8],e[t++]=n&ne[8]}),e},decode(r){if(r.length%2>0)throw new RangeError(`uint16be.decode: UINT16BE byte length must be even multiple of 2: length: ${r.length}`);let e=[];for(let t=0;t<r.length;t+=2)e.push((r[t]<<8)+r[t+1]);return e}};Ye.uint16le={encode(r){let e=Ve.alloc(r.length*2),t=0;return r.forEach(n=>{if(n>65535)throw new RangeError(`uint16le.encode: UINT16LE character code out of range: char[${t/2}]: ${n}`);e[t++]=n&ne[8],e[t++]=n>>8&ne[8]}),e},decode(r){if(r.length%2>0)throw new RangeError(`uint16le.decode: UINT16LE byte length must be even multiple of 2: length: ${r.length}`);let e=[];for(let t=0;t<r.length;t+=2)e.push((r[t+1]<<8)+r[t]);return e}};Ye.uint32be={encode(r){let e=Ve.alloc(r.length*4),t=0;return r.forEach(n=>{e[t++]=n>>24&ne[8],e[t++]=n>>16&ne[8],e[t++]=n>>8&ne[8],e[t++]=n&ne[8]}),e},decode(r){if(r.length%4>0)throw new RangeError(`uint32be.decode: UINT32BE byte length must be even multiple of 4: length: ${r.length}`);let e=[];for(let t=0;t<r.length;t+=4)e.push((r[t]<<24)+(r[t+1]<<16)+(r[t+2]<<8)+r[t+3]);return e}};Ye.uint32le={encode(r){let e=Ve.alloc(r.length*4),t=0;return r.forEach(n=>{e[t++]=n&ne[8],e[t++]=n>>8&ne[8],e[t++]=n>>16&ne[8],e[t++]=n>>24&ne[8]}),e},decode(r){if(r.length%4>0)throw new RangeError(`uint32le.decode: UINT32LE byte length must be even multiple of 4: length: ${r.length}`);let e=[];for(let t=0;t<r.length;t+=4)e.push((r[t+3]<<24)+(r[t+2]<<16)+(r[t+1]<<8)+r[t]);return e}};Ye.string={encode(r){return Ye.utf16le.encode(r).toString("utf16le")},decode(r){return Ye.utf16le.decode(Ve.from(r,"utf16le"),0)}};Ye.escaped={encode(r){let e=[];for(let t=0;t<r.length;t+=1){let n=r[t];if(n===96)e.push(n),e.push(n);else if(n===10)e.push(n);else if(n>=32&&n<=126)e.push(n);else{let s="";if(n>=0&&n<=31)s+=`\`x${or[n]}`;else if(n>=127&&n<=255)s+=`\`x${or[n]}`;else if(n>=256&&n<=65535)s+=`\`u${or[n>>8&ne[8]]}${or[n&ne[8]]}`;else if(n>=65536&&n<=4294967295){s+="`u{";let o=n>>24&ne[8];o>0&&(s+=or[o]),s+=`${or[n>>16&ne[8]]+or[n>>8&ne[8]]+or[n&ne[8]]}}`}else throw new Error("escape.encode(char): char > 0xffffffff not allowed");Ve.from(s).forEach(o=>{e.push(o)})}}return Ve.from(e)},decode(r){function e(u){return u>=48&&u<=57||u>=65&&u<=70||u>=97&&u<=102}function t(u,m,T){let y={char:null,nexti:u+2,error:!0};if(u+1<m&&e(T[u])&&e(T[u+1])){let d=String.fromCodePoint(T[u],T[u+1]);y.char=parseInt(d,16),Number.isNaN(y.char)||(y.error=!1)}return y}function n(u,m,T){let y={char:null,nexti:u+4,error:!0};if(u+3<m&&e(T[u])&&e(T[u+1])&&e(T[u+2])&&e(T[u+3])){let d=String.fromCodePoint(T[u],T[u+1],T[u+2],T[u+3]);y.char=parseInt(d,16),Number.isNaN(y.char)||(y.error=!1)}return y}function s(u,m,T){let y={char:null,nexti:u+4,error:!0},d="";for(;u<m&&e(T[u]);)d+=String.fromCodePoint(T[u]),u+=1;return y.char=parseInt(d,16),T[u]===125&&!Number.isNaN(y.char)&&(y.error=!1),y.nexti=u+1,y}let i=[],o=r.length,a,c,l,h=0;for(;h<o;){for(;;){if(l=!0,r[h]!==96){i.push(r[h]),h+=1,l=!1;break}if(a=h+1,a>=o)break;if(r[a]===96){i.push(96),h+=2,l=!1;break}if(r[a]===120){if(c=t(a+1,o,r),c.error)break;i.push(c.char),h=c.nexti,l=!1;break}if(r[a]===117){if(r[a+1]===123){if(c=s(a+2,o,r),c.error)break;i.push(c.char),h=c.nexti,l=!1;break}if(c=n(a+1,o,r),c.error)break;i.push(c.char),h=c.nexti,l=!1;break}break}if(l)throw new Error(`escaped.decode: ill-formed escape sequence at buf[${h}]`)}return i}};var Pn=13,wt=10;Ye.lineEnds={crlf(r){let e=[],t=0;for(;t<r.length;)switch(r[t]){case Pn:t+1<r.length&&r[t+1]===wt?t+=2:t+=1,e.push(Pn),e.push(wt);break;case wt:e.push(Pn),e.push(wt),t+=1;break;default:e.push(r[t]),t+=1;break}return e.length>0&&e[e.length-1]!==wt&&(e.push(Pn),e.push(wt)),e},lf(r){let e=[],t=0;for(;t<r.length;)switch(r[t]){case Pn:t+1<r.length&&r[t+1]===wt?t+=2:t+=1,e.push(wt);break;case wt:e.push(wt),t+=1;break;default:e.push(r[t]),t+=1;break}return e.length>0&&e[e.length-1]!==wt&&e.push(wt),e}};Ye.base64={encode(r){if(r.length===0)return Ve.alloc(0);let e,t,n,s=r.length%3;s=s>0?3-s:0;let i=(r.length+s)/3,o=Ve.alloc(i*4);s>0&&(i-=1),e=0,t=0;for(let a=0;a<i;a+=1)n=r[e++]<<16,n+=r[e++]<<8,n+=r[e++],o[t++]=ht[n>>18&ne[6]],o[t++]=ht[n>>12&ne[6]],o[t++]=ht[n>>6&ne[6]],o[t++]=ht[n&ne[6]];if(s===0)return o;if(s===1)return n=r[e++]<<16,n+=r[e]<<8,o[t++]=ht[n>>18&ne[6]],o[t++]=ht[n>>12&ne[6]],o[t++]=ht[n>>6&ne[6]],o[t]=ht[64],o;if(s===2)return n=r[e]<<16,o[t++]=ht[n>>18&ne[6]],o[t++]=ht[n>>12&ne[6]],o[t++]=ht[64],o[t]=ht[64],o},decode(r){function e(h){let u=[],m=0;for(let T=0;T<h.length;T+=1){let y=h[T],d=!0;for(;d&&!(y===32||y===9||y===10||y===13);){if(y>=65&&y<=90){u.push(y-65);break}if(y>=97&&y<=122){u.push(y-71);break}if(y>=48&&y<=57){u.push(y+4);break}if(y===43){u.push(62);break}if(y===47){u.push(63);break}if(y===61){u.push(64),m+=1;break}throw new RangeError(`base64.decode: invalid character buf[${T}]: ${y}`)}}if(u.length%4>0)throw new RangeError(`base64.decode: string length not integral multiple of 4: ${u.length}`);switch(m){case 0:break;case 1:if(u[u.length-1]!==64)throw new RangeError("base64.decode: one tail character found: not last character");break;case 2:if(u[u.length-1]!==64||u[u.length-2]!==64)throw new RangeError("base64.decode: two tail characters found: not last characters");break;default:throw new RangeError(`base64.decode: more than two tail characters found: ${m}`)}return{tail:m,buf:Ve.from(u)}}if(r.length===0)return Ve.alloc(0);let t=e(r),{tail:n}=t,s=t.buf,i,o,a,c=s.length/4,l=Ve.alloc(c*3-n);n>0&&(c-=1),o=0,i=0;for(let h=0;h<c;h+=1)a=s[i++]<<18,a+=s[i++]<<12,a+=s[i++]<<6,a+=s[i++],l[o++]=a>>16&ne[8],l[o++]=a>>8&ne[8],l[o++]=a&ne[8];return n===1&&(a=s[i++]<<18,a+=s[i++]<<12,a+=s[i]<<6,l[o++]=a>>16&ne[8],l[o]=a>>8&ne[8]),n===2&&(a=s[i++]<<18,a+=s[i++]<<12,l[o]=a>>16&ne[8]),l},toString(r){if(r.length%4>0)throw new RangeError(`base64.toString: input buffer length not multiple of 4: ${r.length}`);let e="",t=0;function n(i,o,a,c){switch(t){case 76:e+=`\r
${i}${o}${a}${c}`,t=4;break;case 75:e+=`${i}\r
${o}${a}${c}`,t=3;break;case 74:e+=`${i+o}\r
${a}${c}`,t=2;break;case 73:e+=`${i+o+a}\r
${c}`,t=1;break;default:e+=i+o+a+c,t+=4;break}}function s(i){return i>=65&&i<=90||i>=97&&i<=122||i>=48&&i<=57||i===43||i===47||i===61}for(let i=0;i<r.length;i+=4){for(let o=i;o<i+4;o+=1)if(!s(r[o]))throw new RangeError(`base64.toString: buf[${o}]: ${r[o]} : not valid base64 character code`);n(String.fromCharCode(r[i]),String.fromCharCode(r[i+1]),String.fromCharCode(r[i+2]),String.fromCharCode(r[i+3]))}return e}}});var zi=ke(cn=>{"use strict;";var{Buffer:Di}=bs(),Ce=Ba(),vn="UTF8",Ki="UTF16",$t="UTF16BE",Kt="UTF16LE",Gi="UTF32",Ut="UTF32BE",Gt="UTF32LE",nn="UINT7",Ca="ASCII",Na="BINARY",sn="UINT8",Oa="UINT16",Es="UINT16LE",on="UINT16BE",Ra="UINT32",Ts="UINT32LE",an="UINT32BE",As="ESCAPED",ar="STRING",ih=function(e){e.type=vn;let t=e.data;e.bom=0,t.length>=3&&t[0]===239&&t[1]===187&&t[2]===191&&(e.bom=3)},oh=function(e){let t=e.data;switch(e.bom=0,e.type){case Ki:e.type=$t,t.length>=2&&(t[0]===254&&t[1]===255?e.bom=2:t[0]===255&&t[1]===254&&(e.type=Kt,e.bom=2));break;case $t:if(e.type=$t,t.length>=2){if(t[0]===254&&t[1]===255)e.bom=2;else if(t[0]===255&&t[1]===254)throw new TypeError(`src type: "${$t}" specified but BOM is for "${Kt}"`)}break;case Kt:if(e.type=Kt,t.length>=0){if(t[0]===254&&t[1]===255)throw new TypeError(`src type: "${Kt}" specified but BOM is for "${$t}"`);t[0]===255&&t[1]===254&&(e.bom=2)}break;default:throw new TypeError(`UTF16 BOM: src type "${e.type}" unrecognized`)}},ah=function(e){let t=e.data;switch(e.bom=0,e.type){case Gi:e.type=Ut,t.length>=4&&(t[0]===0&&t[1]===0&&t[2]===254&&t[3]===255&&(e.bom=4),t[0]===255&&t[1]===254&&t[2]===0&&t[3]===0&&(e.type=Gt,e.bom=4));break;case Ut:if(e.type=Ut,t.length>=4&&(t[0]===0&&t[1]===0&&t[2]===254&&t[3]===255&&(e.bom=4),t[0]===255&&t[1]===254&&t[2]===0&&t[3]===0))throw new TypeError(`src type: ${Ut} specified but BOM is for ${Gt}"`);break;case Gt:if(e.type=Gt,t.length>=4){if(t[0]===0&&t[1]===0&&t[2]===254&&t[3]===255)throw new TypeError(`src type: "${Gt}" specified but BOM is for "${Ut}"`);t[0]===255&&t[1]===254&&t[2]===0&&t[3]===0&&(e.bom=4)}break;default:throw new TypeError(`UTF32 BOM: src type "${e.type}" unrecognized`)}},ch=function(e,t){function n(i){let o={type:"",base64:!1},c=/^(base64:)?([a-zA-Z0-9]+)$/i.exec(i);return c&&(c[2]&&(o.type=c[2].toUpperCase()),c[1]&&(o.base64=!0)),o}let s=n(e.toUpperCase());if(s.base64){if(s.type===ar)throw new TypeError(`type: "${e} "BASE64:" prefix not allowed with type ${ar}`);if(Di.isBuffer(t))s.data=Ce.base64.decode(t);else if(typeof t=="string"){let i=Di.from(t,"ascii");s.data=Ce.base64.decode(i)}else throw new TypeError(`type: "${e} unrecognized data type: typeof(data): ${typeof t}`)}else s.data=t;switch(s.type){case vn:ih(s);break;case Ki:case $t:case Kt:oh(s);break;case Gi:case Ut:case Gt:ah(s);break;case Oa:s.type=on;break;case Ra:s.type=an;break;case Ca:s.type=nn;break;case Na:s.type=sn;break;case nn:case sn:case Es:case on:case Ts:case an:case ar:case As:break;default:throw new TypeError(`type: "${e}" not recognized`)}if(s.type===ar){if(typeof s.data!="string")throw new TypeError(`type: "${e}" but data is not a string`)}else if(!Di.isBuffer(s.data))throw new TypeError(`type: "${e}" but data is not a Buffer`);return s},lh=function(e,t){function n(i){let o,a,c={crlf:!1,lf:!1,base64:!1,type:""},l=!0;for(;l;){if(a=i,o=i.slice(0,5),o==="CRLF:"){c.crlf=!0,a=i.slice(5);break}if(o=i.slice(0,3),o==="LF:"){c.lf=!0,a=i.slice(3);break}break}return o=a.split(":"),o.length===1?c.type=o[0]:o.length===2&&o[1]==="BASE64"&&(c.base64=!0,c.type=o[0]),c}if(!Array.isArray(t))throw new TypeError(`dst chars: not array: "${typeof t}`);if(typeof e!="string")throw new TypeError(`dst type: not string: "${typeof e}`);let s=n(e.toUpperCase());switch(s.type){case vn:case $t:case Kt:case Ut:case Gt:case nn:case sn:case Es:case on:case Ts:case an:case As:break;case ar:if(s.base64)throw new TypeError(`":BASE64" suffix not allowed with type ${ar}`);break;case Ca:s.type=nn;break;case Na:s.type=sn;break;case Ki:s.type=$t;break;case Gi:s.type=Ut;break;case Oa:s.type=on;break;case Ra:s.type=an;break;default:throw new TypeError(`dst type unrecognized: "${e}" : must have form [crlf:|lf:]type[:base64]`)}return s},Vi=function(e,t){switch(e){case vn:return Ce.utf8.encode(t);case $t:return Ce.utf16be.encode(t);case Kt:return Ce.utf16le.encode(t);case Ut:return Ce.utf32be.encode(t);case Gt:return Ce.utf32le.encode(t);case nn:return Ce.uint7.encode(t);case sn:return Ce.uint8.encode(t);case on:return Ce.uint16be.encode(t);case Es:return Ce.uint16le.encode(t);case an:return Ce.uint32be.encode(t);case Ts:return Ce.uint32le.encode(t);case ar:return Ce.string.encode(t);case As:return Ce.escaped.encode(t);default:throw new TypeError(`encode type "${e}" not recognized`)}},uh=function(e){switch(e.type){case vn:return Ce.utf8.decode(e.data,e.bom);case Kt:return Ce.utf16le.decode(e.data,e.bom);case $t:return Ce.utf16be.decode(e.data,e.bom);case Ut:return Ce.utf32be.decode(e.data,e.bom);case Gt:return Ce.utf32le.decode(e.data,e.bom);case nn:return Ce.uint7.decode(e.data);case sn:return Ce.uint8.decode(e.data);case on:return Ce.uint16be.decode(e.data);case Es:return Ce.uint16le.decode(e.data);case an:return Ce.uint32be.decode(e.data);case Ts:return Ce.uint32le.decode(e.data);case ar:return Ce.string.decode(e.data);case As:return Ce.escaped.decode(e.data);default:throw new TypeError(`decode type "${e.type}" not recognized`)}};cn.decode=function(e,t){let n=ch(e,t);return uh(n)};cn.encode=function(e,t){let n,s,i=lh(e,t);return i.crlf?(n=Ce.lineEnds.crlf(t),s=Vi(i.type,n)):i.lf?(n=Ce.lineEnds.lf(t),s=Vi(i.type,n)):s=Vi(i.type,t),i.base64&&(s=Ce.base64.encode(s)),s};var hh=function(e,t,n){return cn.encode(n,cn.decode(e,t))};cn.convert=hh});var qi=ke((Xp,La)=>{La.exports=function(){return`/* This file automatically generated by jsonToless() and LESS. */
.apg-mono {
  font-family: monospace;
}
.apg-active {
  font-weight: bold;
  color: #000000;
}
.apg-match {
  font-weight: bold;
  color: #264BFF;
}
.apg-empty {
  font-weight: bold;
  color: #0fbd0f;
}
.apg-nomatch {
  font-weight: bold;
  color: #FF4000;
}
.apg-lh-match {
  font-weight: bold;
  color: #1A97BA;
}
.apg-lb-match {
  font-weight: bold;
  color: #5F1687;
}
.apg-remainder {
  font-weight: bold;
  color: #999999;
}
.apg-ctrl-char {
  font-weight: bolder;
  font-style: italic;
  font-size: 0.6em;
}
.apg-line-end {
  font-weight: bold;
  color: #000000;
}
.apg-error {
  font-weight: bold;
  color: #FF4000;
}
.apg-phrase {
  color: #000000;
  background-color: #8caae6;
}
.apg-empty-phrase {
  color: #0fbd0f;
}
table.apg-state {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th,
table.apg-state td {
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th:nth-last-child(2),
table.apg-state td:nth-last-child(2) {
  text-align: right;
}
table.apg-state caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-stats {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats th,
table.apg-stats td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace th,
table.apg-trace td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace th:last-child,
table.apg-trace th:nth-last-child(2),
table.apg-trace td:last-child,
table.apg-trace td:nth-last-child(2) {
  text-align: left;
}
table.apg-grammar {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-grammar th,
table.apg-grammar td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar th:last-child,
table.apg-grammar td:last-child {
  text-align: left;
}
table.apg-rules {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-rules th,
table.apg-rules td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules a {
  color: #003399 !important;
}
table.apg-rules a:hover {
  color: #8caae6 !important;
}
table.apg-attrs {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-attrs th,
table.apg-attrs td {
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs th:nth-child(1),
table.apg-attrs th:nth-child(2),
table.apg-attrs th:nth-child(3) {
  text-align: right;
}
table.apg-attrs td:nth-child(1),
table.apg-attrs td:nth-child(2),
table.apg-attrs td:nth-child(3) {
  text-align: right;
}
table.apg-attrs a {
  color: #003399 !important;
}
table.apg-attrs a:hover {
  color: #8caae6 !important;
}
`}});var Or=ke(Oe=>{var lt=Mn(),Yi=zi(),fh=qi(),$e=St(),cr="utilities.js: ",Nr=function(r,e,t){let n,s=e,i=!0;for(;i;){if(r<=0){s=0,n=0;break}if(typeof s!="number"){s=0,n=r;break}if(s>=r){s=r,n=r;break}if(typeof t!="number"){n=r;break}if(n=s+t,n>r){n=r;break}break}return{beg:s,end:n}};Oe.htmlToPage=function(r,e){let t;if(typeof r!="string")throw new Error(`${cr}htmlToPage: input HTML is not a string`);typeof e!="string"?t="htmlToPage":t=e;let n="";return n+=`<!DOCTYPE html>
`,n+=`<html lang="en">
`,n+=`<head>
`,n+=`<meta charset="utf-8">
`,n+=`<title>${t}</title>
`,n+=`<style>
`,n+=fh(),n+=`</style>
`,n+=`</head>
<body>
`,n+=`<p>${new Date}</p>
`,n+=r,n+=`</body>
</html>
`,n};Oe.parserResultToHtml=function(r,e){let t=null;typeof e=="string"&&e!==""&&(t=e);let n,s;r.success===!0?n=`<span class="${lt.CLASS_MATCH}">true</span>`:n=`<span class="${lt.CLASS_NOMATCH}">false</span>`,r.state===$e.EMPTY?s=`<span class="${lt.CLASS_EMPTY}">EMPTY</span>`:r.state===$e.MATCH?s=`<span class="${lt.CLASS_MATCH}">MATCH</span>`:r.state===$e.NOMATCH?s=`<span class="${lt.CLASS_NOMATCH}">NOMATCH</span>`:s=`<span class="${lt.CLASS_NOMATCH}">unrecognized</span>`;let i="";return i+=`<table class="${lt.CLASS_STATE}">
`,t&&(i+=`<caption>${t}</caption>
`),i+=`<tr><th>state item</th><th>value</th><th>description</th></tr>
`,i+=`<tr><td>parser success</td><td>${n}</td>
`,i+=`<td><span class="${lt.CLASS_MATCH}">true</span> if the parse succeeded,
`,i+=` <span class="${lt.CLASS_NOMATCH}">false</span> otherwise`,i+=`<br><i>NOTE: for success, entire string must be matched</i></td></tr>
`,i+=`<tr><td>parser state</td><td>${s}</td>
`,i+=`<td><span class="${lt.CLASS_EMPTY}">EMPTY</span>, `,i+=`<span class="${lt.CLASS_MATCH}">MATCH</span> or 
`,i+=`<span class="${lt.CLASS_NOMATCH}">NOMATCH</span></td></tr>
`,i+=`<tr><td>string length</td><td>${r.length}</td><td>length of the input (sub)string</td></tr>
`,i+=`<tr><td>matched length</td><td>${r.matched}</td><td>number of input string characters matched</td></tr>
`,i+=`<tr><td>max matched</td><td>${r.maxMatched}</td><td>maximum number of input string characters matched</td></tr>
`,i+=`<tr><td>max tree depth</td><td>${r.maxTreeDepth}</td><td>maximum depth of the parse tree reached</td></tr>
`,i+=`<tr><td>node hits</td><td>${r.nodeHits}</td><td>number of parse tree node hits (opcode function calls)</td></tr>
`,i+=`<tr><td>input length</td><td>${r.inputLength}</td><td>length of full input string</td></tr>
`,i+=`<tr><td>sub-string begin</td><td>${r.subBegin}</td><td>sub-string first character index</td></tr>
`,i+=`<tr><td>sub-string end</td><td>${r.subEnd}</td><td>sub-string end-of-string index</td></tr>
`,i+=`<tr><td>sub-string length</td><td>${r.subLength}</td><td>sub-string length</td></tr>
`,i+=`</table>
`,i};Oe.charsToString=function(r,e,t){let n,s;if(typeof e=="number"){if(e>=r.length)return"";n=e<0?0:e}else n=0;if(typeof t=="number"){if(t<=0)return"";s=t>r.length-n?r.length:n+t}else s=r.length;return n<s?Yi.encode("UTF16LE",r.slice(n,s)).toString("utf16le"):""};Oe.stringToChars=function(r){return Yi.decode("STRING",r)};Oe.opcodeToString=function(r){let e="unknown";switch(r){case $e.ALT:e="ALT";break;case $e.CAT:e="CAT";break;case $e.RNM:e="RNM";break;case $e.UDT:e="UDT";break;case $e.AND:e="AND";break;case $e.NOT:e="NOT";break;case $e.REP:e="REP";break;case $e.TRG:e="TRG";break;case $e.TBS:e="TBS";break;case $e.TLS:e="TLS";break;case $e.BKR:e="BKR";break;case $e.BKA:e="BKA";break;case $e.BKN:e="BKN";break;case $e.ABG:e="ABG";break;case $e.AEN:e="AEN";break;default:throw new Error("unrecognized opcode")}return e};Oe.stateToString=function(r){let e="unknown";switch(r){case $e.ACTIVE:e="ACTIVE";break;case $e.MATCH:e="MATCH";break;case $e.EMPTY:e="EMPTY";break;case $e.NOMATCH:e="NOMATCH";break;default:throw new Error("unrecognized state")}return e};Oe.asciiChars=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","&nbsp;","!","&#34;","#","$","%","&#38;","&#39;","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&#60;","=","&#62;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","&#92;","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL"];Oe.charToHex=function(r){let e=r.toString(16).toUpperCase();switch(e.length){case 1:case 3:case 7:e=`0${e}`;break;case 2:case 6:e=`00${e}`;break;case 4:break;case 5:e=`000${e}`;break;default:throw new Error("unrecognized option")}return e};Oe.charsToDec=function(r,e,t){let n="";if(!Array.isArray(r))throw new Error(`${cr}charsToDec: input must be an array of integers`);let s=Nr(r.length,e,t);if(s.end>s.beg){n+=r[s.beg];for(let i=s.beg+1;i<s.end;i+=1)n+=`,${r[i]}`}return n};Oe.charsToHex=function(r,e,t){let n="";if(!Array.isArray(r))throw new Error(`${cr}charsToHex: input must be an array of integers`);let s=Nr(r.length,e,t);if(s.end>s.beg){n+=`\\x${Oe.charToHex(r[s.beg])}`;for(let i=s.beg+1;i<s.end;i+=1)n+=`,\\x${Oe.charToHex(r[i])}`}return n};Oe.charsToHtmlEntities=function(r,e,t){let n="";if(!Array.isArray(r))throw new Error(`${cr}charsToHex: input must be an array of integers`);let s=Nr(r.length,e,t);if(s.end>s.beg)for(let i=s.beg;i<s.end;i+=1)n+=`&#x${r[i].toString(16)};`;return n};function ph(r){return!(r>=55296&&r<=57343||r>1114111)}Oe.charsToUnicode=function(r,e,t){let n="";if(!Array.isArray(r))throw new Error(`${cr}charsToUnicode: input must be an array of integers`);let s=Nr(r.length,e,t);if(s.end>s.beg)for(let i=s.beg;i<s.end;i+=1)ph(r[i])?n+=`&#${r[i]};`:n+=` U+${Oe.charToHex(r[i])}`;return n};Oe.charsToJsUnicode=function(r,e,t){let n="";if(!Array.isArray(r))throw new Error(`${cr}charsToJsUnicode: input must be an array of integers`);let s=Nr(r.length,e,t);if(s.end>s.beg){n+=`\\u${Oe.charToHex(r[s.beg])}`;for(let i=s.beg+1;i<s.end;i+=1)n+=`,\\u${Oe.charToHex(r[i])}`}return n};Oe.charsToAscii=function(r,e,t){let n="";if(!Array.isArray(r))throw new Error(`${cr}charsToAscii: input must be an array of integers`);let s=Nr(r.length,e,t);for(let i=s.beg;i<s.end;i+=1){let o=r[i];o>=32&&o<=126?n+=String.fromCharCode(o):n+=`\\x${Oe.charToHex(o)}`}return n};Oe.charsToAsciiHtml=function(r,e,t){if(!Array.isArray(r))throw new Error(`${cr}charsToAsciiHtml: input must be an array of integers`);let n="",s,i=Nr(r.length,e,t);for(let o=i.beg;o<i.end;o+=1)s=r[o],s<32||s===127?n+=`<span class="${lt.CLASS_CTRLCHAR}">${Oe.asciiChars[s]}</span>`:s>127?n+=`<span class="${lt.CLASS_CTRLCHAR}">U+${Oe.charToHex(s)}</span>`:n+=Oe.asciiChars[s];return n};Oe.stringToAsciiHtml=function(r){let e=Yi.decode("STRING",r);return this.charsToAsciiHtml(e)}});var Ma=ke((ed,Ia)=>{Ia.exports=function(){let e=St(),t=Or(),n="ast.js: ",s=this,i=null,o=null,a=null,c=0,l=[],h=[],u=[],m=[];this.callbacks=[],this.astObject="astObject",this.init=function(d,A,p){u.length=0,m.length=0,l.length=0,c=0,i=d,o=A,a=p;let b,N=[];for(b=0;b<i.length;b+=1)N.push(i[b].lower);for(b=0;b<o.length;b+=1)N.push(o[b].lower);for(c=i.length+o.length,b=0;b<c;b+=1)l[b]=!1,h[b]=null;for(let $ in s.callbacks){let q=$.toLowerCase();if(b=N.indexOf(q),b<0)throw new Error(`${n}init: node '${$}' not a rule or udt name`);typeof s.callbacks[$]=="function"&&(l[b]=!0,h[b]=s.callbacks[$]),s.callbacks[$]===!0&&(l[b]=!0)}},this.ruleDefined=function(d){return l[d]!==!1},this.udtDefined=function(d){return l[i.length+d]!==!1},this.down=function(d,A){let p=m.length;return u.push(p),m.push({name:A,thisIndex:p,thatIndex:null,state:e.SEM_PRE,callbackIndex:d,phraseIndex:null,phraseLength:null,stack:u.length}),p},this.up=function(d,A,p,b){let N=m.length,$=u.pop();return m.push({name:A,thisIndex:N,thatIndex:$,state:e.SEM_POST,callbackIndex:d,phraseIndex:p,phraseLength:b,stack:u.length}),m[$].thatIndex=N,m[$].phraseIndex=p,m[$].phraseLength=b,N},this.translate=function(d){let A,p,b;for(let N=0;N<m.length;N+=1)b=m[N],p=h[b.callbackIndex],b.state===e.SEM_PRE?p!==null&&(A=p(e.SEM_PRE,a,b.phraseIndex,b.phraseLength,d),A===e.SEM_SKIP&&(N=b.thatIndex)):p!==null&&p(e.SEM_POST,a,b.phraseIndex,b.phraseLength,d)},this.setLength=function(d){m.length=d,d>0?u.length=m[d-1].stack:u.length=0},this.getLength=function(){return m.length};function T(y){let d="";for(let A=0;A<y;A+=1)d+=" ";return d}this.toXml=function(d){let A=t.charsToDec,p="decimal integer character codes";if(typeof d=="string"&&d.length>=3){let $=d.slice(0,3).toLowerCase();$==="asc"?(A=t.charsToAscii,p="ASCII for printing characters, hex for non-printing"):$==="hex"?(A=t.charsToHex,p="hexadecimal integer character codes"):$==="uni"&&(A=t.charsToUnicode,p="Unicode UTF-32 integer character codes")}let b="",N=0;return b+=`<?xml version="1.0" encoding="utf-8"?>
`,b+=`<root nodes="${m.length/2}" characters="${a.length}">
`,b+=`<!-- input string, ${p} -->
`,b+=T(N+2),b+=A(a),b+=`
`,m.forEach($=>{$.state===e.SEM_PRE?(N+=1,b+=T(N),b+=`<node name="${$.name}" index="${$.phraseIndex}" length="${$.phraseLength}">
`,b+=T(N+2),b+=A(a,$.phraseIndex,$.phraseLength),b+=`
`):(b+=T(N),b+=`</node><!-- name="${$.name}" -->
`,N-=1)}),b+=`</root>
`,b},this.phrases=function(){let d={},A,p;for(A=0;A<m.length;A+=1)p=m[A],p.state===e.SEM_PRE&&(Array.isArray(d[p.name])||(d[p.name]=[]),d[p.name].push({index:p.phraseIndex,length:p.phraseLength}));return d}}});var ji=ke((td,Pa)=>{Pa.exports=function(){"use strict;";let e="circular-buffer.js: ",t=-1,n=0;this.init=function(i){if(typeof i!="number"||i<=0)throw new Error(`${e}init: circular buffer size must an integer > 0`);n=Math.ceil(i),t=-1},this.increment=function(){return t+=1,(t+n)%n},this.maxSize=function(){return n},this.items=function(){return t+1},this.getListIndex=function(i){return t===-1||i<0||i>t||t-i>=n?-1:(i+n)%n},this.forEach=function(i){if(t!==-1){if(t<n){for(let o=0;o<=t;o+=1)i(o,o);return}for(let o=t-n+1;o<=t;o+=1){let a=(o+n)%n;i(a,o)}}}}});var $a=ke((rd,va)=>{va.exports=function(){let e=St(),t=Or(),n="parser.js: ",s=this,i;this.ast=null,this.stats=null,this.trace=null,this.callbacks=[];let o=null,a=null,c,l,h,u,m=0,T=0,y=0,d=null,A=null,p=null,b=null,N=null,$=0,q=1/0,w=1/0,L=function(k,f,x){let D=`${n}evaluateRule(): `;if(k>=p.length)throw new Error(`${D}rule index: ${k} out of range`);if(f>=h)throw new Error(`${D}phrase index: ${f} out of range`);let{length:H}=o;o.push({type:e.RNM,index:k}),i(H,f,x),o.pop()},ee=function(I,k,f){let x=`${n}evaluateUdt(): `;if(I>=b.length)throw new Error(`${x}udt index: ${I} out of range`);if(k>=h)throw new Error(`${x}phrase index: ${k} out of range`);let{length:D}=o;o.push({type:e.UDT,empty:b[I].empty,index:I}),i(D,k,f),o.pop()},xe=function(){m=0,T=0,y=0,$=0,u=[{lookAround:e.LOOKAROUND_NONE,anchor:0,charsEnd:0,charsLength:0}],p=null,b=null,a=null,c=0,l=0,h=0,d=null,A=null,N=null,o=null},P=function(){let I=[],k=function(){let x={};p.forEach(D=>{D.isBkr&&(x[D.lower]=null)}),b.length>0&&b.forEach(D=>{D.isBkr&&(x[D.lower]=null)}),I.push(x)},f=function(){let x=I[I.length-1],D={};for(let H in x)D[H]=x[H];return D};this.push=function(){I.push(f())},this.pop=function(D){let H=D;if(H||(H=I.length-1),H<1||H>I.length)throw new Error(`${n}backRef.pop(): bad length: ${H}`);return I.length=H,I[I.length-1]},this.length=function(){return I.length},this.savePhrase=function(D,H,te){I[I.length-1][D]={phraseIndex:H,phraseLength:te}},this.getPhrase=function(x){return I[I.length-1][x]},k()},O=function(){let k=this;this.state=e.ACTIVE,this.phraseLength=0,this.ruleIndex=0,this.udtIndex=0,this.lookAround=u[u.length-1],this.uFrame=new P,this.pFrame=new P,this.evaluateRule=L,this.evaluateUdt=ee,this.refresh=function(){k.state=e.ACTIVE,k.phraseLength=0,k.lookAround=u[u.length-1]}},B=function(){return u[u.length-1]},v=function(){return u.length>1},G=function(){return u[u.length-1].lookAround===e.LOOKAROUND_BEHIND},z=function(){let I=`${n}initializeAst(): `,k=!0;for(;k;){if(s.ast===void 0){s.ast=null;break}if(s.ast===null)break;if(s.ast.astObject!=="astObject")throw new Error(`${I}ast object not recognized`);break}s.ast!==null&&s.ast.init(p,b,a)},j=function(){let I=`${n}initializeTrace(): `,k=!0;for(;k;){if(s.trace===void 0){s.trace=null;break}if(s.trace===null)break;if(s.trace.traceObject!=="traceObject")throw new Error(`${I}trace object not recognized`);break}s.trace!==null&&s.trace.init(p,b,a)},re=function(){let I=`${n}initializeStats(): `,k=!0;for(;k;){if(s.stats===void 0){s.stats=null;break}if(s.stats===null)break;if(s.stats.statsObject!=="statsObject")throw new Error(`${I}stats object not recognized`);break}s.stats!==null&&s.stats.init(p,b)},le=function(I){let k=`${n}initializeGrammar(): `;if(!I)throw new Error(`${k}grammar object undefined`);if(I.grammarObject!=="grammarObject")throw new Error(`${k}bad grammar object`);p=I.rules,b=I.udts},de=function(I){let k=`${n}initializeStartRule(): `,f=null;if(typeof I=="number"){if(I>=p.length)throw new Error(`${k}start rule index too large: max: ${p.length}: index: ${I}`);f=I}else if(typeof I=="string"){let x=I.toLowerCase();for(let D=0;D<p.length;D+=1)if(x===p[D].lower){f=p[D].index;break}if(f===null)throw new Error(`${k}start rule name '${I}' not recognized`)}else throw new Error(`${k}type of start rule '${typeof I}' not recognized`);return f},Q=function(k,f,x){let D=`${n}initializeInputChars(): `,H=k,te=f,fe=x;if(H===void 0)throw new Error(`${D}input string is undefined`);if(H===null)throw new Error(`${D}input string is null`);if(typeof H=="string")H=t.stringToChars(H);else if(!Array.isArray(H))throw new Error(`${D}input string is not a string or array`);if(H.length>0&&typeof H[0]!="number")throw new Error(`${D}input string not an array of integers`);if(typeof te!="number")te=0;else if(te=Math.floor(te),te<0||te>H.length)throw new Error(`${D}input beginning index out of range: ${te}`);if(typeof fe!="number")fe=H.length-te;else if(fe=Math.floor(fe),fe<0||fe>H.length-te)throw new Error(`${D}input length out of range: ${fe}`);a=H,c=te,l=fe,h=c+l},se=function(){let I=`${n}initializeCallbacks(): `,k;for(d=[],A=[],k=0;k<p.length;k+=1)d[k]=null;for(k=0;k<b.length;k+=1)A[k]=null;let f,x=[];for(k=0;k<p.length;k+=1)x.push(p[k].lower);for(k=0;k<b.length;k+=1)x.push(b[k].lower);for(let D in s.callbacks){if(k=x.indexOf(D.toLowerCase()),k<0)throw new Error(`${I}syntax callback '${D}' not a rule or udt name`);if(f=s.callbacks[D],f||(f=null),typeof f=="function"||f===null)k<p.length?d[k]=f:A[k-p.length]=f;else throw new Error(`${I}syntax callback[${D}] must be function reference or 'false' (false/null/undefined/etc.)`)}for(k=0;k<b.length;k+=1)if(A[k]===null)throw new Error(`${I}all UDT callbacks must be defined. UDT callback[${b[k].lower}] not a function reference`)};this.setMaxTreeDepth=function(I){if(typeof I!="number")throw new Error(`parser: max tree depth must be integer > 0: ${I}`);if(q=Math.floor(I),q<=0)throw new Error(`parser: max tree depth must be integer > 0: ${I}`)},this.setMaxNodeHits=function(I){if(typeof I!="number")throw new Error(`parser: max node hits must be integer > 0: ${I}`);if(w=Math.floor(I),w<=0)throw new Error(`parser: max node hits must be integer > 0: ${I}`)};let K=function(I,k,f){let x,D=`${n}parse(): `;le(I);let H=de(k);se(),j(),re(),z();let te=new O;switch(f!=null&&(N=f),o=[{type:e.RNM,index:H}],i(0,c,te),o=null,te.state){case e.ACTIVE:throw new Error(`${D}final state should never be 'ACTIVE'`);case e.NOMATCH:x=!1;break;case e.EMPTY:case e.MATCH:te.phraseLength===l?x=!0:x=!1;break;default:throw new Error("unrecognized state")}return{success:x,state:te.state,length:l,matched:te.phraseLength,maxMatched:$,maxTreeDepth:T,nodeHits:y,inputLength:a.length,subBegin:c,subEnd:h,subLength:l}};this.parseSubstring=function(k,f,x,D,H,te){return xe(),Q(x,D,H),K(k,f,te)},this.parse=function(k,f,x,D){return xe(),Q(x,0,x.length),K(k,f,D)};let C=function(I,k,f){let x=o[I];for(let D=0;D<x.children.length&&(i(x.children[D],k,f),f.state===e.NOMATCH);D+=1);},me=function(I,k,f){let x,D,H,te,fe=o[I],_e=f.uFrame.length(),ve=f.pFrame.length();s.ast&&(D=s.ast.getLength()),x=!0,H=k,te=0;for(let Ae=0;Ae<fe.children.length;Ae+=1)if(i(fe.children[Ae],H,f),f.state===e.NOMATCH){x=!1;break}else H+=f.phraseLength,te+=f.phraseLength;x?(f.state=te===0?e.EMPTY:e.MATCH,f.phraseLength=te):(f.state=e.NOMATCH,f.phraseLength=0,f.uFrame.pop(_e),f.pFrame.pop(ve),s.ast&&s.ast.setLength(D))},Pe=function(I,k,f){let x,D,H,te,fe=o[I];if(fe.max===0){f.state=e.EMPTY,f.phraseLength=0;return}D=k,H=0,te=0;let _e=f.uFrame.length(),ve=f.pFrame.length();s.ast&&(x=s.ast.getLength());let Ae=!0;for(;Ae&&!(D>=h||(i(I+1,D,f),f.state===e.NOMATCH)||f.state===e.EMPTY||(te+=1,H+=f.phraseLength,D+=f.phraseLength,te===fe.max)););f.state===e.EMPTY||te>=fe.min?(f.state=H===0?e.EMPTY:e.MATCH,f.phraseLength=H):(f.state=e.NOMATCH,f.phraseLength=0,f.uFrame.pop(_e),f.pFrame.pop(ve),s.ast&&s.ast.setLength(x))},Se=function(I,k,f,x){if(k.phraseLength>f){let D=`${n}opRNM(${I.name}): callback function error: `;throw D+=`sysData.phraseLength: ${k.phraseLength}`,D+=` must be <= remaining chars: ${f}`,new Error(D)}switch(k.state){case e.ACTIVE:if(x!==!0)throw new Error(`${n}opRNM(${I.name}): callback function return error. ACTIVE state not allowed.`);break;case e.EMPTY:k.phraseLength=0;break;case e.MATCH:k.phraseLength===0&&(k.state=e.EMPTY);break;case e.NOMATCH:k.phraseLength=0;break;default:throw new Error(`${n}opRNM(${I.name}): callback function return error. Unrecognized return state: ${k.state}`)}},Ee=function(I,k,f){let x,D,H,te,fe,_e,ve=o[I],Ae=p[ve.index],Fe=d[Ae.index],sr=!v();if(sr&&(D=s.ast&&s.ast.ruleDefined(ve.index),D&&(x=s.ast.getLength(),s.ast.down(ve.index,p[ve.index].name)),te=f.uFrame.length(),fe=f.pFrame.length(),f.uFrame.push(),f.pFrame.push(),_e=f.pFrame,f.pFrame=new P),Fe===null)H=o,o=Ae.opcodes,i(0,k,f),o=H;else{let Zo=h-k;f.ruleIndex=Ae.index,Fe(f,a,k,N),Se(Ae,f,Zo,!0),f.state===e.ACTIVE&&(H=o,o=Ae.opcodes,i(0,k,f),o=H,f.ruleIndex=Ae.index,Fe(f,a,k,N),Se(Ae,f,Zo,!1))}sr&&(D&&(f.state===e.NOMATCH?s.ast.setLength(x):s.ast.up(ve.index,Ae.name,k,f.phraseLength)),f.pFrame=_e,f.state===e.NOMATCH?(f.uFrame.pop(te),f.pFrame.pop(fe)):Ae.isBkr&&(f.pFrame.savePhrase(Ae.lower,k,f.phraseLength),f.uFrame.savePhrase(Ae.lower,k,f.phraseLength)))},S=function(I,k,f){if(k.phraseLength>f){let x=`${n}opUDT(${I.name}): callback function error: `;throw x+=`sysData.phraseLength: ${k.phraseLength}`,x+=` must be <= remaining chars: ${f}`,new Error(x)}switch(k.state){case e.ACTIVE:throw new Error(`${n}opUDT(${I.name}): callback function return error. ACTIVE state not allowed.`);case e.EMPTY:if(I.empty===!1)throw new Error(`${n}opUDT(${I.name}): callback function return error. May not return EMPTY.`);k.phraseLength=0;break;case e.MATCH:if(k.phraseLength===0){if(I.empty===!1)throw new Error(`${n}opUDT(${I.name}): callback function return error. May not return EMPTY.`);k.state=e.EMPTY}break;case e.NOMATCH:k.phraseLength=0;break;default:throw new Error(`${n}opUDT(${I.name}): callback function return error. Unrecognized return state: ${k.state}`)}},E=function(I,k,f){let x,D,H,te,fe,_e,ve=o[I],Ae=b[ve.index];f.UdtIndex=Ae.index;let Fe=!v();Fe&&(H=s.ast&&s.ast.udtDefined(ve.index),H&&(D=p.length+ve.index,x=s.ast.getLength(),s.ast.down(D,Ae.name)),te=f.uFrame.length(),fe=f.pFrame.length(),f.uFrame.push(),f.pFrame.push(),_e=f.pFrame,f.pFrame=new P);let sr=h-k;A[ve.index](f,a,k,N),S(Ae,f,sr),Fe&&(H&&(f.state===e.NOMATCH?s.ast.setLength(x):s.ast.up(D,Ae.name,k,f.phraseLength)),f.pFrame=_e,f.state===e.NOMATCH?(f.uFrame.pop(te),f.pFrame.pop(fe)):Ae.isBkr&&(f.pFrame.savePhrase(Ae.lower,k,f.phraseLength),f.uFrame.savePhrase(Ae.lower,k,f.phraseLength)))},M=function(I,k,f){u.push({lookAround:e.LOOKAROUND_AHEAD,anchor:k,charsEnd:h,charsLength:l}),h=a.length,l=a.length-c,i(I+1,k,f);let x=u.pop();switch(h=x.charsEnd,l=x.charsLength,f.phraseLength=0,f.state){case e.EMPTY:f.state=e.EMPTY;break;case e.MATCH:f.state=e.EMPTY;break;case e.NOMATCH:f.state=e.NOMATCH;break;default:throw new Error(`opAND: invalid state ${f.state}`)}},X=function(I,k,f){u.push({lookAround:e.LOOKAROUND_AHEAD,anchor:k,charsEnd:h,charsLength:l}),h=a.length,l=a.length-c,i(I+1,k,f);let x=u.pop();switch(h=x.charsEnd,l=x.charsLength,f.phraseLength=0,f.state){case e.EMPTY:case e.MATCH:f.state=e.NOMATCH;break;case e.NOMATCH:f.state=e.EMPTY;break;default:throw new Error(`opNOT: invalid state ${f.state}`)}},ie=function(I,k,f){let x=o[I];f.state=e.NOMATCH,k<h&&x.min<=a[k]&&a[k]<=x.max&&(f.state=e.MATCH,f.phraseLength=1)},oe=function(I,k,f){let x,D=o[I],H=D.string.length;if(f.state=e.NOMATCH,k+H<=h){for(x=0;x<H;x+=1)if(a[k+x]!==D.string[x])return;f.state=e.MATCH,f.phraseLength=H}},ue=function(I,k,f){let x,D,H=o[I];f.state=e.NOMATCH;let te=H.string.length;if(te===0){f.state=e.EMPTY;return}if(k+te<=h){for(x=0;x<te;x+=1)if(D=a[k+x],D>=65&&D<=90&&(D+=32),D!==H.string[x])return;f.state=e.MATCH,f.phraseLength=te}},_=function(I,k,f){f.state=e.NOMATCH,f.phraseLength=0,f.state=k===0?e.EMPTY:e.NOMATCH},J=function(I,k,f){f.state=e.NOMATCH,f.phraseLength=0,f.state=k===a.length?e.EMPTY:e.NOMATCH},R=function(I,k,f){let x,D,H,te,fe=o[I];f.state=e.NOMATCH,fe.index<p.length?te=p[fe.index].lower:te=b[fe.index-p.length].lower;let _e=fe.bkrMode===e.BKR_MODE_PM?f.pFrame.getPhrase(te):f.uFrame.getPhrase(te),ve=fe.bkrCase===e.BKR_MODE_CI;if(_e===null)return;let Ae=_e.phraseIndex,Fe=_e.phraseLength;if(Fe===0){f.state=e.EMPTY;return}if(k+Fe<=h){if(ve){for(x=0;x<Fe;x+=1)if(D=a[k+x],H=a[Ae+x],D>=65&&D<=90&&(D+=32),H>=65&&H<=90&&(H+=32),D!==H)return;f.state=e.MATCH,f.phraseLength=Fe}else for(x=0;x<Fe;x+=1)if(D=a[k+x],H=a[Ae+x],D!==H)return;f.state=e.MATCH,f.phraseLength=Fe}},Z=function(I,k,f){switch(u.push({lookAround:e.LOOKAROUND_BEHIND,anchor:k}),i(I+1,k,f),u.pop(),f.phraseLength=0,f.state){case e.EMPTY:f.state=e.EMPTY;break;case e.MATCH:f.state=e.EMPTY;break;case e.NOMATCH:f.state=e.NOMATCH;break;default:throw new Error(`opBKA: invalid state ${f.state}`)}},g=function(I,k,f){switch(u.push({lookAround:e.LOOKAROUND_BEHIND,anchor:k}),i(I+1,k,f),u.pop(),f.phraseLength=0,f.state){case e.EMPTY:case e.MATCH:f.state=e.NOMATCH;break;case e.NOMATCH:f.state=e.EMPTY;break;default:throw new Error(`opBKN: invalid state ${f.state}`)}},F=function(I,k,f){let x,D,H,te,fe=o[I],_e=f.uFrame.length(),ve=f.pFrame.length();s.ast&&(D=s.ast.getLength()),x=!0,H=k,te=0;for(let Ae=fe.children.length-1;Ae>=0;Ae-=1)if(i(fe.children[Ae],H,f),H-=f.phraseLength,te+=f.phraseLength,f.state===e.NOMATCH){x=!1;break}x?(f.state=te===0?e.EMPTY:e.MATCH,f.phraseLength=te):(f.state=e.NOMATCH,f.phraseLength=0,f.uFrame.pop(_e),f.pFrame.pop(ve),s.ast&&s.ast.setLength(D))},he=function(I,k,f){let x,D,H,te,fe=o[I];D=k,H=0,te=0;let _e=f.uFrame.length(),ve=f.pFrame.length();s.ast&&(x=s.ast.getLength());let Ae=!0;for(;Ae&&!(D<=0||(i(I+1,D,f),f.state===e.NOMATCH)||f.state===e.EMPTY||(te+=1,H+=f.phraseLength,D-=f.phraseLength,te===fe.max)););f.state===e.EMPTY||te>=fe.min?(f.state=H===0?e.EMPTY:e.MATCH,f.phraseLength=H):(f.state=e.NOMATCH,f.phraseLength=0,f.uFrame.pop(_e),f.pFrame.pop(ve),s.ast&&s.ast.setLength(x))},ge=function(I,k,f){let x=o[I];if(f.state=e.NOMATCH,f.phraseLength=0,k>0){let D=a[k-1];x.min<=D&&D<=x.max&&(f.state=e.MATCH,f.phraseLength=1)}},Ne=function(I,k,f){let x,D=o[I];f.state=e.NOMATCH;let H=D.string.length,te=k-H;if(te>=0){for(x=0;x<H;x+=1)if(a[te+x]!==D.string[x])return;f.state=e.MATCH,f.phraseLength=H}},Jr=function(I,k,f){let x,D=o[I];f.state=e.NOMATCH;let H=D.string.length;if(H===0){f.state=e.EMPTY;return}let te=k-H;if(te>=0){for(let fe=0;fe<H;fe+=1)if(x=a[te+fe],x>=65&&x<=90&&(x+=32),x!==D.string[fe])return;f.state=e.MATCH,f.phraseLength=H}},ps=function(I,k,f){let x,D,H,te,fe=o[I];f.state=e.NOMATCH,f.phraseLength=0,fe.index<p.length?te=p[fe.index].lower:te=b[fe.index-p.length].lower;let _e=fe.bkrMode===e.BKR_MODE_PM?f.pFrame.getPhrase(te):f.uFrame.getPhrase(te),ve=fe.bkrCase===e.BKR_MODE_CI;if(_e===null)return;let Ae=_e.phraseIndex,Fe=_e.phraseLength;if(Fe===0){f.state=e.EMPTY,f.phraseLength=0;return}let sr=k-Fe;if(sr>=0){if(ve){for(x=0;x<Fe;x+=1)if(D=a[sr+x],H=a[Ae+x],D>=65&&D<=90&&(D+=32),H>=65&&H<=90&&(H+=32),D!==H)return;f.state=e.MATCH,f.phraseLength=Fe}else for(x=0;x<Fe;x+=1)if(D=a[sr+x],H=a[Ae+x],D!==H)return;f.state=e.MATCH,f.phraseLength=Fe}};i=function(k,f,x){let D=!0,H=o[k];if(y+=1,y>w)throw new Error(`parser: maximum number of node hits exceeded: ${w}`);if(m+=1,m>T&&(T=m,T>q))throw new Error(`parser: maximum parse tree depth exceeded: ${q}`);if(x.refresh(),s.trace!==null){let te=B();s.trace.down(H,x.state,f,x.phraseLength,te.anchor,te.lookAround)}if(G())switch(H.type){case e.ALT:C(k,f,x);break;case e.CAT:F(k,f,x);break;case e.REP:he(k,f,x);break;case e.RNM:Ee(k,f,x);break;case e.UDT:E(k,f,x);break;case e.AND:M(k,f,x);break;case e.NOT:X(k,f,x);break;case e.TRG:ge(k,f,x);break;case e.TBS:Ne(k,f,x);break;case e.TLS:Jr(k,f,x);break;case e.BKR:ps(k,f,x);break;case e.BKA:Z(k,f,x);break;case e.BKN:g(k,f,x);break;case e.ABG:_(k,f,x);break;case e.AEN:J(k,f,x);break;default:D=!1;break}else switch(H.type){case e.ALT:C(k,f,x);break;case e.CAT:me(k,f,x);break;case e.REP:Pe(k,f,x);break;case e.RNM:Ee(k,f,x);break;case e.UDT:E(k,f,x);break;case e.AND:M(k,f,x);break;case e.NOT:X(k,f,x);break;case e.TRG:ie(k,f,x);break;case e.TBS:oe(k,f,x);break;case e.TLS:ue(k,f,x);break;case e.BKR:R(k,f,x);break;case e.BKA:Z(k,f,x);break;case e.BKN:g(k,f,x);break;case e.ABG:_(k,f,x);break;case e.AEN:J(k,f,x);break;default:D=!1;break}if(!v()&&f+x.phraseLength>$&&($=f+x.phraseLength),s.stats!==null&&s.stats.collect(H,x),s.trace!==null){let te=B();s.trace.up(H,x.state,f,x.phraseLength,te.anchor,te.lookAround)}return m-=1,D}}});var _a=ke((nd,Ua)=>{Ua.exports=function(){let e=St(),t=Or(),n=Mn(),s="stats.js: ",i=[],o=[],a=[],c,l=[],h=[];this.statsObject="statsObject";let u="stats",m=function(w,L){return w.lower<L.lower?-1:w.lower>L.lower?1:0},T=function(w,L){return w.total<L.total?1:w.total>L.total?-1:m(w,L)},y=function(w,L){return w.index<L.index?-1:w.index>L.index?1:0},d=function(){this.empty=0,this.match=0,this.nomatch=0,this.total=0},A=function(){a.length=0,c=new d,a[e.ALT]=new d,a[e.CAT]=new d,a[e.REP]=new d,a[e.RNM]=new d,a[e.TRG]=new d,a[e.TBS]=new d,a[e.TLS]=new d,a[e.UDT]=new d,a[e.AND]=new d,a[e.NOT]=new d,a[e.BKR]=new d,a[e.BKA]=new d,a[e.BKN]=new d,a[e.ABG]=new d,a[e.AEN]=new d,l.length=0;for(let w=0;w<i.length;w+=1)l.push({empty:0,match:0,nomatch:0,total:0,name:i[w].name,lower:i[w].lower,index:i[w].index});if(o.length>0){h.length=0;for(let w=0;w<o.length;w+=1)h.push({empty:0,match:0,nomatch:0,total:0,name:o[w].name,lower:o[w].lower,index:o[w].index})}},p=function(w,L){switch(w.total+=1,L){case e.EMPTY:w.empty+=1;break;case e.MATCH:w.match+=1;break;case e.NOMATCH:w.nomatch+=1;break;default:throw new Error(`${s}collect(): incStat(): unrecognized state: ${L}`)}},b=function(w,L){let ee="";return ee+="<tr>",ee+=`<td class="${n.CLASS_ACTIVE}">${w}</td>`,ee+=`<td class="${n.CLASS_EMPTY}">${L.empty}</td>`,ee+=`<td class="${n.CLASS_MATCH}">${L.match}</td>`,ee+=`<td class="${n.CLASS_NOMATCH}">${L.nomatch}</td>`,ee+=`<td class="${n.CLASS_ACTIVE}">${L.total}</td>`,ee+=`</tr>
`,ee},N=function(){let w="";return w+=b("ALT",a[e.ALT]),w+=b("CAT",a[e.CAT]),w+=b("REP",a[e.REP]),w+=b("RNM",a[e.RNM]),w+=b("TRG",a[e.TRG]),w+=b("TBS",a[e.TBS]),w+=b("TLS",a[e.TLS]),w+=b("UDT",a[e.UDT]),w+=b("AND",a[e.AND]),w+=b("NOT",a[e.NOT]),w+=b("BKR",a[e.BKR]),w+=b("BKA",a[e.BKA]),w+=b("BKN",a[e.BKN]),w+=b("ABG",a[e.ABG]),w+=b("AEN",a[e.AEN]),w+=b("totals",c),w},$=function(){let w="";w+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,w+=`<tr><th>rules</th><th></th><th></th><th></th><th></th></tr>
`;for(let L=0;L<i.length;L+=1)l[L].total>0&&(w+="<tr>",w+=`<td class="${n.CLASS_ACTIVE}">${l[L].name}</td>`,w+=`<td class="${n.CLASS_EMPTY}">${l[L].empty}</td>`,w+=`<td class="${n.CLASS_MATCH}">${l[L].match}</td>`,w+=`<td class="${n.CLASS_NOMATCH}">${l[L].nomatch}</td>`,w+=`<td class="${n.CLASS_ACTIVE}">${l[L].total}</td>`,w+=`</tr>
`);if(o.length>0){w+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,w+=`<tr><th>udts</th><th></th><th></th><th></th><th></th></tr>
`;for(let L=0;L<o.length;L+=1)h[L].total>0&&(w+="<tr>",w+=`<td class="${n.CLASS_ACTIVE}">${h[L].name}</td>`,w+=`<td class="${n.CLASS_EMPTY}">${h[L].empty}</td>`,w+=`<td class="${n.CLASS_MATCH}">${h[L].match}</td>`,w+=`<td class="${n.CLASS_NOMATCH}">${h[L].nomatch}</td>`,w+=`<td class="${n.CLASS_ACTIVE}">${h[L].total}</td>`,w+=`</tr>
`)}return w};this.validate=function(w){let L=!1;return typeof w=="string"&&u===w&&(L=!0),L},this.init=function(w,L){i=w,o=L,A()},this.collect=function(w,L){p(c,L.state,L.phraseLength),p(a[w.type],L.state,L.phraseLength),w.type===e.RNM&&p(l[w.index],L.state,L.phraseLength),w.type===e.UDT&&p(h[w.index],L.state,L.phraseLength)},this.toHtml=function(w,L){let ee="";ee+=`<table class="${n.CLASS_STATS}">
`,typeof L=="string"&&(ee+=`<caption>${L}</caption>
`),ee+=`<tr><th class="${n.CLASS_ACTIVE}">ops</th>
`,ee+=`<th class="${n.CLASS_EMPTY}">EMPTY</th>
`,ee+=`<th class="${n.CLASS_MATCH}">MATCH</th>
`,ee+=`<th class="${n.CLASS_NOMATCH}">NOMATCH</th>
`,ee+=`<th class="${n.CLASS_ACTIVE}">totals</th></tr>
`;let xe=!0;for(;xe;){if(w===void 0){ee+=N();break}if(w===null){ee+=N();break}if(w==="ops"){ee+=N();break}if(w==="index"){l.sort(y),h.length>0&&h.sort(y),ee+=N(),ee+=$();break}if(w==="hits"){l.sort(T),h.length>0&&h.sort(y),ee+=N(),ee+=$();break}if(w==="alpha"){l.sort(m),h.length>0&&h.sort(m),ee+=N(),ee+=$();break}break}return ee+=`</table>
`,ee},this.toHtmlPage=function(w,L,ee){return t.htmlToPage(this.toHtml(w,L),ee)}}});var Ha=ke((sd,Fa)=>{Fa.exports=function(){let e=Or(),t=Mn(),n=new(ji()),s=St(),i="trace.js: ",o=this,a=16,c=10,l=8,h=32,u=80,m=5,T=[],y=5e3,d=-1,A=0,p=0,b=[],N=null,$=null,q=null,w=[],L=[],ee=`<span class="${t.CLASS_LINEEND}">&bull;</span>`,xe=`<span class="${t.CLASS_LINEEND}">&hellip;</span>`,P=`<span class="${t.CLASS_EMPTY}">&#120634;</span>`,O=function(){let S=function(M){w[s.ALT]=M,w[s.CAT]=M,w[s.REP]=M,w[s.TLS]=M,w[s.TBS]=M,w[s.TRG]=M,w[s.AND]=M,w[s.NOT]=M,w[s.BKR]=M,w[s.BKA]=M,w[s.BKN]=M,w[s.ABG]=M,w[s.AEN]=M},E=0;for(let M in o.filter.operators)E+=1;if(E===0){S(!1);return}for(let M in o.filter.operators){let X=M.toUpperCase();if(X==="<ALL>"){S(!0);return}if(X==="<NONE>"){S(!1);return}}S(!1);for(let M in o.filter.operators){let X=M.toUpperCase();if(X==="ALT")w[s.ALT]=o.filter.operators[M]===!0;else if(X==="CAT")w[s.CAT]=o.filter.operators[M]===!0;else if(X==="REP")w[s.REP]=o.filter.operators[M]===!0;else if(X==="AND")w[s.AND]=o.filter.operators[M]===!0;else if(X==="NOT")w[s.NOT]=o.filter.operators[M]===!0;else if(X==="TLS")w[s.TLS]=o.filter.operators[M]===!0;else if(X==="TBS")w[s.TBS]=o.filter.operators[M]===!0;else if(X==="TRG")w[s.TRG]=o.filter.operators[M]===!0;else if(X==="BKR")w[s.BKR]=o.filter.operators[M]===!0;else if(X==="BKA")w[s.BKA]=o.filter.operators[M]===!0;else if(X==="BKN")w[s.BKN]=o.filter.operators[M]===!0;else if(X==="ABG")w[s.ABG]=o.filter.operators[M]===!0;else if(X==="AEN")w[s.AEN]=o.filter.operators[M]===!0;else throw new Error(`${i}initOpratorFilter: '${M}' not a valid operator name. Must be <all>, <none>, alt, cat, rep, tls, tbs, trg, and, not, bkr, bka or bkn`)}},B=function(){let S=function(ie){w[s.RNM]=ie,w[s.UDT]=ie;let oe=$.length+q.length;L.length=0;for(let ue=0;ue<oe;ue+=1)L.push(ie)},E,M,X=[];for(M=0;M<$.length;M+=1)X.push($[M].lower);for(M=0;M<q.length;M+=1)X.push(q[M].lower);L.length=0,E=0;for(let ie in o.filter.rules)E+=1;if(E===0){S(!0);return}for(let ie in o.filter.rules){let oe=ie.toLowerCase();if(oe==="<all>"){S(!0);return}if(oe==="<none>"){S(!1);return}}S(!1),w[s.RNM]=!0,w[s.UDT]=!0;for(let ie in o.filter.rules){let oe=ie.toLowerCase();if(M=X.indexOf(oe),M<0)throw new Error(`${i}initRuleFilter: '${ie}' not a valid rule or udt name`);L[M]=o.filter.rules[ie]===!0}};this.traceObject="traceObject",this.filter={operators:[],rules:[]},this.setMaxRecords=function(S,E){if(d=-1,typeof S=="number"&&S>0)y=Math.ceil(S);else{y=0;return}typeof E=="number"&&(d=Math.floor(E),d<0&&(d=-1))},this.getMaxRecords=function(){return y},this.getLastRecord=function(){return d},this.init=function(S,E,M){T.length=0,b.length=0,A=0,p=0,N=M,$=S,q=E,O(),B(),n.init(y)};let v=function(S){let E=!1;return S.type===s.RNM?w[S.type]&&L[S.index]?E=!0:E=!1:S.type===s.UDT?w[S.type]&&L[$.length+S.index]?E=!0:E=!1:E=w[S.type],E},G=function(S){return d===-1||S<=d};this.down=function(S,E,M,X,ie,oe){G(A)&&v(S)&&(b.push(A),T[n.increment()]={dirUp:!1,depth:p,thisLine:A,thatLine:void 0,opcode:S,state:E,phraseIndex:M,phraseLength:X,lookAnchor:ie,lookAround:oe},A+=1,p+=1)},this.up=function(S,E,M,X,ie,oe){if(G(A)&&v(S)){let ue=A,_=b.pop(),J=n.getListIndex(_);J!==-1&&(T[J].thatLine=ue),p-=1,T[n.increment()]={dirUp:!0,depth:p,thisLine:ue,thatLine:_,opcode:S,state:E,phraseIndex:M,phraseLength:X,lookAnchor:ie,lookAround:oe},A+=1}};let z=function(){function S(f,x){let D,H,te;if(x)switch(f.op={id:x.type,name:e.opcodeToString(x.type)},f.opData=void 0,x.type){case s.RNM:f.opData=$[x.index].name;break;case s.UDT:f.opData=q[x.index].name;break;case s.BKR:x.index<$.length?D=$[x.index].name:D=q[x.index-$.length].name,H=x.bkrCase===s.BKR_MODE_CI?"%i":"%s",te=x.bkrMode===s.BKR_MODE_UM?"%u":"%p",f.opData=`\\\\${H}${te}${D}`;break;case s.TLS:f.opData=[];for(let fe=0;fe<x.string.length;fe+=1)f.opData.push(x.string[fe]);break;case s.TBS:f.opData=[];for(let fe=0;fe<x.string.length;fe+=1)f.opData.push(x.string[fe]);break;case s.TRG:f.opData=[x.min,x.max];break;case s.REP:f.opData=[x.min,x.max];break;default:throw new Error("unrecognized opcode")}else f.op={id:void 0,name:void 0},f.opData=void 0}function E(f,x,D){return f===s.MATCH?{index:x,length:D}:f===s.NOMATCH?{index:x,length:0}:f===s.EMPTY?{index:x,length:0}:null}let M=-1;function X(f,x,D){let H={id:M++,branch:-1,parent:f,up:!1,down:!1,depth:D,children:[]};return x?(H.down=!0,H.state={id:x.state,name:e.stateToString(x.state)},H.phrase=null,S(H,x.opcode)):(H.state={id:void 0,name:void 0},H.phrase=E(),S(H,void 0)),H}function ie(f,x){x&&(f.up=!0,f.state={id:x.state,name:e.stateToString(x.state)},f.phrase=E(x.state,x.phraseIndex,x.phraseLength),f.down||S(f,x.opcode))}let oe=0,ue=-1,_=1;function J(f){if(ue+=1,f.branch=_,ue>p&&(p=ue),f.children.length===0)oe+=1;else for(let x=0;x<f.children.length;x+=1)x>0&&(_+=1),f.children[x].leftMost=!1,f.children[x].rightMost=!1,f.leftMost&&(f.children[x].leftMost=x===0),f.rightMost&&(f.children[x].rightMost=x===f.children.length-1),J(f.children[x]);ue-=1}function R(f,x){let D,H={};if(H.id=f.id,H.branch=f.branch,H.leftMost=f.leftMost,H.rightMost=f.rightMost,D=f.state.name?f.state.name:"ACTIVE",H.state={id:f.state.id,name:D},D=f.op.name?f.op.name:"?",H.op={id:f.op.id,name:D},typeof f.opData=="string")H.opData=f.opData;else if(Array.isArray(f.opData)){H.opData=[];for(let te=0;te<f.opData.length;te+=1)H.opData[te]=f.opData[te]}else H.opData=void 0;f.phrase?H.phrase={index:f.phrase.index,length:f.phrase.length}:H.phrase=null,H.depth=f.depth,H.children=[];for(let te=0;te<f.children.length;te+=1){let fe=te!==f.children.length-1;H.children[te]=R(f.children[te],x,fe)}return H}let Z=[],g,F,he,ge,Ne=!0,Jr=X(null,null,-1);for(Z.push(Jr),F=Jr,n.forEach(f=>{if(ge=T[f],Ne&&(Ne=!1,ge.depth>0)){let x=ge.dirUp?ge.depth+1:ge.depth;for(let D=0;D<x;D+=1)he=F,F=X(F,null,D),Z.push(F),he.children.push(F)}ge.dirUp?(F=Z.pop(),ie(F,ge),F=Z[Z.length-1]):(he=F,F=X(F,ge,ge.depth),Z.push(F),he.children.push(F))});Z.length>1;)F=Z.pop(),ie(F,null);if(Jr.children.length===0)throw new Error("trace.toTree(): parse tree has no nodes");if(Z.length===0)throw new Error("trace.toTree(): integrity check: dummy root node disappeared?");g=Jr.children[0];let ps=g;for(;g&&!g.down&&!g.up;)ps=g,g=g.children[0];g=ps,g.leftMost=!0,g.rightMost=!0,J(g),g.branch=0;let I={};I.string=[];for(let f=0;f<N.length;f+=1)I.string[f]=N[f];I.rules=[];for(let f=0;f<$.length;f+=1)I.rules[f]=$[f].name;I.udts=[];for(let f=0;f<q.length;f+=1)I.udts[f]=q[f].name;I.id={},I.id.ALT={id:s.ALT,name:"ALT"},I.id.CAT={id:s.CAT,name:"CAT"},I.id.REP={id:s.REP,name:"REP"},I.id.RNM={id:s.RNM,name:"RNM"},I.id.TLS={id:s.TLS,name:"TLS"},I.id.TBS={id:s.TBS,name:"TBS"},I.id.TRG={id:s.TRG,name:"TRG"},I.id.UDT={id:s.UDT,name:"UDT"},I.id.AND={id:s.AND,name:"AND"},I.id.NOT={id:s.NOT,name:"NOT"},I.id.BKR={id:s.BKR,name:"BKR"},I.id.BKA={id:s.BKA,name:"BKA"},I.id.BKN={id:s.BKN,name:"BKN"},I.id.ABG={id:s.ABG,name:"ABG"},I.id.AEN={id:s.AEN,name:"AEN"},I.id.ACTIVE={id:s.ACTIVE,name:"ACTIVE"},I.id.MATCH={id:s.MATCH,name:"MATCH"},I.id.EMPTY={id:s.EMPTY,name:"EMPTY"},I.id.NOMATCH={id:s.NOMATCH,name:"NOMATCH"},I.treeDepth=p,I.leafNodes=oe;let k;return g.down?g.up?k="none":k="right":g.up?k="left":k="both",I.branchesIncomplete=k,I.tree=R(g,g.depth,!1),I};this.toTree=function(S){let E=z();return S?JSON.stringify(E):E},this.toHtmlPage=function(S,E,M){return e.htmlToPage(this.toHtml(S,E),M)};let j=function(S,E){let M;switch(S){case a:M="hexadecimal";break;case c:M="decimal";break;case l:M="ASCII";break;case h:M="UNICODE";break;default:throw new Error(`${i}htmlHeader: unrecognized mode: ${S}`)}let X="";return X+=`<p>display mode: ${M}</p>
`,X+=`<table class="${t.CLASS_TRACE}">
`,typeof E=="string"&&(X+=`<caption>${E}</caption>`),X},re=function(){let S="";return S+=`</table>
`,S+=`<p class="${t.CLASS_MONOSPACE}">legend:<br>
`,S+=`(a)&nbsp;-&nbsp;line number<br>
`,S+=`(b)&nbsp;-&nbsp;matching line number<br>
`,S+=`(c)&nbsp;-&nbsp;phrase offset<br>
`,S+=`(d)&nbsp;-&nbsp;phrase length<br>
`,S+=`(e)&nbsp;-&nbsp;tree depth<br>
`,S+=`(f)&nbsp;-&nbsp;operator state<br>
`,S+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_ACTIVE}">&darr;</span>&nbsp;&nbsp;phrase opened<br>
`,S+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_MATCH}">&uarr;M</span> phrase matched<br>
`,S+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_EMPTY}">&uarr;E</span> empty phrase matched<br>
`,S+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_NOMATCH}">&uarr;N</span> phrase not matched<br>
`,S+=`operator&nbsp;-&nbsp;ALT, CAT, REP, RNM, TRG, TLS, TBS<sup>&dagger;</sup>, UDT, AND, NOT, BKA, BKN, BKR, ABG, AEN<sup>&Dagger;</sup><br>
`,S+=`phrase&nbsp;&nbsp;&nbsp;-&nbsp;up to ${u} characters of the phrase being matched<br>
`,S+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_MATCH}">matched characters</span><br>
`,S+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_LOOKAHEAD}">matched characters in look ahead mode</span><br>
`,S+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_LOOKBEHIND}">matched characters in look behind mode</span><br>
`,S+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_REMAINDER}">remainder characters(not yet examined by parser)</span><br>
`,S+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${t.CLASS_CTRLCHAR}">control characters, TAB, LF, CR, etc. (ASCII mode only)</span><br>
`,S+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${P} empty string<br>
`,S+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${ee} end of input string<br>
`,S+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${xe} input string display truncated<br>
`,S+=`</p>
`,S+=`<p class="${t.CLASS_MONOSPACE}">
`,S+=`<sup>&dagger;</sup>original ABNF operators:<br>
`,S+=`ALT - alternation<br>
`,S+=`CAT - concatenation<br>
`,S+=`REP - repetition<br>
`,S+=`RNM - rule name<br>
`,S+=`TRG - terminal range<br>
`,S+=`TLS - terminal literal string (case insensitive)<br>
`,S+=`TBS - terminal binary string (case sensitive)<br>
`,S+=`<br>
`,S+=`<sup>&Dagger;</sup>super set SABNF operators:<br>
`,S+=`UDT - user-defined terminal<br>
`,S+=`AND - positive look ahead<br>
`,S+=`NOT - negative look ahead<br>
`,S+=`BKA - positive look behind<br>
`,S+=`BKN - negative look behind<br>
`,S+=`BKR - back reference<br>
`,S+=`ABG - anchor - begin of input string<br>
`,S+=`AEN - anchor - end of input string<br>
`,S+=`</p>
`,S};this.indent=function(S){let E="";for(let M=0;M<S;M+=1)E+=".";return E};let le=function(S,E){let M="";if(E.type===s.TRG)if(S===a||S===h){let X=E.min.toString(16).toUpperCase();X.length%2!==0&&(X=`0${X}`),M+=S===a?"%x":"U+",M+=X,X=E.max.toString(16).toUpperCase(),X.length%2!==0&&(X=`0${X}`),M+=`&ndash;${X}`}else M=`%d${E.min.toString(10)}&ndash;${E.max.toString(10)}`;return M},de=function(S,E){let M="";if(E.type===s.REP)if(S===a){let X=E.min.toString(16).toUpperCase();X.length%2!==0&&(X=`0${X}`),M=`x${X}`,E.max<1/0?(X=E.max.toString(16).toUpperCase(),X.length%2!==0&&(X=`0${X}`)):X="inf",M+=`&ndash;${X}`}else E.max<1/0?M=`${E.min.toString(10)}&ndash;${E.max.toString(10)}`:M=`${E.min.toString(10)}&ndash;inf`;return M},Q=function(S,E){let M="";if(E.type===s.TBS){let X=Math.min(E.string.length,m*2);if(S===a||S===h){M+=S===a?"%x":"U+";for(let ie=0;ie<X;ie+=1){let oe;ie>0&&(M+="."),oe=E.string[ie].toString(16).toUpperCase(),oe.length%2!==0&&(oe=`0${oe}`),M+=oe}}else{M="%d";for(let ie=0;ie<X;ie+=1)ie>0&&(M+="."),M+=E.string[ie].toString(10)}X<E.string.length&&(M+=xe)}return M},se=function(S,E){let M="";if(E.type===s.TLS){let X=Math.min(E.string.length,m);if(S===a||S===c){let ie,oe,ue;S===a?(M="%x",ue=16):(M="%d",ue=10);for(let _=0;_<X;_+=1)_>0&&(M+="."),oe=E.string[_],oe>=97&&oe<=122?(ie=oe-32,M+=`${ie.toString(ue)}/${oe.toString(ue)}`.toUpperCase()):oe>=65&&oe<=90?(ie=oe,oe+=32,M+=`${ie.toString(ue)}/${oe.toString(ue)}`.toUpperCase()):M+=oe.toString(ue).toUpperCase();X<E.string.length&&(M+=xe)}else{M='"';for(let ie=0;ie<X;ie+=1)M+=e.asciiChars[E.string[ie]];X<E.string.length&&(M+=xe),M+='"'}}return M},K=function(S,E,M,X,ie){if(X===0)return"";let oe="",ue=ie?",":"";switch(S){case a:oe=ue+e.charsToHex(E,M,X);break;case c:if(ie)return`,${e.charsToDec(E,M,X)}`;oe=ue+e.charsToDec(E,M,X);break;case h:oe=e.charsToUnicode(E,M,X);break;case l:default:oe=e.charsToAsciiHtml(E,M,X);break}return oe},C=function(S,E,M,X,ie,oe){let ue="",_,J,R,Z,g=ee,F=`<span class="${t.CLASS_LOOKBEHIND}">`,he=`<span class="${t.CLASS_REMAINDER}">`,ge="</span>",Ne=!1;switch(M){case s.EMPTY:ue+=P;case s.NOMATCH:case s.MATCH:case s.ACTIVE:_=X-ie,J=oe-_,R=oe,Z=E.length-R;break;default:throw new Error("unrecognized state")}return g=ee,J>u?(J=u,g=xe,Z=0):J+Z>u&&(g=xe,Z=u-J),J>0&&(ue+=F,ue+=K(S,E,_,J,Ne),ue+=ge,Ne=!0),Z>0&&(ue+=he,ue+=K(S,E,R,Z,Ne),ue+=ge),ue+g},me=function(S,E,M,X,ie,oe){let ue="",_,J,R,Z,g=ee,F=`<span class="${t.CLASS_REMAINDER}">`,he="</span>",ge=!1;switch(M){case s.EMPTY:ue+=P;case s.NOMATCH:case s.ACTIVE:_=X,J=0,R=X,Z=E.length-R;break;case s.MATCH:_=X,J=ie,R=X+J,Z=E.length-R;break;default:throw new Error("unrecognized state")}return g=ee,J>u?(J=u,g=xe,Z=0):J+Z>u&&(g=xe,Z=u-J),J>0&&(ue+=oe,ue+=K(S,E,_,J,ge),ue+=he,ge=!0),Z>0&&(ue+=F,ue+=K(S,E,R,Z,ge),ue+=he),ue+g},Pe=function(S,E,M,X,ie){let oe=`<span class="${t.CLASS_LOOKAHEAD}">`;return me(S,E,M,X,ie,oe)},Se=function(S,E,M,X,ie){let oe=`<span class="${t.CLASS_MATCH}">`;return me(S,E,M,X,ie,oe)},Ee=function(S){if($===null)return"";let E="",M,X,ie,oe,ue,_;return E+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",E+=`<th>operator</th><th>phrase</th></tr>
`,n.forEach(J=>{let R=T[J];switch(M=R.thisLine,X=R.thatLine!==void 0?R.thatLine:"--",ie=!1,oe=!1,ue=!1,R.lookAround===s.LOOKAROUND_AHEAD&&(ie=!0,ue=!0,_=R.lookAnchor),(R.opcode.type===s.AND||R.opcode.type===s.NOT)&&(ie=!0,ue=!0,_=R.phraseIndex),R.lookAround===s.LOOKAROUND_BEHIND&&(oe=!0,ue=!0,_=R.lookAnchor),(R.opcode.type===s.BKA||R.opcode.type===s.BKN)&&(oe=!0,ue=!0,_=R.phraseIndex),E+="<tr>",E+=`<td>${M}</td><td>${X}</td>`,E+=`<td>${R.phraseIndex}</td>`,E+=`<td>${R.phraseLength}</td>`,E+=`<td>${R.depth}</td>`,E+="<td>",R.state){case s.ACTIVE:E+=`<span class="${t.CLASS_ACTIVE}">&darr;&nbsp;</span>`;break;case s.MATCH:E+=`<span class="${t.CLASS_MATCH}">&uarr;M</span>`;break;case s.NOMATCH:E+=`<span class="${t.CLASS_NOMATCH}">&uarr;N</span>`;break;case s.EMPTY:E+=`<span class="${t.CLASS_EMPTY}">&uarr;E</span>`;break;default:E+=`<span class="${t.CLASS_ACTIVE}">--</span>`;break}if(E+="</td>",E+="<td>",E+=o.indent(R.depth),ie?E+=`<span class="${t.CLASS_LOOKAHEAD}">`:oe&&(E+=`<span class="${t.CLASS_LOOKBEHIND}">`),E+=e.opcodeToString(R.opcode.type),R.opcode.type===s.RNM&&(E+=`(${$[R.opcode.index].name}) `),R.opcode.type===s.BKR){let Z=R.opcode.bkrCase===s.BKR_MODE_CI?"%i":"%s",g=R.opcode.bkrMode===s.BKR_MODE_UM?"%u":"%p";E+=`(\\${Z}${g}${$[R.opcode.index].name}) `}R.opcode.type===s.UDT&&(E+=`(${q[R.opcode.index].name}) `),R.opcode.type===s.TRG&&(E+=`(${le(S,R.opcode)}) `),R.opcode.type===s.TBS&&(E+=`(${Q(S,R.opcode)}) `),R.opcode.type===s.TLS&&(E+=`(${se(S,R.opcode)}) `),R.opcode.type===s.REP&&(E+=`(${de(S,R.opcode)}) `),ue&&(E+="</span>"),E+="</td>",E+="<td>",oe?E+=C(S,N,R.state,R.phraseIndex,R.phraseLength,_):ie?E+=Pe(S,N,R.state,R.phraseIndex,R.phraseLength):E+=Se(S,N,R.state,R.phraseIndex,R.phraseLength),E+=`</td></tr>
`}),E+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",E+=`<th>operator</th><th>phrase</th></tr>
`,E+=`</table>
`,E};this.toHtml=function(S,E){let M=l;if(typeof S=="string"&&S.length>=3){let ie=S.toLowerCase().slice(0,3);ie==="hex"?M=a:ie==="dec"?M=c:ie==="uni"&&(M=h)}let X="";return X+=j(M,E),X+=Ee(M),X+=re(),X}}});var Rr=ke((id,Da)=>{Da.exports={ast:Ma(),circular:ji(),ids:St(),parser:$a(),stats:_a(),trace:Ha(),utils:Or(),emitcss:qi(),style:Mn()}});var Ka=ke((od,Va)=>{Va.exports=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"file",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"line",lower:"line",index:1,isBkr:!1},this.rules[2]={name:"line-text",lower:"line-text",index:2,isBkr:!1},this.rules[3]={name:"last-line",lower:"last-line",index:3,isBkr:!1},this.rules[4]={name:"valid",lower:"valid",index:4,isBkr:!1},this.rules[5]={name:"invalid",lower:"invalid",index:5,isBkr:!1},this.rules[6]={name:"end",lower:"end",index:6,isBkr:!1},this.rules[7]={name:"CRLF",lower:"crlf",index:7,isBkr:!1},this.rules[8]={name:"LF",lower:"lf",index:8,isBkr:!1},this.rules[9]={name:"CR",lower:"cr",index:9,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:2,children:[1,3]},this.rules[0].opcodes[1]={type:3,min:0,max:1/0},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:3,min:0,max:1},this.rules[0].opcodes[4]={type:4,index:3},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,2]},this.rules[1].opcodes[1]={type:4,index:2},this.rules[1].opcodes[2]={type:4,index:6},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:3,min:0,max:1/0},this.rules[2].opcodes[1]={type:1,children:[2,3]},this.rules[2].opcodes[2]={type:4,index:4},this.rules[2].opcodes[3]={type:4,index:5},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:3,min:1,max:1/0},this.rules[3].opcodes[1]={type:1,children:[2,3]},this.rules[3].opcodes[2]={type:4,index:4},this.rules[3].opcodes[3]={type:4,index:5},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:5,min:32,max:126},this.rules[4].opcodes[2]={type:6,string:[9]},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[5].opcodes[1]={type:5,min:0,max:8},this.rules[5].opcodes[2]={type:5,min:11,max:12},this.rules[5].opcodes[3]={type:5,min:14,max:31},this.rules[5].opcodes[4]={type:5,min:127,max:4294967295},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:1,children:[1,2,3]},this.rules[6].opcodes[1]={type:4,index:7},this.rules[6].opcodes[2]={type:4,index:8},this.rules[6].opcodes[3]={type:4,index:9},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:6,string:[13,10]},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:6,string:[10]},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:6,string:[13]},this.toString=function(){let t="";return t+=`file = *line [last-line]
`,t+=`line = line-text end
`,t+=`line-text = *(valid/invalid)
`,t+=`last-line = 1*(valid/invalid)
`,t+=`valid = %d32-126 / %d9
`,t+=`invalid = %d0-8 / %d11-12 /%d14-31 / %x7f-ffffffff
`,t+=`end = CRLF / LF / CR
`,t+=`CRLF = %d13.10
`,t+=`LF = %d10
`,t+=`CR = %d13
`,t}}});var za=ke(Ga=>{var Xe=St(),dh=Or();function mh(r,e,t,n,s){return r===Xe.SEM_PRE?(s.endLength=0,s.textLength=0,s.invalidCount=0):s.lines.push({lineNo:s.lines.length,beginChar:t,length:n,textLength:s.textLength,endType:s.endType,invalidChars:s.invalidCount}),Xe.SEM_OK}function gh(r,e,t,n,s){return r===Xe.SEM_PRE&&(s.textLength=n),Xe.SEM_OK}function yh(r,e,t,n,s){return r===Xe.SEM_PRE?(s.endLength=0,s.textLength=0,s.invalidCount=0):s.strict?(s.lines.push({lineNo:s.lines.length,beginChar:t,length:n,textLength:n,endType:"none",invalidChars:s.invalidCount}),s.errors.push({line:s.lineNo,char:t+n,msg:"no line end on last line - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})):(e.push(10),s.lines.push({lineNo:s.lines.length,beginChar:t,length:n+1,textLength:n,endType:"LF",invalidChars:s.invalidCount})),Xe.SEM_OK}function bh(r,e,t,n,s){return r===Xe.SEM_PRE&&s.errors.push({line:s.lineNo,char:t,msg:`invalid character found '\\x${dh.charToHex(e[t])}'`}),Xe.SEM_OK}function wh(r,e,t,n,s){return r===Xe.SEM_POST&&(s.lineNo+=1),Xe.SEM_OK}function xh(r,e,t,n,s){return r===Xe.SEM_PRE&&(s.endType="LF",s.strict&&s.errors.push({line:s.lineNo,char:t,msg:"line end character LF(\\n, \\x0A) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),Xe.SEM_OK}function Eh(r,e,t,n,s){return r===Xe.SEM_PRE&&(s.endType="CR",s.strict&&s.errors.push({line:s.lineNo,char:t,msg:"line end character CR(\\r, \\x0D) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),Xe.SEM_OK}function Th(r,e,t,n,s){return r===Xe.SEM_PRE&&(s.endType="CRLF"),Xe.SEM_OK}var zt=[];zt.line=mh;zt["line-text"]=gh;zt["last-line"]=yh;zt.invalid=bh;zt.end=wh;zt.lf=xh;zt.cr=Eh;zt.crlf=Th;Ga.callbacks=zt});var Ya=ke((cd,qa)=>{qa.exports=function(e,t,n,s){let i="scanner.js: ",o=Rr(),a=new(Ka()),{callbacks:c}=za(),l=[],h=new o.parser;if(h.ast=new o.ast,h.ast.callbacks=c,s){if(s.traceObject!=="traceObject")throw new TypeError(`${i}trace argument is not a trace object`);h.trace=s}if(h.parse(a,"file",e).success!==!0){t.push({line:0,char:0,msg:"syntax analysis error analyzing input SABNF grammar"});return}let m={lines:l,lineNo:0,errors:t,strict:!!n};return h.ast.translate(m),l}});var Wa=ke((ld,ja)=>{ja.exports=function(){let e="syntax-callbacks.js: ",t=Rr(),n=t.ids,s,i=function(se,K,C,me){switch(se.state){case n.ACTIVE:me.altStack=[],me.repCount=0;break;case n.EMPTY:me.errors.push({line:0,char:0,msg:"grammar file is empty"});break;case n.MATCH:me.ruleCount===0&&me.errors.push({line:0,char:0,msg:"no rules defined"});break;case n.NOMATCH:throw new Error(`${e}synFile: grammar file NOMATCH: design error: should never happen.`);default:throw new Error(`${e}synFile: unrecognized case.`)}},o=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:C.altStack.length=0,s={groupOpen:null,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},C.altStack.push(s);break;case n.EMPTY:throw new Error(`${e}synRule: EMPTY: rule cannot be empty`);case n.NOMATCH:break;case n.MATCH:C.ruleCount+=1;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},a=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:C.errors.push({line:C.findLine(C.lines,K,C.charsLength),char:K,msg:"Unrecognized SABNF line. Invalid rule, comment or blank line."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},c=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:C.errors.push({line:C.findLine(C.lines,K,C.charsLength),char:K,msg:"Rule names must be alphanum and begin with alphabetic character."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},l=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:C.errors.push({line:C.findLine(C.lines,K,C.charsLength),char:K,msg:"Expected '=' or '=/'. Not found."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},h=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:C.strict&&C.errors.push({line:C.findLine(C.lines,K,C.charsLength),char:K,msg:"AND operator(&) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},u=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:C.strict&&C.errors.push({line:C.findLine(C.lines,K,C.charsLength),char:K,msg:"NOT operator(!) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},m=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:C.strict&&C.errors.push({line:C.findLine(C.lines,K,C.charsLength),char:K,msg:"Positive look-behind operator(&&) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},T=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:C.strict&&C.errors.push({line:C.findLine(C.lines,K,C.charsLength),char:K,msg:"Negative look-behind operator(!!) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},y=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:C.strict&&C.errors.push({line:C.findLine(C.lines,K,C.charsLength),char:K,msg:"Beginning of string anchor(%^) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},d=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:C.strict&&C.errors.push({line:C.findLine(C.lines,K,C.charsLength),char:K,msg:"End of string anchor(%$) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},A=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:if(C.strict){let me=t.utils.charsToString(se,K,Q.phraseLength);C.errors.push({line:C.findLine(C.lines,K,C.charsLength),char:K,msg:`Back reference operator(${me}) found - strict ABNF specified.`})}break;default:throw new Error(`${e}synFile: unrecognized case.`)}},p=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:if(C.strict){let me=t.utils.charsToString(se,K,Q.phraseLength);C.errors.push({line:C.findLine(C.lines,K,C.charsLength),char:K,msg:`UDT operator found(${me}) - strict ABNF specified.`})}break;default:throw new Error(`${e}synFile: unrecognized case.`)}},b=function(Q,se,K){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:s.tlsOpen=K;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},N=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:C.stringTabChar=!1;break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:C.stringTabChar!==!1&&C.errors.push({line:C.findLine(C.lines,C.stringTabChar),char:C.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string (see 'quoted-string' definition, RFC 7405.)"});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},$=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:C.stringTabChar=K;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},q=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:C.errors.push({line:C.findLine(C.lines,s.tlsOpen),char:s.tlsOpen,msg:'Case-insensitive literal string("...") opened but not closed.'}),s.basicError=!0,s.tlsOpen=null;break;case n.MATCH:s.tlsOpen=null;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},w=function(Q,se,K){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:s.clsOpen=K;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},L=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:C.stringTabChar=!1;break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:C.stringTabChar!==!1&&C.errors.push({line:C.findLine(C.lines,C.stringTabChar),char:C.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},ee=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:C.errors.push({line:C.findLine(C.lines,s.clsOpen),char:s.clsOpen,msg:"Case-sensitive literal string('...') opened but not closed."}),s.clsOpen=null,s.basicError=!0;break;case n.MATCH:C.strict&&C.errors.push({line:C.findLine(C.lines,s.clsOpen),char:s.clsOpen,msg:"Case-sensitive string operator('...') found - strict ABNF specified."}),s.clsOpen=null;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},xe=function(Q,se,K){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:s.prosValOpen=K;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},P=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:C.stringTabChar=!1;break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:C.stringTabChar!==!1&&C.errors.push({line:C.findLine(C.lines,C.stringTabChar),char:C.stringTabChar,msg:"Tab character (\\t, x09) not allowed in prose value string."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},O=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:C.errors.push({line:C.findLine(C.lines,s.prosValOpen),char:s.prosValOpen,msg:"Prose value operator(<...>) opened but not closed."}),s.basicError=!0,s.prosValOpen=null;break;case n.MATCH:C.errors.push({line:C.findLine(C.lines,s.prosValOpen),char:s.prosValOpen,msg:"Prose value operator(<...>) found. The ABNF syntax is valid, but a parser cannot be generated from this grammar."}),s.prosValOpen=null;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},B=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:s={groupOpen:K,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},C.altStack.push(s);break;default:throw new Error(`${e}synFile: unrecognized case.`)}},v=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:C.errors.push({line:C.findLine(C.lines,s.groupOpen),char:s.groupOpen,msg:'Group "(...)" opened but not closed.'}),s=C.altStack.pop(),s.groupError=!0;break;case n.MATCH:s=C.altStack.pop();break;default:throw new Error(`${e}synFile: unrecognized case.`)}},G=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:s={groupOpen:null,groupError:!1,optionOpen:K,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},C.altStack.push(s);break;default:throw new Error(`${e}synFile: unrecognized case.`)}},z=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:C.errors.push({line:C.findLine(C.lines,s.optionOpen),char:s.optionOpen,msg:'Option "[...]" opened but not closed.'}),s=C.altStack.pop(),s.optionError=!0;break;case n.MATCH:s=C.altStack.pop();break;default:throw new Error(`${e}synFile: unrecognized case.`)}},j=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:s.basicError===!1&&C.errors.push({line:C.findLine(C.lines,K,C.charsLength),char:K,msg:"Unrecognized SABNF element."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},re=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:if(Q.phraseLength===1&&C.strict){let me=se[K]===13?"CR":"LF";C.errors.push({line:C.findLine(C.lines,K,C.charsLength),char:K,msg:`Line end '${me}' found - strict ABNF specified, only CRLF allowed.`})}break;default:throw new Error(`${e}synFile: unrecognized case.`)}},le=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:break;case n.MATCH:C.errors.push({line:C.findLine(C.lines,K,C.charsLength),char:K,msg:"Unrecognized grammar element or characters."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},de=function(Q,se,K,C){switch(Q.state){case n.ACTIVE:break;case n.EMPTY:break;case n.NOMATCH:C.repCount+=1;break;case n.MATCH:C.repCount+=1;break;default:throw new Error(`${e}synFile: unrecognized case.`)}};this.callbacks=[],this.callbacks.andop=h,this.callbacks.basicelementerr=j,this.callbacks.clsclose=ee,this.callbacks.clsopen=w,this.callbacks.clsstring=L,this.callbacks.definedaserror=l,this.callbacks.file=i,this.callbacks.groupclose=v,this.callbacks.groupopen=B,this.callbacks.lineenderror=le,this.callbacks.lineend=re,this.callbacks.notop=u,this.callbacks.optionclose=z,this.callbacks.optionopen=G,this.callbacks.prosvalclose=O,this.callbacks.prosvalopen=xe,this.callbacks.prosvalstring=P,this.callbacks.repetition=de,this.callbacks.rule=o,this.callbacks.ruleerror=a,this.callbacks.rulenameerror=c,this.callbacks.stringtab=$,this.callbacks.tlsclose=q,this.callbacks.tlsopen=b,this.callbacks.tlsstring=N,this.callbacks.udtop=p,this.callbacks.bkaop=m,this.callbacks.bknop=T,this.callbacks.bkrop=A,this.callbacks.abgop=y,this.callbacks.aenop=d}});var Ja=ke((ud,Za)=>{Za.exports=function(){let e=Rr(),t=e.ids,n=function(){this.names=[],this.add=function(R){let Z=-1;return this.get(R)===-1&&(Z={name:R,lower:R.toLowerCase(),index:this.names.length},this.names.push(Z)),Z},this.get=function(R){let Z=-1,g=R.toLowerCase();for(let F=0;F<this.names.length;F+=1)if(this.names[F].lower===g){Z=this.names[F];break}return Z}},s=function(J,R,Z){let g=0;for(let F=R;F<R+Z;F+=1)g=10*g+J[F]-48;return g},i=function(J,R,Z){let g=0;for(let F=R;F<R+Z;F+=1)g=2*g+J[F]-48;return g},o=function(J,R,Z){let g=0;for(let F=R;F<R+Z;F+=1){let he=J[F];if(he>=48&&he<=57)he-=48;else if(he>=65&&he<=70)he-=55;else if(he>=97&&he<=102)he-=87;else throw new Error("hexnum out of range");g=16*g+he}return g};function a(_,J,R,Z,g){let F=t.SEM_OK;if(_===t.SEM_PRE)g.ruleNames=new n,g.udtNames=new n,g.rules=[],g.udts=[],g.rulesLineMap=[],g.opcodes=[],g.altStack=[],g.topStack=null,g.topRule=null;else if(_===t.SEM_POST){let he;g.rules.forEach(ge=>{ge.isBkr=!1,ge.opcodes.forEach(Ne=>{Ne.type===t.RNM&&(he=g.ruleNames.get(Ne.index.name),he===-1?(g.errors.push({line:g.findLine(g.lines,Ne.index.phraseIndex,g.charsLength),char:Ne.index.phraseIndex,msg:`Rule name '${Ne.index.name}' used but not defined.`}),Ne.index=-1):Ne.index=he.index)})}),g.udts.forEach(ge=>{ge.isBkr=!1}),g.rules.forEach(ge=>{ge.opcodes.forEach(Ne=>{Ne.type===t.BKR&&(ge.hasBkr=!0,he=g.ruleNames.get(Ne.index.name),he!==-1?(g.rules[he.index].isBkr=!0,Ne.index=he.index):(he=g.udtNames.get(Ne.index.name),he!==-1?(g.udts[he.index].isBkr=!0,Ne.index=g.rules.length+he.index):(g.errors.push({line:g.findLine(g.lines,Ne.index.phraseIndex,g.charsLength),char:Ne.index.phraseIndex,msg:`Back reference name '${Ne.index.name}' refers to undefined rule or unamed UDT.`}),Ne.index=-1)))})})}return F}function c(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_PRE&&(g.altStack.length=0,g.topStack=null,g.rulesLineMap.push({line:g.findLine(g.lines,R,g.charsLength),char:R})),F}function l(_,J,R,Z,g){let F=t.SEM_OK;if(_===t.SEM_PRE)g.ruleName="",g.definedas="";else if(_===t.SEM_POST){let he;g.definedas==="="?(he=g.ruleNames.add(g.ruleName),he===-1?(g.definedas=null,g.errors.push({line:g.findLine(g.lines,R,g.charsLength),char:R,msg:`Rule name '${g.ruleName}' previously defined.`})):(g.topRule={name:he.name,lower:he.lower,opcodes:[],index:he.index},g.rules.push(g.topRule),g.opcodes=g.topRule.opcodes)):(he=g.ruleNames.get(g.ruleName),he===-1?(g.definedas=null,g.errors.push({line:g.findLine(g.lines,R,g.charsLength),char:R,msg:`Rule name '${g.ruleName}' for incremental alternate not previously defined.`})):(g.topRule=g.rules[he.index],g.opcodes=g.topRule.opcodes))}return F}function h(_,J,R,Z,g){let F=t.SEM_OK;if(_===t.SEM_PRE)for(;;){if(g.definedas===null){F=t.SEM_SKIP;break}if(g.topStack===null){if(g.definedas==="="){g.topStack={alt:{type:t.ALT,children:[]},cat:null},g.altStack.push(g.topStack),g.opcodes.push(g.topStack.alt);break}g.topStack={alt:g.opcodes[0],cat:null},g.altStack.push(g.topStack);break}g.topStack={alt:{type:t.ALT,children:[]},cat:null},g.altStack.push(g.topStack),g.opcodes.push(g.topStack.alt);break}else _===t.SEM_POST&&(g.altStack.pop(),g.altStack.length>0?g.topStack=g.altStack[g.altStack.length-1]:g.topStack=null);return F}function u(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_PRE?(g.topStack.alt.children.push(g.opcodes.length),g.topStack.cat={type:t.CAT,children:[]},g.opcodes.push(g.topStack.cat)):_===t.SEM_POST&&(g.topStack.cat=null),F}function m(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_PRE&&g.topStack.cat.children.push(g.opcodes.length),F}function T(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&g.opcodes.push({type:t.REP,min:0,max:1,char:R}),F}function y(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_PRE&&(g.ruleName=e.utils.charsToString(J,R,Z)),F}function d(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&(g.definedas="="),F}function A(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&(g.definedas="=/"),F}function p(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_PRE?(g.min=0,g.max=1/0,g.topRep={type:t.REP,min:0,max:1/0},g.opcodes.push(g.topRep)):_===t.SEM_POST&&(g.min>g.max&&g.errors.push({line:g.findLine(g.lines,R,g.charsLength),char:R,msg:`repetition min cannot be greater than max: min: ${g.min}: max: ${g.max}`}),g.topRep.min=g.min,g.topRep.max=g.max),F}function b(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&(g.min=s(J,R,Z)),F}function N(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&(g.max=s(J,R,Z)),F}function $(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&(g.max=s(J,R,Z),g.min=g.max),F}function q(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&g.opcodes.push({type:t.AND}),F}function w(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&g.opcodes.push({type:t.NOT}),F}function L(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&g.opcodes.push({type:t.RNM,index:{phraseIndex:R,name:e.utils.charsToString(J,R,Z)}}),F}function ee(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&g.opcodes.push({type:t.ABG}),F}function xe(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&g.opcodes.push({type:t.AEN}),F}function P(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&g.opcodes.push({type:t.BKA}),F}function O(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&g.opcodes.push({type:t.BKN}),F}function B(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_PRE?(g.ci=!0,g.cs=!1,g.um=!0,g.pm=!1):_===t.SEM_POST&&g.opcodes.push({type:t.BKR,bkrCase:g.cs===!0?t.BKR_MODE_CS:t.BKR_MODE_CI,bkrMode:g.pm===!0?t.BKR_MODE_PM:t.BKR_MODE_UM,index:{phraseIndex:g.bkrname.phraseIndex,name:e.utils.charsToString(J,g.bkrname.phraseIndex,g.bkrname.phraseLength)}}),F}function v(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&(g.ci=!0),F}function G(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&(g.cs=!0),F}function z(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&(g.um=!0),F}function j(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&(g.pm=!0),F}function re(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&(g.bkrname={phraseIndex:R,phraseLength:Z}),F}function le(_,J,R,Z,g){let F=t.SEM_OK;if(_===t.SEM_POST){let he=e.utils.charsToString(J,R,Z),ge=g.udtNames.add(he);if(ge===-1){if(ge=g.udtNames.get(he),ge===-1)throw new Error("semUdtEmpty: name look up error")}else g.udts.push({name:ge.name,lower:ge.lower,index:ge.index,empty:!0});g.opcodes.push({type:t.UDT,empty:!0,index:ge.index})}return F}function de(_,J,R,Z,g){let F=t.SEM_OK;if(_===t.SEM_POST){let he=e.utils.charsToString(J,R,Z),ge=g.udtNames.add(he);if(ge===-1){if(ge=g.udtNames.get(he),ge===-1)throw new Error("semUdtNonEmpty: name look up error")}else g.udts.push({name:ge.name,lower:ge.lower,index:ge.index,empty:!1});g.opcodes.push({type:t.UDT,empty:!1,index:ge.index,syntax:null,semantic:null})}return F}function Q(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_PRE&&(g.tlscase=!0),F}function se(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&Z>0&&(J[R+1]===83||J[R+1]===115)&&(g.tlscase=!1),F}function K(_,J,R,Z,g){let F=t.SEM_OK;if(_===t.SEM_POST)if(g.tlscase){let he=J.slice(R,R+Z);for(let ge=0;ge<he.length;ge+=1)he[ge]>=65&&he[ge]<=90&&(he[ge]+=32);g.opcodes.push({type:t.TLS,string:he})}else g.opcodes.push({type:t.TBS,string:J.slice(R,R+Z)});return F}function C(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&(Z<=2?g.opcodes.push({type:t.TLS,string:[]}):g.opcodes.push({type:t.TBS,string:J.slice(R+1,R+Z-1)})),F}function me(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_PRE?g.tbsstr=[]:_===t.SEM_POST&&g.opcodes.push({type:t.TBS,string:g.tbsstr}),F}function Pe(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_PRE?(g.min=0,g.max=0):_===t.SEM_POST&&(g.min>g.max&&g.errors.push({line:g.findLine(g.lines,R,g.charsLength),char:R,msg:`TRG, (%dmin-max), min cannot be greater than max: min: ${g.min}: max: ${g.max}`}),g.opcodes.push({type:t.TRG,min:g.min,max:g.max})),F}function Se(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&(g.min=s(J,R,Z)),F}function Ee(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&(g.max=s(J,R,Z)),F}function S(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&(g.min=i(J,R,Z)),F}function E(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&(g.max=i(J,R,Z)),F}function M(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&(g.min=o(J,R,Z)),F}function X(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&(g.max=o(J,R,Z)),F}function ie(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&g.tbsstr.push(s(J,R,Z)),F}function oe(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&g.tbsstr.push(i(J,R,Z)),F}function ue(_,J,R,Z,g){let F=t.SEM_OK;return _===t.SEM_POST&&g.tbsstr.push(o(J,R,Z)),F}this.callbacks=[],this.callbacks.abgop=ee,this.callbacks.aenop=xe,this.callbacks.alternation=h,this.callbacks.andop=q,this.callbacks.bmax=E,this.callbacks.bmin=S,this.callbacks.bkaop=P,this.callbacks.bknop=O,this.callbacks.bkrop=B,this.callbacks["bkr-name"]=re,this.callbacks.bstring=oe,this.callbacks.clsop=C,this.callbacks.ci=v,this.callbacks.cs=G,this.callbacks.um=z,this.callbacks.pm=j,this.callbacks.concatenation=u,this.callbacks.defined=d,this.callbacks.dmax=Ee,this.callbacks.dmin=Se,this.callbacks.dstring=ie,this.callbacks.file=a,this.callbacks.incalt=A,this.callbacks.notop=w,this.callbacks.optionopen=T,this.callbacks["rep-max"]=N,this.callbacks["rep-min"]=b,this.callbacks["rep-min-max"]=$,this.callbacks.repetition=m,this.callbacks.repop=p,this.callbacks.rnmop=L,this.callbacks.rule=c,this.callbacks.rulelookup=l,this.callbacks.rulename=y,this.callbacks.tbsop=me,this.callbacks.tlscase=se,this.callbacks.tlsstring=K,this.callbacks.tlsop=Q,this.callbacks.trgop=Pe,this.callbacks["udt-empty"]=le,this.callbacks["udt-non-empty"]=de,this.callbacks.xmax=X,this.callbacks.xmin=M,this.callbacks.xstring=ue}});var Qa=ke((hd,Xa)=>{Xa.exports=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"File",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"BlankLine",lower:"blankline",index:1,isBkr:!1},this.rules[2]={name:"Rule",lower:"rule",index:2,isBkr:!1},this.rules[3]={name:"RuleLookup",lower:"rulelookup",index:3,isBkr:!1},this.rules[4]={name:"RuleNameTest",lower:"rulenametest",index:4,isBkr:!1},this.rules[5]={name:"RuleName",lower:"rulename",index:5,isBkr:!1},this.rules[6]={name:"RuleNameError",lower:"rulenameerror",index:6,isBkr:!1},this.rules[7]={name:"DefinedAsTest",lower:"definedastest",index:7,isBkr:!1},this.rules[8]={name:"DefinedAsError",lower:"definedaserror",index:8,isBkr:!1},this.rules[9]={name:"DefinedAs",lower:"definedas",index:9,isBkr:!1},this.rules[10]={name:"Defined",lower:"defined",index:10,isBkr:!1},this.rules[11]={name:"IncAlt",lower:"incalt",index:11,isBkr:!1},this.rules[12]={name:"RuleError",lower:"ruleerror",index:12,isBkr:!1},this.rules[13]={name:"LineEndError",lower:"lineenderror",index:13,isBkr:!1},this.rules[14]={name:"Alternation",lower:"alternation",index:14,isBkr:!1},this.rules[15]={name:"Concatenation",lower:"concatenation",index:15,isBkr:!1},this.rules[16]={name:"Repetition",lower:"repetition",index:16,isBkr:!1},this.rules[17]={name:"Modifier",lower:"modifier",index:17,isBkr:!1},this.rules[18]={name:"Predicate",lower:"predicate",index:18,isBkr:!1},this.rules[19]={name:"BasicElement",lower:"basicelement",index:19,isBkr:!1},this.rules[20]={name:"BasicElementErr",lower:"basicelementerr",index:20,isBkr:!1},this.rules[21]={name:"Group",lower:"group",index:21,isBkr:!1},this.rules[22]={name:"GroupError",lower:"grouperror",index:22,isBkr:!1},this.rules[23]={name:"GroupOpen",lower:"groupopen",index:23,isBkr:!1},this.rules[24]={name:"GroupClose",lower:"groupclose",index:24,isBkr:!1},this.rules[25]={name:"Option",lower:"option",index:25,isBkr:!1},this.rules[26]={name:"OptionError",lower:"optionerror",index:26,isBkr:!1},this.rules[27]={name:"OptionOpen",lower:"optionopen",index:27,isBkr:!1},this.rules[28]={name:"OptionClose",lower:"optionclose",index:28,isBkr:!1},this.rules[29]={name:"RnmOp",lower:"rnmop",index:29,isBkr:!1},this.rules[30]={name:"BkrOp",lower:"bkrop",index:30,isBkr:!1},this.rules[31]={name:"bkrModifier",lower:"bkrmodifier",index:31,isBkr:!1},this.rules[32]={name:"cs",lower:"cs",index:32,isBkr:!1},this.rules[33]={name:"ci",lower:"ci",index:33,isBkr:!1},this.rules[34]={name:"um",lower:"um",index:34,isBkr:!1},this.rules[35]={name:"pm",lower:"pm",index:35,isBkr:!1},this.rules[36]={name:"bkr-name",lower:"bkr-name",index:36,isBkr:!1},this.rules[37]={name:"rname",lower:"rname",index:37,isBkr:!1},this.rules[38]={name:"uname",lower:"uname",index:38,isBkr:!1},this.rules[39]={name:"ename",lower:"ename",index:39,isBkr:!1},this.rules[40]={name:"UdtOp",lower:"udtop",index:40,isBkr:!1},this.rules[41]={name:"udt-non-empty",lower:"udt-non-empty",index:41,isBkr:!1},this.rules[42]={name:"udt-empty",lower:"udt-empty",index:42,isBkr:!1},this.rules[43]={name:"RepOp",lower:"repop",index:43,isBkr:!1},this.rules[44]={name:"AltOp",lower:"altop",index:44,isBkr:!1},this.rules[45]={name:"CatOp",lower:"catop",index:45,isBkr:!1},this.rules[46]={name:"StarOp",lower:"starop",index:46,isBkr:!1},this.rules[47]={name:"AndOp",lower:"andop",index:47,isBkr:!1},this.rules[48]={name:"NotOp",lower:"notop",index:48,isBkr:!1},this.rules[49]={name:"BkaOp",lower:"bkaop",index:49,isBkr:!1},this.rules[50]={name:"BknOp",lower:"bknop",index:50,isBkr:!1},this.rules[51]={name:"AbgOp",lower:"abgop",index:51,isBkr:!1},this.rules[52]={name:"AenOp",lower:"aenop",index:52,isBkr:!1},this.rules[53]={name:"TrgOp",lower:"trgop",index:53,isBkr:!1},this.rules[54]={name:"TbsOp",lower:"tbsop",index:54,isBkr:!1},this.rules[55]={name:"TlsOp",lower:"tlsop",index:55,isBkr:!1},this.rules[56]={name:"TlsCase",lower:"tlscase",index:56,isBkr:!1},this.rules[57]={name:"TlsOpen",lower:"tlsopen",index:57,isBkr:!1},this.rules[58]={name:"TlsClose",lower:"tlsclose",index:58,isBkr:!1},this.rules[59]={name:"TlsString",lower:"tlsstring",index:59,isBkr:!1},this.rules[60]={name:"StringTab",lower:"stringtab",index:60,isBkr:!1},this.rules[61]={name:"ClsOp",lower:"clsop",index:61,isBkr:!1},this.rules[62]={name:"ClsOpen",lower:"clsopen",index:62,isBkr:!1},this.rules[63]={name:"ClsClose",lower:"clsclose",index:63,isBkr:!1},this.rules[64]={name:"ClsString",lower:"clsstring",index:64,isBkr:!1},this.rules[65]={name:"ProsVal",lower:"prosval",index:65,isBkr:!1},this.rules[66]={name:"ProsValOpen",lower:"prosvalopen",index:66,isBkr:!1},this.rules[67]={name:"ProsValString",lower:"prosvalstring",index:67,isBkr:!1},this.rules[68]={name:"ProsValClose",lower:"prosvalclose",index:68,isBkr:!1},this.rules[69]={name:"rep-min",lower:"rep-min",index:69,isBkr:!1},this.rules[70]={name:"rep-min-max",lower:"rep-min-max",index:70,isBkr:!1},this.rules[71]={name:"rep-max",lower:"rep-max",index:71,isBkr:!1},this.rules[72]={name:"rep-num",lower:"rep-num",index:72,isBkr:!1},this.rules[73]={name:"dString",lower:"dstring",index:73,isBkr:!1},this.rules[74]={name:"xString",lower:"xstring",index:74,isBkr:!1},this.rules[75]={name:"bString",lower:"bstring",index:75,isBkr:!1},this.rules[76]={name:"Dec",lower:"dec",index:76,isBkr:!1},this.rules[77]={name:"Hex",lower:"hex",index:77,isBkr:!1},this.rules[78]={name:"Bin",lower:"bin",index:78,isBkr:!1},this.rules[79]={name:"dmin",lower:"dmin",index:79,isBkr:!1},this.rules[80]={name:"dmax",lower:"dmax",index:80,isBkr:!1},this.rules[81]={name:"bmin",lower:"bmin",index:81,isBkr:!1},this.rules[82]={name:"bmax",lower:"bmax",index:82,isBkr:!1},this.rules[83]={name:"xmin",lower:"xmin",index:83,isBkr:!1},this.rules[84]={name:"xmax",lower:"xmax",index:84,isBkr:!1},this.rules[85]={name:"dnum",lower:"dnum",index:85,isBkr:!1},this.rules[86]={name:"bnum",lower:"bnum",index:86,isBkr:!1},this.rules[87]={name:"xnum",lower:"xnum",index:87,isBkr:!1},this.rules[88]={name:"alphanum",lower:"alphanum",index:88,isBkr:!1},this.rules[89]={name:"owsp",lower:"owsp",index:89,isBkr:!1},this.rules[90]={name:"wsp",lower:"wsp",index:90,isBkr:!1},this.rules[91]={name:"space",lower:"space",index:91,isBkr:!1},this.rules[92]={name:"comment",lower:"comment",index:92,isBkr:!1},this.rules[93]={name:"LineEnd",lower:"lineend",index:93,isBkr:!1},this.rules[94]={name:"LineContinue",lower:"linecontinue",index:94,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:3,min:0,max:1/0},this.rules[0].opcodes[1]={type:1,children:[2,3,4]},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:4,index:2},this.rules[0].opcodes[4]={type:4,index:12},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,5,7]},this.rules[1].opcodes[1]={type:3,min:0,max:1/0},this.rules[1].opcodes[2]={type:1,children:[3,4]},this.rules[1].opcodes[3]={type:6,string:[32]},this.rules[1].opcodes[4]={type:6,string:[9]},this.rules[1].opcodes[5]={type:3,min:0,max:1},this.rules[1].opcodes[6]={type:4,index:92},this.rules[1].opcodes[7]={type:4,index:93},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[2].opcodes[1]={type:4,index:3},this.rules[2].opcodes[2]={type:4,index:89},this.rules[2].opcodes[3]={type:4,index:14},this.rules[2].opcodes[4]={type:1,children:[5,8]},this.rules[2].opcodes[5]={type:2,children:[6,7]},this.rules[2].opcodes[6]={type:4,index:89},this.rules[2].opcodes[7]={type:4,index:93},this.rules[2].opcodes[8]={type:2,children:[9,10]},this.rules[2].opcodes[9]={type:4,index:13},this.rules[2].opcodes[10]={type:4,index:93},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:2,children:[1,2,3]},this.rules[3].opcodes[1]={type:4,index:4},this.rules[3].opcodes[2]={type:4,index:89},this.rules[3].opcodes[3]={type:4,index:7},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:4,index:5},this.rules[4].opcodes[2]={type:4,index:6},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:4,index:88},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:3,min:1,max:1/0},this.rules[6].opcodes[1]={type:1,children:[2,3]},this.rules[6].opcodes[2]={type:5,min:33,max:60},this.rules[6].opcodes[3]={type:5,min:62,max:126},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:1,children:[1,2]},this.rules[7].opcodes[1]={type:4,index:9},this.rules[7].opcodes[2]={type:4,index:8},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:3,min:1,max:2},this.rules[8].opcodes[1]={type:5,min:33,max:126},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:1,children:[1,2]},this.rules[9].opcodes[1]={type:4,index:11},this.rules[9].opcodes[2]={type:4,index:10},this.rules[10].opcodes=[],this.rules[10].opcodes[0]={type:6,string:[61]},this.rules[11].opcodes=[],this.rules[11].opcodes[0]={type:6,string:[61,47]},this.rules[12].opcodes=[],this.rules[12].opcodes[0]={type:2,children:[1,6]},this.rules[12].opcodes[1]={type:3,min:1,max:1/0},this.rules[12].opcodes[2]={type:1,children:[3,4,5]},this.rules[12].opcodes[3]={type:5,min:32,max:126},this.rules[12].opcodes[4]={type:6,string:[9]},this.rules[12].opcodes[5]={type:4,index:94},this.rules[12].opcodes[6]={type:4,index:93},this.rules[13].opcodes=[],this.rules[13].opcodes[0]={type:3,min:1,max:1/0},this.rules[13].opcodes[1]={type:1,children:[2,3,4]},this.rules[13].opcodes[2]={type:5,min:32,max:126},this.rules[13].opcodes[3]={type:6,string:[9]},this.rules[13].opcodes[4]={type:4,index:94},this.rules[14].opcodes=[],this.rules[14].opcodes[0]={type:2,children:[1,2]},this.rules[14].opcodes[1]={type:4,index:15},this.rules[14].opcodes[2]={type:3,min:0,max:1/0},this.rules[14].opcodes[3]={type:2,children:[4,5,6]},this.rules[14].opcodes[4]={type:4,index:89},this.rules[14].opcodes[5]={type:4,index:44},this.rules[14].opcodes[6]={type:4,index:15},this.rules[15].opcodes=[],this.rules[15].opcodes[0]={type:2,children:[1,2]},this.rules[15].opcodes[1]={type:4,index:16},this.rules[15].opcodes[2]={type:3,min:0,max:1/0},this.rules[15].opcodes[3]={type:2,children:[4,5]},this.rules[15].opcodes[4]={type:4,index:45},this.rules[15].opcodes[5]={type:4,index:16},this.rules[16].opcodes=[],this.rules[16].opcodes[0]={type:2,children:[1,3]},this.rules[16].opcodes[1]={type:3,min:0,max:1},this.rules[16].opcodes[2]={type:4,index:17},this.rules[16].opcodes[3]={type:1,children:[4,5,6,7]},this.rules[16].opcodes[4]={type:4,index:21},this.rules[16].opcodes[5]={type:4,index:25},this.rules[16].opcodes[6]={type:4,index:19},this.rules[16].opcodes[7]={type:4,index:20},this.rules[17].opcodes=[],this.rules[17].opcodes[0]={type:1,children:[1,5]},this.rules[17].opcodes[1]={type:2,children:[2,3]},this.rules[17].opcodes[2]={type:4,index:18},this.rules[17].opcodes[3]={type:3,min:0,max:1},this.rules[17].opcodes[4]={type:4,index:43},this.rules[17].opcodes[5]={type:4,index:43},this.rules[18].opcodes=[],this.rules[18].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[18].opcodes[1]={type:4,index:49},this.rules[18].opcodes[2]={type:4,index:50},this.rules[18].opcodes[3]={type:4,index:47},this.rules[18].opcodes[4]={type:4,index:48},this.rules[19].opcodes=[],this.rules[19].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10]},this.rules[19].opcodes[1]={type:4,index:40},this.rules[19].opcodes[2]={type:4,index:29},this.rules[19].opcodes[3]={type:4,index:53},this.rules[19].opcodes[4]={type:4,index:54},this.rules[19].opcodes[5]={type:4,index:55},this.rules[19].opcodes[6]={type:4,index:61},this.rules[19].opcodes[7]={type:4,index:30},this.rules[19].opcodes[8]={type:4,index:51},this.rules[19].opcodes[9]={type:4,index:52},this.rules[19].opcodes[10]={type:4,index:65},this.rules[20].opcodes=[],this.rules[20].opcodes[0]={type:3,min:1,max:1/0},this.rules[20].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[20].opcodes[2]={type:5,min:33,max:40},this.rules[20].opcodes[3]={type:5,min:42,max:46},this.rules[20].opcodes[4]={type:5,min:48,max:92},this.rules[20].opcodes[5]={type:5,min:94,max:126},this.rules[21].opcodes=[],this.rules[21].opcodes[0]={type:2,children:[1,2,3]},this.rules[21].opcodes[1]={type:4,index:23},this.rules[21].opcodes[2]={type:4,index:14},this.rules[21].opcodes[3]={type:1,children:[4,5]},this.rules[21].opcodes[4]={type:4,index:24},this.rules[21].opcodes[5]={type:4,index:22},this.rules[22].opcodes=[],this.rules[22].opcodes[0]={type:3,min:1,max:1/0},this.rules[22].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[22].opcodes[2]={type:5,min:33,max:40},this.rules[22].opcodes[3]={type:5,min:42,max:46},this.rules[22].opcodes[4]={type:5,min:48,max:92},this.rules[22].opcodes[5]={type:5,min:94,max:126},this.rules[23].opcodes=[],this.rules[23].opcodes[0]={type:2,children:[1,2]},this.rules[23].opcodes[1]={type:6,string:[40]},this.rules[23].opcodes[2]={type:4,index:89},this.rules[24].opcodes=[],this.rules[24].opcodes[0]={type:2,children:[1,2]},this.rules[24].opcodes[1]={type:4,index:89},this.rules[24].opcodes[2]={type:6,string:[41]},this.rules[25].opcodes=[],this.rules[25].opcodes[0]={type:2,children:[1,2,3]},this.rules[25].opcodes[1]={type:4,index:27},this.rules[25].opcodes[2]={type:4,index:14},this.rules[25].opcodes[3]={type:1,children:[4,5]},this.rules[25].opcodes[4]={type:4,index:28},this.rules[25].opcodes[5]={type:4,index:26},this.rules[26].opcodes=[],this.rules[26].opcodes[0]={type:3,min:1,max:1/0},this.rules[26].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[26].opcodes[2]={type:5,min:33,max:40},this.rules[26].opcodes[3]={type:5,min:42,max:46},this.rules[26].opcodes[4]={type:5,min:48,max:92},this.rules[26].opcodes[5]={type:5,min:94,max:126},this.rules[27].opcodes=[],this.rules[27].opcodes[0]={type:2,children:[1,2]},this.rules[27].opcodes[1]={type:6,string:[91]},this.rules[27].opcodes[2]={type:4,index:89},this.rules[28].opcodes=[],this.rules[28].opcodes[0]={type:2,children:[1,2]},this.rules[28].opcodes[1]={type:4,index:89},this.rules[28].opcodes[2]={type:6,string:[93]},this.rules[29].opcodes=[],this.rules[29].opcodes[0]={type:4,index:88},this.rules[30].opcodes=[],this.rules[30].opcodes[0]={type:2,children:[1,2,4]},this.rules[30].opcodes[1]={type:6,string:[92]},this.rules[30].opcodes[2]={type:3,min:0,max:1},this.rules[30].opcodes[3]={type:4,index:31},this.rules[30].opcodes[4]={type:4,index:36},this.rules[31].opcodes=[],this.rules[31].opcodes[0]={type:1,children:[1,7,13,19]},this.rules[31].opcodes[1]={type:2,children:[2,3]},this.rules[31].opcodes[2]={type:4,index:32},this.rules[31].opcodes[3]={type:3,min:0,max:1},this.rules[31].opcodes[4]={type:1,children:[5,6]},this.rules[31].opcodes[5]={type:4,index:34},this.rules[31].opcodes[6]={type:4,index:35},this.rules[31].opcodes[7]={type:2,children:[8,9]},this.rules[31].opcodes[8]={type:4,index:33},this.rules[31].opcodes[9]={type:3,min:0,max:1},this.rules[31].opcodes[10]={type:1,children:[11,12]},this.rules[31].opcodes[11]={type:4,index:34},this.rules[31].opcodes[12]={type:4,index:35},this.rules[31].opcodes[13]={type:2,children:[14,15]},this.rules[31].opcodes[14]={type:4,index:34},this.rules[31].opcodes[15]={type:3,min:0,max:1},this.rules[31].opcodes[16]={type:1,children:[17,18]},this.rules[31].opcodes[17]={type:4,index:32},this.rules[31].opcodes[18]={type:4,index:33},this.rules[31].opcodes[19]={type:2,children:[20,21]},this.rules[31].opcodes[20]={type:4,index:35},this.rules[31].opcodes[21]={type:3,min:0,max:1},this.rules[31].opcodes[22]={type:1,children:[23,24]},this.rules[31].opcodes[23]={type:4,index:32},this.rules[31].opcodes[24]={type:4,index:33},this.rules[32].opcodes=[],this.rules[32].opcodes[0]={type:6,string:[37,115]},this.rules[33].opcodes=[],this.rules[33].opcodes[0]={type:6,string:[37,105]},this.rules[34].opcodes=[],this.rules[34].opcodes[0]={type:6,string:[37,117]},this.rules[35].opcodes=[],this.rules[35].opcodes[0]={type:6,string:[37,112]},this.rules[36].opcodes=[],this.rules[36].opcodes[0]={type:1,children:[1,2,3]},this.rules[36].opcodes[1]={type:4,index:38},this.rules[36].opcodes[2]={type:4,index:39},this.rules[36].opcodes[3]={type:4,index:37},this.rules[37].opcodes=[],this.rules[37].opcodes[0]={type:4,index:88},this.rules[38].opcodes=[],this.rules[38].opcodes[0]={type:2,children:[1,2]},this.rules[38].opcodes[1]={type:6,string:[117,95]},this.rules[38].opcodes[2]={type:4,index:88},this.rules[39].opcodes=[],this.rules[39].opcodes[0]={type:2,children:[1,2]},this.rules[39].opcodes[1]={type:6,string:[101,95]},this.rules[39].opcodes[2]={type:4,index:88},this.rules[40].opcodes=[],this.rules[40].opcodes[0]={type:1,children:[1,2]},this.rules[40].opcodes[1]={type:4,index:42},this.rules[40].opcodes[2]={type:4,index:41},this.rules[41].opcodes=[],this.rules[41].opcodes[0]={type:2,children:[1,2]},this.rules[41].opcodes[1]={type:6,string:[117,95]},this.rules[41].opcodes[2]={type:4,index:88},this.rules[42].opcodes=[],this.rules[42].opcodes[0]={type:2,children:[1,2]},this.rules[42].opcodes[1]={type:6,string:[101,95]},this.rules[42].opcodes[2]={type:4,index:88},this.rules[43].opcodes=[],this.rules[43].opcodes[0]={type:1,children:[1,5,8,11,12]},this.rules[43].opcodes[1]={type:2,children:[2,3,4]},this.rules[43].opcodes[2]={type:4,index:69},this.rules[43].opcodes[3]={type:4,index:46},this.rules[43].opcodes[4]={type:4,index:71},this.rules[43].opcodes[5]={type:2,children:[6,7]},this.rules[43].opcodes[6]={type:4,index:69},this.rules[43].opcodes[7]={type:4,index:46},this.rules[43].opcodes[8]={type:2,children:[9,10]},this.rules[43].opcodes[9]={type:4,index:46},this.rules[43].opcodes[10]={type:4,index:71},this.rules[43].opcodes[11]={type:4,index:46},this.rules[43].opcodes[12]={type:4,index:70},this.rules[44].opcodes=[],this.rules[44].opcodes[0]={type:2,children:[1,2]},this.rules[44].opcodes[1]={type:6,string:[47]},this.rules[44].opcodes[2]={type:4,index:89},this.rules[45].opcodes=[],this.rules[45].opcodes[0]={type:4,index:90},this.rules[46].opcodes=[],this.rules[46].opcodes[0]={type:6,string:[42]},this.rules[47].opcodes=[],this.rules[47].opcodes[0]={type:6,string:[38]},this.rules[48].opcodes=[],this.rules[48].opcodes[0]={type:6,string:[33]},this.rules[49].opcodes=[],this.rules[49].opcodes[0]={type:6,string:[38,38]},this.rules[50].opcodes=[],this.rules[50].opcodes[0]={type:6,string:[33,33]},this.rules[51].opcodes=[],this.rules[51].opcodes[0]={type:6,string:[37,94]},this.rules[52].opcodes=[],this.rules[52].opcodes[0]={type:6,string:[37,36]},this.rules[53].opcodes=[],this.rules[53].opcodes[0]={type:2,children:[1,2]},this.rules[53].opcodes[1]={type:6,string:[37]},this.rules[53].opcodes[2]={type:1,children:[3,8,13]},this.rules[53].opcodes[3]={type:2,children:[4,5,6,7]},this.rules[53].opcodes[4]={type:4,index:76},this.rules[53].opcodes[5]={type:4,index:79},this.rules[53].opcodes[6]={type:6,string:[45]},this.rules[53].opcodes[7]={type:4,index:80},this.rules[53].opcodes[8]={type:2,children:[9,10,11,12]},this.rules[53].opcodes[9]={type:4,index:77},this.rules[53].opcodes[10]={type:4,index:83},this.rules[53].opcodes[11]={type:6,string:[45]},this.rules[53].opcodes[12]={type:4,index:84},this.rules[53].opcodes[13]={type:2,children:[14,15,16,17]},this.rules[53].opcodes[14]={type:4,index:78},this.rules[53].opcodes[15]={type:4,index:81},this.rules[53].opcodes[16]={type:6,string:[45]},this.rules[53].opcodes[17]={type:4,index:82},this.rules[54].opcodes=[],this.rules[54].opcodes[0]={type:2,children:[1,2]},this.rules[54].opcodes[1]={type:6,string:[37]},this.rules[54].opcodes[2]={type:1,children:[3,10,17]},this.rules[54].opcodes[3]={type:2,children:[4,5,6]},this.rules[54].opcodes[4]={type:4,index:76},this.rules[54].opcodes[5]={type:4,index:73},this.rules[54].opcodes[6]={type:3,min:0,max:1/0},this.rules[54].opcodes[7]={type:2,children:[8,9]},this.rules[54].opcodes[8]={type:6,string:[46]},this.rules[54].opcodes[9]={type:4,index:73},this.rules[54].opcodes[10]={type:2,children:[11,12,13]},this.rules[54].opcodes[11]={type:4,index:77},this.rules[54].opcodes[12]={type:4,index:74},this.rules[54].opcodes[13]={type:3,min:0,max:1/0},this.rules[54].opcodes[14]={type:2,children:[15,16]},this.rules[54].opcodes[15]={type:6,string:[46]},this.rules[54].opcodes[16]={type:4,index:74},this.rules[54].opcodes[17]={type:2,children:[18,19,20]},this.rules[54].opcodes[18]={type:4,index:78},this.rules[54].opcodes[19]={type:4,index:75},this.rules[54].opcodes[20]={type:3,min:0,max:1/0},this.rules[54].opcodes[21]={type:2,children:[22,23]},this.rules[54].opcodes[22]={type:6,string:[46]},this.rules[54].opcodes[23]={type:4,index:75},this.rules[55].opcodes=[],this.rules[55].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[55].opcodes[1]={type:4,index:56},this.rules[55].opcodes[2]={type:4,index:57},this.rules[55].opcodes[3]={type:4,index:59},this.rules[55].opcodes[4]={type:4,index:58},this.rules[56].opcodes=[],this.rules[56].opcodes[0]={type:3,min:0,max:1},this.rules[56].opcodes[1]={type:1,children:[2,3]},this.rules[56].opcodes[2]={type:7,string:[37,105]},this.rules[56].opcodes[3]={type:7,string:[37,115]},this.rules[57].opcodes=[],this.rules[57].opcodes[0]={type:6,string:[34]},this.rules[58].opcodes=[],this.rules[58].opcodes[0]={type:6,string:[34]},this.rules[59].opcodes=[],this.rules[59].opcodes[0]={type:3,min:0,max:1/0},this.rules[59].opcodes[1]={type:1,children:[2,3,4]},this.rules[59].opcodes[2]={type:5,min:32,max:33},this.rules[59].opcodes[3]={type:5,min:35,max:126},this.rules[59].opcodes[4]={type:4,index:60},this.rules[60].opcodes=[],this.rules[60].opcodes[0]={type:6,string:[9]},this.rules[61].opcodes=[],this.rules[61].opcodes[0]={type:2,children:[1,2,3]},this.rules[61].opcodes[1]={type:4,index:62},this.rules[61].opcodes[2]={type:4,index:64},this.rules[61].opcodes[3]={type:4,index:63},this.rules[62].opcodes=[],this.rules[62].opcodes[0]={type:6,string:[39]},this.rules[63].opcodes=[],this.rules[63].opcodes[0]={type:6,string:[39]},this.rules[64].opcodes=[],this.rules[64].opcodes[0]={type:3,min:0,max:1/0},this.rules[64].opcodes[1]={type:1,children:[2,3,4]},this.rules[64].opcodes[2]={type:5,min:32,max:38},this.rules[64].opcodes[3]={type:5,min:40,max:126},this.rules[64].opcodes[4]={type:4,index:60},this.rules[65].opcodes=[],this.rules[65].opcodes[0]={type:2,children:[1,2,3]},this.rules[65].opcodes[1]={type:4,index:66},this.rules[65].opcodes[2]={type:4,index:67},this.rules[65].opcodes[3]={type:4,index:68},this.rules[66].opcodes=[],this.rules[66].opcodes[0]={type:6,string:[60]},this.rules[67].opcodes=[],this.rules[67].opcodes[0]={type:3,min:0,max:1/0},this.rules[67].opcodes[1]={type:1,children:[2,3,4]},this.rules[67].opcodes[2]={type:5,min:32,max:61},this.rules[67].opcodes[3]={type:5,min:63,max:126},this.rules[67].opcodes[4]={type:4,index:60},this.rules[68].opcodes=[],this.rules[68].opcodes[0]={type:6,string:[62]},this.rules[69].opcodes=[],this.rules[69].opcodes[0]={type:4,index:72},this.rules[70].opcodes=[],this.rules[70].opcodes[0]={type:4,index:72},this.rules[71].opcodes=[],this.rules[71].opcodes[0]={type:4,index:72},this.rules[72].opcodes=[],this.rules[72].opcodes[0]={type:3,min:1,max:1/0},this.rules[72].opcodes[1]={type:5,min:48,max:57},this.rules[73].opcodes=[],this.rules[73].opcodes[0]={type:4,index:85},this.rules[74].opcodes=[],this.rules[74].opcodes[0]={type:4,index:87},this.rules[75].opcodes=[],this.rules[75].opcodes[0]={type:4,index:86},this.rules[76].opcodes=[],this.rules[76].opcodes[0]={type:1,children:[1,2]},this.rules[76].opcodes[1]={type:6,string:[68]},this.rules[76].opcodes[2]={type:6,string:[100]},this.rules[77].opcodes=[],this.rules[77].opcodes[0]={type:1,children:[1,2]},this.rules[77].opcodes[1]={type:6,string:[88]},this.rules[77].opcodes[2]={type:6,string:[120]},this.rules[78].opcodes=[],this.rules[78].opcodes[0]={type:1,children:[1,2]},this.rules[78].opcodes[1]={type:6,string:[66]},this.rules[78].opcodes[2]={type:6,string:[98]},this.rules[79].opcodes=[],this.rules[79].opcodes[0]={type:4,index:85},this.rules[80].opcodes=[],this.rules[80].opcodes[0]={type:4,index:85},this.rules[81].opcodes=[],this.rules[81].opcodes[0]={type:4,index:86},this.rules[82].opcodes=[],this.rules[82].opcodes[0]={type:4,index:86},this.rules[83].opcodes=[],this.rules[83].opcodes[0]={type:4,index:87},this.rules[84].opcodes=[],this.rules[84].opcodes[0]={type:4,index:87},this.rules[85].opcodes=[],this.rules[85].opcodes[0]={type:3,min:1,max:1/0},this.rules[85].opcodes[1]={type:5,min:48,max:57},this.rules[86].opcodes=[],this.rules[86].opcodes[0]={type:3,min:1,max:1/0},this.rules[86].opcodes[1]={type:5,min:48,max:49},this.rules[87].opcodes=[],this.rules[87].opcodes[0]={type:3,min:1,max:1/0},this.rules[87].opcodes[1]={type:1,children:[2,3,4]},this.rules[87].opcodes[2]={type:5,min:48,max:57},this.rules[87].opcodes[3]={type:5,min:65,max:70},this.rules[87].opcodes[4]={type:5,min:97,max:102},this.rules[88].opcodes=[],this.rules[88].opcodes[0]={type:2,children:[1,4]},this.rules[88].opcodes[1]={type:1,children:[2,3]},this.rules[88].opcodes[2]={type:5,min:97,max:122},this.rules[88].opcodes[3]={type:5,min:65,max:90},this.rules[88].opcodes[4]={type:3,min:0,max:1/0},this.rules[88].opcodes[5]={type:1,children:[6,7,8,9]},this.rules[88].opcodes[6]={type:5,min:97,max:122},this.rules[88].opcodes[7]={type:5,min:65,max:90},this.rules[88].opcodes[8]={type:5,min:48,max:57},this.rules[88].opcodes[9]={type:6,string:[45]},this.rules[89].opcodes=[],this.rules[89].opcodes[0]={type:3,min:0,max:1/0},this.rules[89].opcodes[1]={type:4,index:91},this.rules[90].opcodes=[],this.rules[90].opcodes[0]={type:3,min:1,max:1/0},this.rules[90].opcodes[1]={type:4,index:91},this.rules[91].opcodes=[],this.rules[91].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[91].opcodes[1]={type:6,string:[32]},this.rules[91].opcodes[2]={type:6,string:[9]},this.rules[91].opcodes[3]={type:4,index:92},this.rules[91].opcodes[4]={type:4,index:94},this.rules[92].opcodes=[],this.rules[92].opcodes[0]={type:2,children:[1,2]},this.rules[92].opcodes[1]={type:6,string:[59]},this.rules[92].opcodes[2]={type:3,min:0,max:1/0},this.rules[92].opcodes[3]={type:1,children:[4,5]},this.rules[92].opcodes[4]={type:5,min:32,max:126},this.rules[92].opcodes[5]={type:6,string:[9]},this.rules[93].opcodes=[],this.rules[93].opcodes[0]={type:1,children:[1,2,3]},this.rules[93].opcodes[1]={type:6,string:[13,10]},this.rules[93].opcodes[2]={type:6,string:[10]},this.rules[93].opcodes[3]={type:6,string:[13]},this.rules[94].opcodes=[],this.rules[94].opcodes[0]={type:2,children:[1,5]},this.rules[94].opcodes[1]={type:1,children:[2,3,4]},this.rules[94].opcodes[2]={type:6,string:[13,10]},this.rules[94].opcodes[3]={type:6,string:[10]},this.rules[94].opcodes[4]={type:6,string:[13]},this.rules[94].opcodes[5]={type:1,children:[6,7]},this.rules[94].opcodes[6]={type:6,string:[32]},this.rules[94].opcodes[7]={type:6,string:[9]},this.toString=function(){let t="";return t+=`;
`,t+=`; ABNF for JavaScript APG 2.0 SABNF
`,t+=`; RFC 5234 with some restrictions and additions.
`,t+=`; Updated 11/24/2015 for RFC 7405 case-sensitive literal string notation
`,t+=`;  - accepts %s"string" as a case-sensitive string
`,t+=`;  - accepts %i"string" as a case-insensitive string
`,t+=`;  - accepts "string" as a case-insensitive string
`,t+=`;
`,t+=`; Some restrictions:
`,t+=`;   1. Rules must begin at first character of each line.
`,t+=`;      Indentations on first rule and rules thereafter are not allowed.
`,t+=`;   2. Relaxed line endings. CRLF, LF or CR are accepted as valid line ending.
`,t+=`;   3. Prose values, i.e. <prose value>, are accepted as valid grammar syntax.
`,t+=`;      However, a working parser cannot be generated from them.
`,t+=`;
`,t+=`; Super set (SABNF) additions:
`,t+=`;   1. Look-ahead (syntactic predicate) operators are accepted as element prefixes.
`,t+=`;      & is the positive look-ahead operator, succeeds and backtracks if the look-ahead phrase is found
`,t+=`;      ! is the negative look-ahead operator, succeeds and backtracks if the look-ahead phrase is NOT found
`,t+=`;      e.g. &%d13 or &rule or !(A / B)
`,t+=`;   2. User-Defined Terminals (UDT) of the form, u_name and e_name are accepted.
`,t+=`;      'name' is alpha followed by alpha/num/hyphen just like a rule name.
`,t+=`;      u_name may be used as an element but no rule definition is given.
`,t+=`;      e.g. rule = A / u_myUdt
`,t+=`;           A = "a"
`,t+=`;      would be a valid grammar.
`,t+=`;   3. Case-sensitive, single-quoted strings are accepted.
`,t+=`;      e.g. 'abc' would be equivalent to %d97.98.99
`,t+=`;      (kept for backward compatibility, but superseded by %s"abc")  
`,t+=`; New 12/26/2015
`,t+=`;   4. Look-behind operators are accepted as element prefixes.
`,t+=`;      && is the positive look-behind operator, succeeds and backtracks if the look-behind phrase is found
`,t+=`;      !! is the negative look-behind operator, succeeds and backtracks if the look-behind phrase is NOT found
`,t+=`;      e.g. &&%d13 or &&rule or !!(A / B)
`,t+=`;   5. Back reference operators, i.e. \\rulename, are accepted.
`,t+=`;      A back reference operator acts like a TLS or TBS terminal except that the phrase it attempts
`,t+=`;      to match is a phrase previously matched by the rule 'rulename'.
`,t+=`;      There are two modes of previous phrase matching - the parent-frame mode and the universal mode.
`,t+=`;      In universal mode, \\rulename matches the last match to 'rulename' regardless of where it was found.
`,t+=`;      In parent-frame mode, \\rulename matches only the last match found on the parent's frame or parse tree level.
`,t+=`;      Back reference modifiers can be used to specify case and mode.
`,t+=`;      \\A defaults to case-insensitive and universal mode, e.g. \\A === \\%i%uA
`,t+=`;      Modifiers %i and %s determine case-insensitive and case-sensitive mode, respectively.
`,t+=`;      Modifiers %u and %p determine universal mode and parent frame mode, respectively.
`,t+=`;      Case and mode modifiers can appear in any order, e.g. \\%s%pA === \\%p%sA. 
`,t+=`;   7. String begin anchor, ABG(%^) matches the beginning of the input string location.
`,t+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,t+=`;   8. String end anchor, AEN(%$) matches the end of the input string location.
`,t+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,t+=`;
`,t+=`File            = *(BlankLine / Rule / RuleError)
`,t+=`BlankLine       = *(%d32/%d9) [comment] LineEnd
`,t+=`Rule            = RuleLookup owsp Alternation ((owsp LineEnd)
`,t+=`                / (LineEndError LineEnd))
`,t+=`RuleLookup      = RuleNameTest owsp DefinedAsTest
`,t+=`RuleNameTest    = RuleName/RuleNameError
`,t+=`RuleName        = alphanum
`,t+=`RuleNameError   = 1*(%d33-60/%d62-126)
`,t+=`DefinedAsTest   = DefinedAs / DefinedAsError
`,t+=`DefinedAsError  = 1*2%d33-126
`,t+=`DefinedAs       = IncAlt / Defined
`,t+=`Defined         = %d61
`,t+=`IncAlt          = %d61.47
`,t+=`RuleError       = 1*(%d32-126 / %d9  / LineContinue) LineEnd
`,t+=`LineEndError    = 1*(%d32-126 / %d9  / LineContinue)
`,t+=`Alternation     = Concatenation *(owsp AltOp Concatenation)
`,t+=`Concatenation   = Repetition *(CatOp Repetition)
`,t+=`Repetition      = [Modifier] (Group / Option / BasicElement / BasicElementErr)
`,t+=`Modifier        = (Predicate [RepOp])
`,t+=`                / RepOp
`,t+=`Predicate       = BkaOp
`,t+=`                / BknOp
`,t+=`                / AndOp
`,t+=`                / NotOp
`,t+=`BasicElement    = UdtOp
`,t+=`                / RnmOp
`,t+=`                / TrgOp
`,t+=`                / TbsOp
`,t+=`                / TlsOp
`,t+=`                / ClsOp
`,t+=`                / BkrOp
`,t+=`                / AbgOp
`,t+=`                / AenOp
`,t+=`                / ProsVal
`,t+=`BasicElementErr = 1*(%d33-40/%d42-46/%d48-92/%d94-126)
`,t+=`Group           = GroupOpen  Alternation (GroupClose / GroupError)
`,t+=`GroupError      = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,t+=`GroupOpen       = %d40 owsp
`,t+=`GroupClose      = owsp %d41
`,t+=`Option          = OptionOpen Alternation (OptionClose / OptionError)
`,t+=`OptionError     = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,t+=`OptionOpen      = %d91 owsp
`,t+=`OptionClose     = owsp %d93
`,t+=`RnmOp           = alphanum
`,t+=`BkrOp           = %d92 [bkrModifier] bkr-name
`,t+=`bkrModifier     = (cs [um / pm]) / (ci [um / pm]) / (um [cs /ci]) / (pm [cs / ci])
`,t+=`cs              = '%s'
`,t+=`ci              = '%i'
`,t+=`um              = '%u'
`,t+=`pm              = '%p'
`,t+=`bkr-name        = uname / ename / rname
`,t+=`rname           = alphanum
`,t+=`uname           = %d117.95 alphanum
`,t+=`ename           = %d101.95 alphanum
`,t+=`UdtOp           = udt-empty
`,t+=`                / udt-non-empty
`,t+=`udt-non-empty   = %d117.95 alphanum
`,t+=`udt-empty       = %d101.95 alphanum
`,t+=`RepOp           = (rep-min StarOp rep-max)
`,t+=`                / (rep-min StarOp)
`,t+=`                / (StarOp rep-max)
`,t+=`                / StarOp
`,t+=`                / rep-min-max
`,t+=`AltOp           = %d47 owsp
`,t+=`CatOp           = wsp
`,t+=`StarOp          = %d42
`,t+=`AndOp           = %d38
`,t+=`NotOp           = %d33
`,t+=`BkaOp           = %d38.38
`,t+=`BknOp           = %d33.33
`,t+=`AbgOp           = %d37.94
`,t+=`AenOp           = %d37.36
`,t+=`TrgOp           = %d37 ((Dec dmin %d45 dmax) / (Hex xmin %d45 xmax) / (Bin bmin %d45 bmax))
`,t+=`TbsOp           = %d37 ((Dec dString *(%d46 dString)) / (Hex xString *(%d46 xString)) / (Bin bString *(%d46 bString)))
`,t+=`TlsOp           = TlsCase TlsOpen TlsString TlsClose
`,t+=`TlsCase         = ["%i" / "%s"]
`,t+=`TlsOpen         = %d34
`,t+=`TlsClose        = %d34
`,t+=`TlsString       = *(%d32-33/%d35-126/StringTab)
`,t+=`StringTab       = %d9
`,t+=`ClsOp           = ClsOpen ClsString ClsClose
`,t+=`ClsOpen         = %d39
`,t+=`ClsClose        = %d39
`,t+=`ClsString       = *(%d32-38/%d40-126/StringTab)
`,t+=`ProsVal         = ProsValOpen ProsValString ProsValClose
`,t+=`ProsValOpen     = %d60
`,t+=`ProsValString   = *(%d32-61/%d63-126/StringTab)
`,t+=`ProsValClose    = %d62
`,t+=`rep-min         = rep-num
`,t+=`rep-min-max     = rep-num
`,t+=`rep-max         = rep-num
`,t+=`rep-num         = 1*(%d48-57)
`,t+=`dString         = dnum
`,t+=`xString         = xnum
`,t+=`bString         = bnum
`,t+=`Dec             = (%d68/%d100)
`,t+=`Hex             = (%d88/%d120)
`,t+=`Bin             = (%d66/%d98)
`,t+=`dmin            = dnum
`,t+=`dmax            = dnum
`,t+=`bmin            = bnum
`,t+=`bmax            = bnum
`,t+=`xmin            = xnum
`,t+=`xmax            = xnum
`,t+=`dnum            = 1*(%d48-57)
`,t+=`bnum            = 1*%d48-49
`,t+=`xnum            = 1*(%d48-57 / %d65-70 / %d97-102)
`,t+=`;
`,t+=`; Basics
`,t+=`alphanum        = (%d97-122/%d65-90) *(%d97-122/%d65-90/%d48-57/%d45)
`,t+=`owsp            = *space
`,t+=`wsp             = 1*space
`,t+=`space           = %d32
`,t+=`                / %d9
`,t+=`                / comment
`,t+=`                / LineContinue
`,t+=`comment         = %d59 *(%d32-126 / %d9)
`,t+=`LineEnd         = %d13.10
`,t+=`                / %d10
`,t+=`                / %d13
`,t+=`LineContinue    = (%d13.10 / %d10 / %d13) (%d32 / %d9)
`,t}}});var tc=ke((fd,ec)=>{ec.exports=function(){let e="parser: ",t=Rr(),n=t.ids,s=new(Wa()),i=new(Ja()),o=new(Qa()),a=new t.parser;a.ast=new t.ast,a.callbacks=s.callbacks,a.ast.callbacks=i.callbacks;let c=function(m,T,y){if(T<0||T>=y)return-1;for(let d=0;d<m.length;d+=1)if(T>=m[d].beginChar&&T<m[d].beginChar+m[d].length)return d;return-1},l=function(m,T){let y=-1;if(T<m.length){for(let d=T;d<m.length;d+=1)if(m[d]!==null){y=m[d];break}}return y},h=function(m){m.forEach(T=>{let y=[],d=[],A=0;T.opcodes.forEach(p=>{p.type===n.ALT&&p.children.length===1||p.type===n.CAT&&p.children.length===1||p.type===n.REP&&p.min===1&&p.max===1?d.push(null):(d.push(A),y.push(p),A+=1)}),d.push(A),y.forEach(p=>{if(p.type===n.ALT||p.type===n.CAT)for(let b=0;b<p.children.length;b+=1)p.children[b]=l(d,p.children[b])}),T.opcodes=y})};this.syntax=function(m,T,y,d,A){if(A){if(A.traceObject!=="traceObject")throw new TypeError(`${e}trace argument is not a trace object`);a.trace=A}let p={};p.errors=y,p.strict=!!d,p.lines=T,p.findLine=c,p.charsLength=m.length,p.ruleCount=0,a.parse(o,"file",m,p).success||y.push({line:0,char:0,msg:"syntax analysis of input grammar failed"})},this.semantic=function(m,T,y){let d={};return d.errors=y,d.lines=T,d.findLine=c,d.charsLength=m.length,a.ast.translate(d),y.length?null:(h(d.rules),{rules:d.rules,udts:d.udts,lineMap:d.rulesLineMap})},this.generateSource=function(m,T,y,d,A){let p="",b,N,$,q=0,w=1/0,L=0,ee=[],xe=[],P=0,O=0,B=0,v=0,G=0,z=0,j=0,re=0,le=0,de=0,Q=0,se=0,K=0,C=0,me=0;y.forEach(Ee=>{ee.push(Ee.lower),q+=Ee.opcodes.length,Ee.opcodes.forEach(S=>{switch(S.type){case n.ALT:P+=1;break;case n.CAT:O+=1;break;case n.RNM:B+=1;break;case n.UDT:v+=1;break;case n.REP:G+=1;break;case n.AND:z+=1;break;case n.NOT:j+=1;break;case n.BKA:se+=1;break;case n.BKN:K+=1;break;case n.BKR:Q+=1;break;case n.ABG:C+=1;break;case n.AEN:me+=1;break;case n.TLS:for(re+=1,b=0;b<S.string.length;b+=1)S.string[b]<w&&(w=S.string[b]),S.string[b]>L&&(L=S.string[b]);break;case n.TBS:for(le+=1,b=0;b<S.string.length;b+=1)S.string[b]<w&&(w=S.string[b]),S.string[b]>L&&(L=S.string[b]);break;case n.TRG:de+=1,S.min<w&&(w=S.min),S.max>L&&(L=S.max);break;default:throw new Error("generateSource: unrecognized opcode")}})}),ee.sort(),d.length>0&&(d.forEach(Ee=>{xe.push(Ee.lower)}),xe.sort());let Pe="module.exports";A&&typeof A=="string"&&(Pe=`let ${A}`),p+=`// copyright: Copyright (c) 2023 Lowell D. Thomas, all rights reserved<br>
`,p+=`//   license: BSD-2-Clause (https://opensource.org/licenses/BSD-2-Clause)<br>
`,p+=`//
`,p+=`// Generated by apg-js, Version 4.2.1 [apg-js](https://github.com/ldthomas/apg-js)
`,p+=`${Pe} = function grammar(){
`,p+="  // ```\n",p+=`  // SUMMARY
`,p+=`  //      rules = ${y.length}
`,p+=`  //       udts = ${d.length}
`,p+=`  //    opcodes = ${q}
`,p+=`  //        ---   ABNF original opcodes
`,p+=`  //        ALT = ${P}
`,p+=`  //        CAT = ${O}
`,p+=`  //        REP = ${G}
`,p+=`  //        RNM = ${B}
`,p+=`  //        TLS = ${re}
`,p+=`  //        TBS = ${le}
`,p+=`  //        TRG = ${de}
`,p+=`  //        ---   SABNF superset opcodes
`,p+=`  //        UDT = ${v}
`,p+=`  //        AND = ${z}
`,p+=`  //        NOT = ${j}
`,p+=`  //        BKA = ${se}
`,p+=`  //        BKN = ${K}
`,p+=`  //        BKR = ${Q}
`,p+=`  //        ABG = ${C}
`,p+=`  //        AEN = ${me}
`,p+="  // characters = [",re+le+de===0?p+=" none defined ]":p+=`${w} - ${L}]`,v>0&&(p+=" + user defined"),p+=`
`,p+="  // ```\n",p+=`  /* OBJECT IDENTIFIER (for internal parser use) */
`,p+=`  this.grammarObject = 'grammarObject';
`,p+=`
`,p+=`  /* RULES */
`,p+=`  this.rules = [];
`,y.forEach((Ee,S)=>{let E="  this.rules[";E+=S,E+="] = {name: '",E+=Ee.name,E+="', lower: '",E+=Ee.lower,E+="', index: ",E+=Ee.index,E+=", isBkr: ",E+=Ee.isBkr,E+=`};
`,p+=E}),p+=`
`,p+=`  /* UDTS */
`,p+=`  this.udts = [];
`,d.length>0&&d.forEach((Ee,S)=>{let E="  this.udts[";E+=S,E+="] = {name: '",E+=Ee.name,E+="', lower: '",E+=Ee.lower,E+="', index: ",E+=Ee.index,E+=", empty: ",E+=Ee.empty,E+=", isBkr: ",E+=Ee.isBkr,E+=`};
`,p+=E}),p+=`
`,p+=`  /* OPCODES */
`,y.forEach((Ee,S)=>{S>0&&(p+=`
`),p+=`  /* ${Ee.name} */
`,p+=`  this.rules[${S}].opcodes = [];
`,Ee.opcodes.forEach((E,M)=>{let X;switch(E.type){case n.ALT:p+=`  this.rules[${S}].opcodes[${M}] = {type: ${E.type}, children: [${E.children.toString()}]};// ALT
`;break;case n.CAT:p+=`  this.rules[${S}].opcodes[${M}] = {type: ${E.type}, children: [${E.children.toString()}]};// CAT
`;break;case n.RNM:p+=`  this.rules[${S}].opcodes[${M}] = {type: ${E.type}, index: ${E.index}};// RNM(${y[E.index].name})
`;break;case n.BKR:E.index>=y.length?(N=d[E.index-y.length].name,$=d[E.index-y.length].lower):(N=y[E.index].name,$=y[E.index].lower),X="%i",E.bkrCase===n.BKR_MODE_CS&&(X="%s"),E.bkrMode===n.BKR_MODE_UM?X+="%u":X+="%p",N=X+N,p+=`  this.rules[${S}].opcodes[${M}] = {type: ${E.type}, index: ${E.index}, lower: '${$}', bkrCase: ${E.bkrCase}, bkrMode: ${E.bkrMode}};// BKR(\\${N})
`;break;case n.UDT:p+=`  this.rules[${S}].opcodes[${M}] = {type: ${E.type}, empty: ${E.empty}, index: ${E.index}};// UDT(${d[E.index].name})
`;break;case n.REP:p+=`  this.rules[${S}].opcodes[${M}] = {type: ${E.type}, min: ${E.min}, max: ${E.max}};// REP
`;break;case n.AND:p+=`  this.rules[${S}].opcodes[${M}] = {type: ${E.type}};// AND
`;break;case n.NOT:p+=`  this.rules[${S}].opcodes[${M}] = {type: ${E.type}};// NOT
`;break;case n.ABG:p+=`  this.rules[${S}].opcodes[${M}] = {type: ${E.type}};// ABG(%^)
`;break;case n.AEN:p+=`  this.rules[${S}].opcodes[${M}] = {type: ${E.type}};// AEN(%$)
`;break;case n.BKA:p+=`  this.rules[${S}].opcodes[${M}] = {type: ${E.type}};// BKA
`;break;case n.BKN:p+=`  this.rules[${S}].opcodes[${M}] = {type: ${E.type}};// BKN
`;break;case n.TLS:p+=`  this.rules[${S}].opcodes[${M}] = {type: ${E.type}, string: [${E.string.toString()}]};// TLS
`;break;case n.TBS:p+=`  this.rules[${S}].opcodes[${M}] = {type: ${E.type}, string: [${E.string.toString()}]};// TBS
`;break;case n.TRG:p+=`  this.rules[${S}].opcodes[${M}] = {type: ${E.type}, min: ${E.min}, max: ${E.max}};// TRG
`;break;default:throw new Error("parser.js: ~143: unrecognized opcode")}})}),p+=`
`,p+="  // The `toString()` function will display the original grammar file(s) that produced these opcodes.\n",p+=`  this.toString = function toString(){
`,p+=`    let str = "";
`;let Se;return T.forEach(Ee=>{let S=Ee.beginChar+Ee.length;Se="",p+='    str += "';for(let E=Ee.beginChar;E<S;E+=1){switch(m[E]){case 9:Se=" ";break;case 10:Se="\\n";break;case 13:Se="\\r";break;case 34:Se='\\"';break;case 92:Se="\\\\";break;default:Se=String.fromCharCode(m[E]);break}p+=Se}p+=`";
`}),p+=`    return str;
`,p+=`  }
`,p+=`}
`,p},this.generateObject=function(m,T,y){let d={},A=[],p=[],b=m.slice(0);return d.grammarObject="grammarObject",T.forEach(N=>{A.push(N.lower)}),A.sort(),y.length>0&&(y.forEach(N=>{p.push(N.lower)}),p.sort()),d.callbacks=[],A.forEach(N=>{d.callbacks[N]=!1}),y.length>0&&p.forEach(N=>{d.callbacks[N]=!1}),d.rules=T,d.udts=y,d.toString=function(){return b},d}}});var nc=ke((pd,rc)=>{rc.exports=function(){let e=St(),t="rule-attributes.js",n=null;function s(P){return P.left||P.nested||P.right||P.cyclic?!1:P.empty}function i(P){return!!(P.left||P.nested||P.right||P.cyclic)}function o(P,O){let B=0,v=0,G=0;for(B=0;B<O;B+=1)if(P[B].nested)return!0;for(B=0;B<O;B+=1)if(P[B].right&&!P[B].leaf){for(v=B+1;v<O;v+=1)if(!s(P[v]))return!0}for(B=O-1;B>=0;B-=1)if(P[B].left&&!P[B].leaf){for(v=B-1;v>=0;v-=1)if(!s(P[v]))return!0}for(B=0;B<O;B+=1)if(!P[B].empty&&!i(P[B])){for(v=B+1;v<O;v+=1)if(i(P[v])){for(G=v+1;G<O;G+=1)if(!P[G].empty&&!i(P[G]))return!0}}return!1}function a(P,O){for(let B=0;B<O;B+=1)if(!P[B].cyclic)return!1;return!0}function c(P,O){for(let B=0;B<O;B+=1){if(P[B].left)return!0;if(!P[B].empty)return!1}return!1}function l(P,O){for(let B=O-1;B>=0;B-=1){if(P[B].right)return!0;if(!P[B].empty)return!1}return!1}function h(P,O){for(let B=0;B<O;B+=1)if(!P[B].empty)return!1;return!0}function u(P,O){for(let B=0;B<O;B+=1)if(!P[B].finite)return!1;return!0}function m(P,O,B,v){let G=0,z=O[B],j=z.children.length,re=[];for(G=0;G<j;G+=1)re.push(P.attrGen());for(G=0;G<j;G+=1)d(P,O,z.children[G],re[G]);v.left=c(re,j),v.right=l(re,j),v.nested=o(re,j),v.empty=h(re,j),v.finite=u(re,j),v.cyclic=a(re,j)}function T(P,O,B,v){let G=0,z=O[B],j=z.children.length,re=[];for(G=0;G<j;G+=1)re.push(P.attrGen());for(G=0;G<j;G+=1)d(P,O,z.children[G],re[G]);for(v.left=!1,v.right=!1,v.nested=!1,v.empty=!1,v.finite=!1,v.cyclic=!1,G=0;G<j;G+=1)re[G].left&&(v.left=!0),re[G].nested&&(v.nested=!0),re[G].right&&(v.right=!0),re[G].empty&&(v.empty=!0),re[G].finite&&(v.finite=!0),re[G].cyclic&&(v.cyclic=!0)}function y(P,O,B,v){let G=O[B];G.index>=P.ruleCount?(v.empty=P.udts[G.index-P.ruleCount].empty,v.finite=!0):(A(P,G.index,v),v.left=!1,v.nested=!1,v.right=!1,v.cyclic=!1)}function d(P,O,B,v){P.attrInit(v);let G=O[B];switch(G.type){case e.ALT:T(P,O,B,v);break;case e.CAT:m(P,O,B,v);break;case e.REP:d(P,O,B+1,v),G.min===0&&(v.empty=!0,v.finite=!0);break;case e.RNM:A(P,O[B].index,v);break;case e.BKR:y(P,O,B,v);break;case e.AND:case e.NOT:case e.BKA:case e.BKN:d(P,O,B+1,v),v.empty=!0;break;case e.TLS:v.empty=!O[B].string.length,v.finite=!0,v.cyclic=!1;break;case e.TBS:case e.TRG:v.empty=!1,v.finite=!0,v.cyclic=!1;break;case e.UDT:v.empty=G.empty,v.finite=!0,v.cyclic=!1;break;case e.ABG:case e.AEN:v.empty=!0,v.finite=!0,v.cyclic=!1;break;default:throw new Error(`unknown opcode type: ${G}`)}}function A(P,O,B){let v=P.attrsWorking[O];v.isComplete?P.attrCopy(B,v):v.isOpen?O===P.startRule?O===P.startRule&&(B.left=!0,B.right=!0,B.cyclic=!0,B.leaf=!0):B.finite=!0:(v.isOpen=!0,d(P,v.rule.opcodes,0,B),v.left=B.left,v.right=B.right,v.nested=B.nested,v.empty=B.empty,v.finite=B.finite,v.cyclic=B.cyclic,v.leaf=!1,v.isOpen=!1,v.isComplete=!0)}let p=P=>{n=P;let O=0,B=0,v=n.attrGen();for(O=0;O<n.ruleCount;O+=1){for(B=0;B<n.ruleCount;B+=1)n.attrInit(n.attrsWorking[B]);n.startRule=O,A(n,O,v),n.attrCopy(n.attrs[O],n.attrsWorking[O])}n.attributesComplete=!0;let G=null;for(O=0;O<n.ruleCount;O+=1)if(G=n.attrs[O],G.left||!G.finite||G.cyclic){let z=n.attrGen(G.rule);n.attrCopy(z,G),n.attrsErrors.push(z),n.attrsErrorCount+=1}},b=P=>P?"t":"f",N=P=>P?"e":"f",$=P=>P?"t":"e",q=(P,O,B,v)=>{let G=`${P}:${O}:`;return G+=`${N(B.left)} `,G+=`${b(B.nested)} `,G+=`${b(B.right)} `,G+=`${N(B.cyclic)} `,G+=`${$(B.finite)} `,G+=`${b(B.empty)}:`,G+=`${n.typeToString(v.recursiveType)}:`,G+=v.recursiveType===e.ATTR_MR?v.groupNumber:"-",G+=`:${B.rule.name}
`,G},w=()=>{let P=`LEGEND - t=true, f=false, e=error
`;return P+=`sequence:rule index:left nested right cyclic finite empty:type:group number:rule name
`,P},L=()=>{let P=null,O=null,B="";if(B+=`RULE ATTRIBUTES WITH ERRORS
`,B+=w(),n.attrsErrorCount)for(let v=0;v<n.attrsErrorCount;v+=1)P=n.attrsErrors[v],O=n.ruleDeps[P.rule.index],B+=q(v,P.rule.index,P,O);else B+=`<none>
`;return B},ee=P=>{let O=0,B=0,v=null,G=null,z="",{ruleIndexes:j}=n;for(P===97?j=n.ruleAlphaIndexes:P===116&&(j=n.ruleTypeIndexes),O=0;O<n.ruleCount;O+=1)B=j[O],v=n.attrs[B],G=n.ruleDeps[B],z+=q(O,B,v,G);return z};return{ruleAttributes:p,showAttributes:(P="index")=>{if(!n.attributesComplete)throw new Error(`${t}:showAttributes: attributes not available`);let O="",B=`RULE ATTRIBUTES
`;return P.charCodeAt(0)===97?(O+=`alphabetical by rule name
`,O+=B,O+=w(),O+=ee(97)):P.charCodeAt(0)===116?(O+=`ordered by rule type
`,O+=B,O+=w(),O+=ee(116)):(O+=`ordered by rule index
`,O+=B,O+=w(),O+=ee()),O},showAttributeErrors:L}}()});var ic=ke((dd,sc)=>{sc.exports=(()=>{let r=St(),e=null,t=(o,a,c,l)=>{let h=0,u=0,m=a[c];l[c]=!0;let T=m.rule.opcodes;for(h=0;h<T.length;h+=1){let y=T[h];if(y.type===r.RNM)for(m.refersTo[y.index]=!0,l[y.index]||t(o,a,y.index,l),u=0;u<o;u+=1)a[y.index].refersTo[u]&&(m.refersTo[u]=!0);else y.type===r.UDT?m.refersToUdt[y.index]=!0:y.type===r.BKR&&(y.index<o?(m.refersTo[y.index]=!0,l[y.index]||t(o,a,y.index,l)):m.refersToUdt[o-y.index]=!0)}},n=o=>{e=o;let a=0,c=0,l=0,h=null,u=null,m=!1;e.dependenciesComplete=!1;let T=e.falseArray(e.ruleCount);for(a=0;a<e.ruleCount;a+=1)e.falsifyArray(T),t(e.ruleCount,e.ruleDeps,a,T);for(a=0;a<e.ruleCount;a+=1)for(c=0;c<e.ruleCount;c+=1)a!==c&&e.ruleDeps[c].refersTo[a]&&(e.ruleDeps[a].referencedBy[c]=!0);for(a=0;a<e.ruleCount;a+=1)e.ruleDeps[a].recursiveType=r.ATTR_N,e.ruleDeps[a].refersTo[a]&&(e.ruleDeps[a].recursiveType=r.ATTR_R);for(l=-1,a=0;a<e.ruleCount;a+=1)if(h=e.ruleDeps[a],h.recursiveType===r.ATTR_R)for(m=!0,c=0;c<e.ruleCount;c+=1)a!==c&&(u=e.ruleDeps[c],u.recursiveType===r.ATTR_R&&h.refersTo[c]&&u.refersTo[a]&&(m&&(l+=1,h.recursiveType=r.ATTR_MR,h.groupNumber=l,m=!1),u.recursiveType=r.ATTR_MR,u.groupNumber=l));e.isMutuallyRecursive=l>-1,e.ruleAlphaIndexes.sort(e.compRulesAlpha),e.ruleTypeIndexes.sort(e.compRulesAlpha),e.ruleTypeIndexes.sort(e.compRulesType),e.isMutuallyRecursive&&e.ruleTypeIndexes.sort(e.compRulesGroup),e.udtCount&&e.udtAlphaIndexes.sort(e.compUdtsAlpha),e.dependenciesComplete=!0},s=(o=null)=>{let a=0,c=0,l=0,h=0,u=e.ruleCount-1,m=e.udtCount-1,T=100,y="",d="",A="=> ",p="<= ",b=!1,N=null,{ruleIndexes:$}=e,{udtIndexes:q}=e;for(o===97?($=e.ruleAlphaIndexes,q=e.udtAlphaIndexes):o===116&&($=e.ruleTypeIndexes,q=e.udtAlphaIndexes),a=0;a<e.ruleCount;a+=1){for(N=e.ruleDeps[$[a]],d=`${$[a]}:${e.typeToString(N.recursiveType)}:`,e.isMutuallyRecursive&&(d+=N.groupNumber>-1?N.groupNumber:"-",d+=":"),d+=" ",y+=`${d+e.rules[$[a]].name}
`,b=!0,l=0,h=y.length,y+=d,c=0;c<e.ruleCount;c+=1)N.refersTo[$[c]]&&(b?(y+=A,b=!1,y+=e.ruleDeps[$[c]].rule.name):y+=`, ${e.ruleDeps[$[c]].rule.name}`,l+=1),y.length-h>T&&c!==u&&(y+=`
${d}${A}`,h=y.length);if(e.udtCount)for(c=0;c<e.udtCount;c+=1)N.refersToUdt[q[c]]&&(b?(y+=A,b=!1,y+=e.udts[q[c]].name):y+=`, ${e.udts[q[c]].name}`,l+=1),y.length-h>T&&c!==m&&(y+=`
${d}${A}`,h=y.length);for(l===0&&(y+=`=> <none>
`),b===!1&&(y+=`
`),b=!0,l=0,h=y.length,y+=d,c=0;c<e.ruleCount;c+=1)N.referencedBy[$[c]]&&(b?(y+=p,b=!1,y+=e.ruleDeps[$[c]].rule.name):y+=`, ${e.ruleDeps[$[c]].rule.name}`,l+=1),y.length-h>T&&c!==u&&(y+=`
${d}${A}`,h=y.length);l===0&&(y+=`<= <none>
`),b===!1&&(y+=`
`),y+=`
`}return y};return{ruleDependencies:n,showRuleDependencies:(o="index")=>{let a=`RULE DEPENDENCIES(index:type:[group number:])
`;return a+=`=> refers to rule names
`,a+=`<= referenced by rule names
`,e.dependenciesComplete&&(o.charCodeAt(0)===97?(a+=`alphabetical by rule name
`,a+=s(97)):o.charCodeAt(0)===116?(a+=`ordered by rule type
`,a+=s(116)):(a+=`ordered by rule index
`,a+=s(null))),a}}})()});var ac=ke((md,oc)=>{oc.exports=function(){let e=St(),{ruleAttributes:t,showAttributes:n,showAttributeErrors:s}=nc(),{ruleDependencies:i,showRuleDependencies:o}=ic();class a{constructor(h,u){this.rules=h,this.udts=u,this.ruleCount=h.length,this.udtCount=u.length,this.startRule=0,this.dependenciesComplete=!1,this.attributesComplete=!1,this.isMutuallyRecursive=!1,this.ruleIndexes=this.indexArray(this.ruleCount),this.ruleAlphaIndexes=this.indexArray(this.ruleCount),this.ruleTypeIndexes=this.indexArray(this.ruleCount),this.udtIndexes=this.indexArray(this.udtCount),this.udtAlphaIndexes=this.indexArray(this.udtCount),this.attrsErrorCount=0,this.attrs=[],this.attrsErrors=[],this.attrsWorking=[],this.ruleDeps=[];for(let m=0;m<this.ruleCount;m+=1)this.attrs.push(this.attrGen(this.rules[m])),this.attrsWorking.push(this.attrGen(this.rules[m])),this.ruleDeps.push(this.rdGen(h[m],this.ruleCount,this.udtCount));this.compRulesAlpha=this.compRulesAlpha.bind(this),this.compUdtsAlpha=this.compUdtsAlpha.bind(this),this.compRulesType=this.compRulesType.bind(this),this.compRulesGroup=this.compRulesGroup.bind(this)}attrGen(h){return{left:!1,nested:!1,right:!1,empty:!1,finite:!1,cyclic:!1,leaf:!1,isOpen:!1,isComplete:!1,rule:h}}attrInit(h){h.left=!1,h.nested=!1,h.right=!1,h.empty=!1,h.finite=!1,h.cyclic=!1,h.leaf=!1,h.isOpen=!1,h.isComplete=!1}attrCopy(h,u){h.left=u.left,h.nested=u.nested,h.right=u.right,h.empty=u.empty,h.finite=u.finite,h.cyclic=u.cyclic,h.leaf=u.leaf,h.isOpen=u.isOpen,h.isComplete=u.isComplete,h.rule=u.rule}rdGen(h,u,m){return{rule:h,recursiveType:e.ATTR_N,groupNumber:-1,refersTo:this.falseArray(u),refersToUdt:this.falseArray(m),referencedBy:this.falseArray(u)}}typeToString(h){switch(h){case e.ATTR_N:return" N";case e.ATTR_R:return" R";case e.ATTR_MR:return"MR";default:return"UNKNOWN"}}falseArray(h){let u=[];if(h>0)for(let m=0;m<h;m+=1)u.push(!1);return u}falsifyArray(h){for(let u=0;u<h.length;u+=1)h[u]=!1}indexArray(h){let u=[];if(h>0)for(let m=0;m<h;m+=1)u.push(m);return u}compRulesAlpha(h,u){return this.rules[h].lower<this.rules[u].lower?-1:this.rules[h].lower>this.rules[u].lower?1:0}compUdtsAlpha(h,u){return this.udts[h].lower<this.udts[u].lower?-1:this.udts[h].lower>this.udts[u].lower?1:0}compRulesType(h,u){return this.ruleDeps[h].recursiveType<this.ruleDeps[u].recursiveType?-1:this.ruleDeps[h].recursiveType>this.ruleDeps[u].recursiveType?1:0}compRulesGroup(h,u){if(this.ruleDeps[h].recursiveType===e.ATTR_MR&&this.ruleDeps[u].recursiveType===e.ATTR_MR){if(this.ruleDeps[h].groupNumber<this.ruleDeps[u].groupNumber)return-1;if(this.ruleDeps[h].groupNumber>this.ruleDeps[u].groupNumber)return 1}return 0}}return{attributes:function(h=[],u=[],m=[],T=[]){let y=new a(h,u);return i(y),t(y),y.attrsErrorCount&&T.push({line:0,char:0,msg:`${y.attrsErrorCount} attribute errors`}),y.attrsErrorCount},showAttributes:n,showAttributeErrors:s,showRuleDependencies:o}}()});var lc=ke((gd,cc)=>{cc.exports=function(){let e="show-rules.js";return function(s=[],i=[],o="index"){let a="showRules",c=[],l=[],h=[],u=[],m=s,T=i,y=s.length,d=i.length,A="RULE/UDT NAMES",p;function b($,q){return m[$].lower<m[q].lower?-1:m[$].lower>m[q].lower?1:0}function N($,q){return T[$].lower<T[q].lower?-1:T[$].lower>T[q].lower?1:0}if(!(Array.isArray(s)&&s.length))throw new Error(`${e}:${a}: rules arg must be array with length > 0`);if(!Array.isArray(i))throw new Error(`${e}:${a}: udts arg must be array`);for(p=0;p<y;p+=1)h.push(p);if(c=h.slice(0),c.sort(b),d){for(p=0;p<d;p+=1)u.push(p);l=u.slice(0),l.sort(N)}if(o.charCodeAt(0)===97){for(A+=` - alphabetical by rule/UDT name
`,p=0;p<y;p+=1)A+=`${p}: ${c[p]}: ${m[c[p]].name}
`;if(d)for(p=0;p<d;p+=1)A+=`${p}: ${l[p]}: ${T[l[p]].name}
`}else{for(A+=` - ordered by rule/UDT index
`,p=0;p<y;p+=1)A+=`${p}: ${m[p].name}
`;if(d)for(p=0;p<d;p+=1)A+=`${p}: ${T[p].name}
`}return A}}()});var hc=ke((yd,uc)=>{uc.exports=function(e){let{Buffer:t}=bs(),n="api.js: ",s=this,i=Rr(),o=zi(),a=Ya(),c=new(tc()),{attributes:l,showAttributes:h,showAttributeErrors:u,showRuleDependencies:m}=ac(),T=lc(),y=function(O,B,v){let re=`<span class="${i.style.CLASS_CTRLCHAR}">`,le="</span>",de=`<span class="${i.style.CLASS_NOMATCH}">`,Q="</span>",se,K="",C=!0;for(;C&&!(!Array.isArray(O)||O.length===0);){if(typeof B!="number")throw new Error("abnfToHtml: beg must be type number");if(B>=O.length)break;typeof v!="number"||B+v>=O.length?se=O.length:se=B+v;let me=0;for(let Pe=B;Pe<se;Pe+=1){let Se=O[Pe];if(Se>=32&&Se<=126)switch(me===1?(K+=le,me=0):me===2&&(K+=Q,me=0),Se){case 32:K+="&nbsp;";break;case 60:K+="&lt;";break;case 62:K+="&gt;";break;case 38:K+="&amp;";break;case 34:K+="&quot;";break;case 39:K+="&#039;";break;case 92:K+="&#092;";break;default:K+=String.fromCharCode(Se);break}else Se===9||Se===10||Se===13?(me===0?(K+=re,me=1):me===2&&(K+=Q+re,me=1),Se===9&&(K+="TAB"),Se===10&&(K+="LF"),Se===13&&(K+="CR")):(me===0?(K+=de,me=2):me===1&&(K+=le+de,me=2),K+=`\\x${i.utils.charToHex(Se)}`)}me===2&&(K+=Q),me===1&&(K+=le);break}return K},d=function(O,B,v){let G="";for(let z=B;z<B+v;z+=1){let j=O[z];if(j>=32&&j<=126)G+=String.fromCharCode(j);else switch(j){case 9:G+="\\t";break;case 10:G+="\\n";break;case 13:G+="\\r";break;default:G+="\\unknown";break}}return G},A=function(O){let B="Annotated Input Grammar";return O.forEach(v=>{B+=`
`,B+=`line no: ${v.lineNo}`,B+=` : char index: ${v.beginChar}`,B+=` : length: ${v.length}`,B+=` : abnf: ${d(s.chars,v.beginChar,v.length)}`}),B+=`
`,B},p=function(O){let B="";return B+=`<table class="${i.style.CLASS_GRAMMAR}">
`,B+=`<caption>Annotated Input Grammar</caption>
`,B+="<tr>",B+="<th>line<br>no.</th><th>first<br>char</th><th><br>length</th><th><br>text</th>",B+=`</tr>
`,O.forEach(G=>{B+="<tr>",B+=`<td>${G.lineNo}`,B+=`</td><td>${G.beginChar}`,B+=`</td><td>${G.length}`,B+=`</td><td>${y(s.chars,G.beginChar,G.length)}`,B+="</td>",B+=`</tr>
`}),B+=`</table>
`,B},b=function(O,B,v,G){let[z]=i,j="",re=`<span class="${z.CLASS_NOMATCH}">&raquo;</span>`;return j+=`<p><table class="${z.CLASS_GRAMMAR}">
`,G&&typeof G=="string"&&(j+=`<caption>${G}</caption>
`),j+=`<tr><th>line<br>no.</th><th>line<br>offset</th><th>error<br>offset</th><th><br>text</th></tr>
`,O.forEach(le=>{let de,Q,se,K,C,me="",Pe="";B.length===0?(C=re,Q=0):(de=B[le.line],se=de.beginChar,le.char>se&&(me=y(v,se,le.char-se)),se=le.char,K=de.beginChar+de.length,se<K&&(Pe=y(v,se,K-se)),C=me+re+Pe,Q=le.char-de.beginChar,j+="<tr>",j+=`<td>${le.line}</td><td>${de.beginChar}</td><td>${Q}</td><td>${C}</td>`,j+=`</tr>
`,j+="<tr>",j+=`<td colspan="3"></td><td>&uarr;:&nbsp;${i.utils.stringToAsciiHtml(le.msg)}</td>`,j+=`</tr>
`)}),j+=`</table></p>
`,j},N=function(O,B,v){let G,z,j,re;return G="",O.forEach(le=>{z=B[le.line],G+=`${z.lineNo}: `,G+=`${z.beginChar}: `,G+=`${le.char-z.beginChar}: `,j=z.beginChar,re=le.char-z.beginChar,G+=d(v,j,re),G+=" >> ",j=le.char,re=z.beginChar+z.length-le.char,G+=d(v,j,re),G+=`
`,G+=`${z.lineNo}: `,G+=`${z.beginChar}: `,G+=`${le.char-z.beginChar}: `,G+="error: ",G+=le.msg,G+=`
`}),G},$=!1,q=!1,w=!1,L=!1,ee=0,xe;if(this.errors=[],t.isBuffer(e))this.chars=o.decode("BINARY",e);else if(Array.isArray(e))this.chars=e.slice();else if(typeof e=="string")this.chars=o.decode("STRING",e);else throw new Error(`${n}input source is not a string, byte Buffer or character array`);this.sabnf=o.encode("STRING",this.chars),this.scan=function(O,B){this.lines=a(this.chars,this.errors,O,B),$=!0},this.parse=function(O,B){if(!$)throw new Error(`${n}grammar not scanned`);c.syntax(this.chars,this.lines,this.errors,O,B),q=!0},this.translate=function(){if(!q)throw new Error(`${n}grammar not scanned and parsed`);let O=c.semantic(this.chars,this.lines,this.errors);this.errors.length===0&&(this.rules=O.rules,this.udts=O.udts,xe=O.lineMap,w=!0)},this.attributes=function(){if(!w)throw new Error(`${n}grammar not scanned, parsed and translated`);return ee=l(this.rules,this.udts,xe,this.errors),L=!0,ee},this.generate=function(O){if(this.lines=a(this.chars,this.errors,O),this.errors.length||(c.syntax(this.chars,this.lines,this.errors,O),this.errors.length))return;let B=c.semantic(this.chars,this.lines,this.errors);this.errors.length||(this.rules=B.rules,this.udts=B.udts,xe=B.lineMap,ee=l(this.rules,this.udts,xe,this.errors),L=!0)},this.displayRules=function(O="index"){if(!w)throw new Error(`${n}grammar not scanned, parsed and translated`);return T(this.rules,this.udts,O)},this.displayRuleDependencies=function(O="index"){if(!L)throw new Error(`${n}no attributes - must be preceeded by call to attributes()`);return m(O)},this.displayAttributes=function(O="index"){if(!L)throw new Error(`${n}no attributes - must be preceeded by call to attributes()`);return ee&&u(O),h(O)},this.displayAttributeErrors=function(){if(!L)throw new Error(`${n}no attributes - must be preceeded by call to attributes()`);return u()},this.toSource=function(O){if(!L)throw new Error(`${n}can't generate parser source - must be preceeded by call to attributes()`);if(ee)throw new Error(`${n}can't generate parser source - attributes have ${ee} errors`);return c.generateSource(this.chars,this.lines,this.rules,this.udts,O)},this.toObject=function(){if(!L)throw new Error(`${n}can't generate parser source - must be preceeded by call to attributes()`);if(ee)throw new Error(`${n}can't generate parser source - attributes have ${ee} errors`);return c.generateObject(this.sabnf,this.rules,this.udts)},this.errorsToAscii=function(){return N(this.errors,this.lines,this.chars)},this.errorsToHtml=function(O){return b(this.errors,this.lines,this.chars,O)},this.linesToAscii=function(){return A(this.lines)},this.linesToHtml=function(){return p(this.lines)}}});var Ic=ke((zd,Lc)=>{(function(r){"use strict";r.exports.is_uri=t,r.exports.is_http_uri=n,r.exports.is_https_uri=s,r.exports.is_web_uri=i,r.exports.isUri=t,r.exports.isHttpUri=n,r.exports.isHttpsUri=s,r.exports.isWebUri=i;var e=function(o){var a=o.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return a};function t(o){if(o&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(o)&&!/%[^0-9a-f]/i.test(o)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(o)){var a=[],c="",l="",h="",u="",m="",T="";if(a=e(o),c=a[1],l=a[2],h=a[3],u=a[4],m=a[5],!!(c&&c.length&&h.length>=0)){if(l&&l.length){if(!(h.length===0||/^\//.test(h)))return}else if(/^\/\//.test(h))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(c.toLowerCase()))return T+=c+":",l&&l.length&&(T+="//"+l),T+=h,u&&u.length&&(T+="?"+u),m&&m.length&&(T+="#"+m),T}}}function n(o,a){if(t(o)){var c=[],l="",h="",u="",m="",T="",y="",d="";if(c=e(o),l=c[1],h=c[2],u=c[3],T=c[4],y=c[5],!!l){if(a){if(l.toLowerCase()!="https")return}else if(l.toLowerCase()!="http")return;if(h)return/:(\d+)$/.test(h)&&(m=h.match(/:(\d+)$/)[0],h=h.replace(/:\d+$/,"")),d+=l+":",d+="//"+h,m&&(d+=m),d+=u,T&&T.length&&(d+="?"+T),y&&y.length&&(d+="#"+y),d}}}function s(o){return n(o,!0)}function i(o){return n(o)||s(o)}})(Lc)});var eu=ke(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.BrowserRandomSource=void 0;var Ql=65536,_o=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");let t=new Uint8Array(e);for(let n=0;n<t.length;n+=Ql)this._crypto.getRandomValues(t.subarray(n,n+Math.min(t.length-n,Ql)));return t}};Ei.BrowserRandomSource=_o});var Ho=ke(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});function op(r){for(var e=0;e<r.length;e++)r[e]=0;return r}Fo.wipe=op});var tu=ke(()=>{});var ru=ke(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});Ti.NodeRandomSource=void 0;var ap=Ho(),Do=class{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Qo<"u"){let e=tu();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");let n=new Uint8Array(e);for(let s=0;s<n.length;s++)n[s]=t[s];return(0,ap.wipe)(t),n}};Ti.NodeRandomSource=Do});var nu=ke(Ai=>{"use strict";Object.defineProperty(Ai,"__esModule",{value:!0});Ai.SystemRandomSource=void 0;var cp=eu(),lp=ru(),Vo=class{constructor(){if(this.isAvailable=!1,this.name="",this._source=new cp.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new lp.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}};Ai.SystemRandomSource=Vo});var su=ke(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});function up(r,e){var t=r>>>16&65535,n=r&65535,s=e>>>16&65535,i=e&65535;return n*i+(t*i+n*s<<16>>>0)|0}yt.mul=Math.imul||up;function hp(r,e){return r+e|0}yt.add=hp;function fp(r,e){return r-e|0}yt.sub=fp;function pp(r,e){return r<<e|r>>>32-e}yt.rotl=pp;function dp(r,e){return r<<32-e|r>>>e}yt.rotr=dp;function mp(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r}yt.isInteger=Number.isInteger||mp;yt.MAX_SAFE_INTEGER=9007199254740991;yt.isSafeInteger=function(r){return yt.isInteger(r)&&r>=-yt.MAX_SAFE_INTEGER&&r<=yt.MAX_SAFE_INTEGER}});var uu=ke(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});var iu=su();function gp(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])<<16>>16}Te.readInt16BE=gp;function yp(r,e){return e===void 0&&(e=0),(r[e+0]<<8|r[e+1])>>>0}Te.readUint16BE=yp;function bp(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])<<16>>16}Te.readInt16LE=bp;function wp(r,e){return e===void 0&&(e=0),(r[e+1]<<8|r[e])>>>0}Te.readUint16LE=wp;function ou(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>8,e[t+1]=r>>>0,e}Te.writeUint16BE=ou;Te.writeInt16BE=ou;function au(r,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e}Te.writeUint16LE=au;Te.writeInt16LE=au;function Ko(r,e){return e===void 0&&(e=0),r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}Te.readInt32BE=Ko;function Go(r,e){return e===void 0&&(e=0),(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}Te.readUint32BE=Go;function zo(r,e){return e===void 0&&(e=0),r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]}Te.readInt32LE=zo;function qo(r,e){return e===void 0&&(e=0),(r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e])>>>0}Te.readUint32LE=qo;function ki(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>24,e[t+1]=r>>>16,e[t+2]=r>>>8,e[t+3]=r>>>0,e}Te.writeUint32BE=ki;Te.writeInt32BE=ki;function Si(r,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=r>>>0,e[t+1]=r>>>8,e[t+2]=r>>>16,e[t+3]=r>>>24,e}Te.writeUint32LE=Si;Te.writeInt32LE=Si;function xp(r,e){e===void 0&&(e=0);var t=Ko(r,e),n=Ko(r,e+4);return t*4294967296+n-(n>>31)*4294967296}Te.readInt64BE=xp;function Ep(r,e){e===void 0&&(e=0);var t=Go(r,e),n=Go(r,e+4);return t*4294967296+n}Te.readUint64BE=Ep;function Tp(r,e){e===void 0&&(e=0);var t=zo(r,e),n=zo(r,e+4);return n*4294967296+t-(t>>31)*4294967296}Te.readInt64LE=Tp;function Ap(r,e){e===void 0&&(e=0);var t=qo(r,e),n=qo(r,e+4);return n*4294967296+t}Te.readUint64LE=Ap;function cu(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),ki(r/4294967296>>>0,e,t),ki(r>>>0,e,t+4),e}Te.writeUint64BE=cu;Te.writeInt64BE=cu;function lu(r,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),Si(r>>>0,e,t),Si(r/4294967296>>>0,e,t+4),e}Te.writeUint64LE=lu;Te.writeInt64LE=lu;function kp(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,s=1,i=r/8+t-1;i>=t;i--)n+=e[i]*s,s*=256;return n}Te.readUintBE=kp;function Sp(r,e,t){if(t===void 0&&(t=0),r%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(r/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,s=1,i=t;i<t+r/8;i++)n+=e[i]*s,s*=256;return n}Te.readUintLE=Sp;function Bp(r,e,t,n){if(t===void 0&&(t=new Uint8Array(r/8)),n===void 0&&(n=0),r%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!iu.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var s=1,i=r/8+n-1;i>=n;i--)t[i]=e/s&255,s*=256;return t}Te.writeUintBE=Bp;function Cp(r,e,t,n){if(t===void 0&&(t=new Uint8Array(r/8)),n===void 0&&(n=0),r%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!iu.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var s=1,i=n;i<n+r/8;i++)t[i]=e/s&255,s*=256;return t}Te.writeUintLE=Cp;function Np(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e)}Te.readFloat32BE=Np;function Op(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat32(e,!0)}Te.readFloat32LE=Op;function Rp(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e)}Te.readFloat64BE=Rp;function Lp(r,e){e===void 0&&(e=0);var t=new DataView(r.buffer,r.byteOffset,r.byteLength);return t.getFloat64(e,!0)}Te.readFloat64LE=Lp;function Ip(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(t,r),e}Te.writeFloat32BE=Ip;function Mp(r,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(t,r,!0),e}Te.writeFloat32LE=Mp;function Pp(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(t,r),e}Te.writeFloat64BE=Pp;function vp(r,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(t,r,!0),e}Te.writeFloat64LE=vp});var du=ke(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});it.randomStringForEntropy=it.randomString=it.randomUint32=it.randomBytes=it.defaultRandomSource=void 0;var $p=nu(),Up=uu(),hu=Ho();it.defaultRandomSource=new $p.SystemRandomSource;function Yo(r,e=it.defaultRandomSource){return e.randomBytes(r)}it.randomBytes=Yo;function _p(r=it.defaultRandomSource){let e=Yo(4,r),t=(0,Up.readUint32LE)(e);return(0,hu.wipe)(e),t}it.randomUint32=_p;var fu="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function pu(r,e=fu,t=it.defaultRandomSource){if(e.length<2)throw new Error("randomString charset is too short");if(e.length>256)throw new Error("randomString charset is too long");let n="",s=e.length,i=256-256%s;for(;r>0;){let o=Yo(Math.ceil(r*256/i),t);for(let a=0;a<o.length&&r>0;a++){let c=o[a];c<i&&(n+=e.charAt(c%s),r--)}(0,hu.wipe)(o)}return n}it.randomString=pu;function Fp(r,e=fu,t=it.defaultRandomSource){let n=Math.ceil(r/(Math.log(e.length)/Math.LN2));return pu(n,e,t)}it.randomStringForEntropy=Fp});var Vp={};ea(Vp,{SiweError:()=>at,SiweErrorType:()=>Uo,SiweMessage:()=>Wo,VerifyOptsKeys:()=>$o,VerifyParamsKeys:()=>vo,checkContractWalletSignature:()=>jo,checkInvalidKeys:()=>Ci,generateNonce:()=>Bi,isValidISO8601Date:()=>fs});var Rc=ds(hc()),Qe=ds(Rr());function $n(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function Un(r,...e){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(r.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${r.length}`)}function fc(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");$n(r.outputLen),$n(r.blockLen)}function qt(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function ks(r,e){Un(r);let t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}var Ss=BigInt(4294967295),pc=BigInt(32);function Ah(r,e=!1){return e?{h:Number(r&Ss),l:Number(r>>pc&Ss)}:{h:Number(r>>pc&Ss)|0,l:Number(r&Ss)|0}}function dc(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let s=0;s<r.length;s++){let{h:i,l:o}=Ah(r[s],e);[t[s],n[s]]=[i,o]}return[t,n]}var mc=(r,e,t)=>r<<t|e>>>32-t,gc=(r,e,t)=>e<<t|r>>>32-t,yc=(r,e,t)=>e<<t-32|r>>>64-t,bc=(r,e,t)=>r<<t-32|e>>>64-t;var Bs=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Wi=r=>r instanceof Uint8Array;var wc=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),Cs=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),Bt=(r,e)=>r<<32-e|r>>>e,kh=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!kh)throw new Error("Non little-endian hardware is not supported");var Sh=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function xc(r){if(!Wi(r))throw new Error("Uint8Array expected");let e="";for(let t=0;t<r.length;t++)e+=Sh[r[t]];return e}function Bh(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function ur(r){if(typeof r=="string"&&(r=Bh(r)),!Wi(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function Ec(...r){let e=new Uint8Array(r.reduce((n,s)=>n+s.length,0)),t=0;return r.forEach(n=>{if(!Wi(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}var lr=class{clone(){return this._cloneInto()}},Td={}.toString;function Ns(r){let e=n=>r().update(ur(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function Tc(r){let e=(n,s)=>r(s).update(ur(n)).digest(),t=r({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=n=>r(n),e}function Ac(r=32){if(Bs&&typeof Bs.getRandomValues=="function")return Bs.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}var[Bc,Cc,Nc]=[[],[],[]],Ch=BigInt(0),_n=BigInt(1),Nh=BigInt(2),Oh=BigInt(7),Rh=BigInt(256),Lh=BigInt(113);for(let r=0,e=_n,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],Bc.push(2*(5*n+t)),Cc.push((r+1)*(r+2)/2%64);let s=Ch;for(let i=0;i<7;i++)e=(e<<_n^(e>>Oh)*Lh)%Rh,e&Nh&&(s^=_n<<(_n<<BigInt(i))-_n);Nc.push(s)}var[Ih,Mh]=dc(Nc,!0),kc=(r,e,t)=>t>32?yc(r,e,t):mc(r,e,t),Sc=(r,e,t)=>t>32?bc(r,e,t):gc(r,e,t);function Ph(r,e=24){let t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){let a=(o+8)%10,c=(o+2)%10,l=t[c],h=t[c+1],u=kc(l,h,1)^t[a],m=Sc(l,h,1)^t[a+1];for(let T=0;T<50;T+=10)r[o+T]^=u,r[o+T+1]^=m}let s=r[2],i=r[3];for(let o=0;o<24;o++){let a=Cc[o],c=kc(s,i,a),l=Sc(s,i,a),h=Bc[o];s=r[h],i=r[h+1],r[h]=c,r[h+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}r[0]^=Ih[n],r[1]^=Mh[n]}t.fill(0)}var Os=class r extends lr{constructor(e,t,n,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,$n(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=wc(this.state)}keccak(){Ph(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){qt(this);let{blockLen:t,state:n}=this;e=ur(e);let s=e.length;for(let i=0;i<s;){let o=Math.min(t-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,t&128&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){qt(this,!1),Un(e),this.finish();let t=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();let o=Math.min(n-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return $n(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ks(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new r(t,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}},hr=(r,e,t)=>Ns(()=>new Os(e,r,t)),Cd=hr(6,144,224/8),Nd=hr(6,136,256/8),Od=hr(6,104,384/8),Rd=hr(6,72,512/8),Ld=hr(1,144,224/8),Rs=hr(1,136,256/8),Id=hr(1,104,384/8),Md=hr(1,72,512/8),Oc=(r,e,t)=>Tc((n={})=>new Os(e,r,n.dkLen===void 0?t:n.dkLen,!0)),Pd=Oc(31,168,128/8),vd=Oc(31,136,256/8);var Ls=r=>{if(r.length!=42)return!1;let e=`${r}`.toLowerCase().replace("0x",""),t=xc(Rs(e)),n="0x";for(let s=0;s<e.length;s++)parseInt(t[s],16)>=8?n+=e[s].toUpperCase():n+=e[s];return r===n},Is=r=>{let e=parseInt(r);if(Number.isNaN(e))throw new Error("Invalid number.");if(e===1/0)throw new Error("Invalid number.");return e};var vh=`
sign-in-with-ethereum =
    domain %s" wants you to sign in with your Ethereum account:" LF
    address LF
    LF
    [ statement LF ]
    LF
    %s"URI: " URI LF
    %s"Version: " version LF
    %s"Chain ID: " chain-id LF
    %s"Nonce: " nonce LF
    %s"Issued At: " issued-at
    [ LF %s"Expiration Time: " expiration-time ]
    [ LF %s"Not Before: " not-before ]
    [ LF %s"Request ID: " request-id ]
    [ LF %s"Resources:"
    resources ]

domain = authority

address = "0x" 40*40HEXDIG
    ; Must also conform to captilization
    ; checksum encoding specified in EIP-55
    ; where applicable (EOAs).

statement = 1*( reserved / unreserved / " " )
    ; The purpose is to exclude LF (line breaks).

version = "1"

nonce = 8*( ALPHA / DIGIT )

issued-at = date-time
expiration-time = date-time
not-before = date-time

request-id = *pchar

chain-id = 1*DIGIT
    ; See EIP-155 for valid CHAIN_IDs.

resources = *( LF resource )

resource = "- " URI

; ------------------------------------------------------------------------------
; RFC 3986

URI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]

hier-part     = "//" authority path-abempty
              / path-absolute
              / path-rootless
              / path-empty

scheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )

authority     = [ userinfo "@" ] host [ ":" port ]
userinfo      = *( unreserved / pct-encoded / sub-delims / ":" )
host          = IP-literal / IPv4address / reg-name
port          = *DIGIT

IP-literal    = "[" ( IPv6address / IPvFuture  ) "]"

IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )

IPv6address   =                            6( h16 ":" ) ls32
              /                       "::" 5( h16 ":" ) ls32
              / [               h16 ] "::" 4( h16 ":" ) ls32
              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
              / [ *4( h16 ":" ) h16 ] "::"              ls32
              / [ *5( h16 ":" ) h16 ] "::"              h16
              / [ *6( h16 ":" ) h16 ] "::"

h16           = 1*4HEXDIG
ls32          = ( h16 ":" h16 ) / IPv4address
IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
dec-octet     = DIGIT                 ; 0-9
                 / %x31-39 DIGIT         ; 10-99
                 / "1" 2DIGIT            ; 100-199
                 / "2" %x30-34 DIGIT     ; 200-249
                 / "25" %x30-35          ; 250-255

reg-name      = *( unreserved / pct-encoded / sub-delims )

path-abempty  = *( "/" segment )
path-absolute = "/" [ segment-nz *( "/" segment ) ]
path-rootless = segment-nz *( "/" segment )
path-empty    = 0pchar

segment       = *pchar
segment-nz    = 1*pchar

pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"

query         = *( pchar / "/" / "?" )

fragment      = *( pchar / "/" / "?" )

pct-encoded   = "%" HEXDIG HEXDIG

unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
reserved      = gen-delims / sub-delims
gen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"
sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
              / "*" / "+" / "," / ";" / "="

; ------------------------------------------------------------------------------
; RFC 3339

date-fullyear   = 4DIGIT
date-month      = 2DIGIT  ; 01-12
date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
                          ; month/year
time-hour       = 2DIGIT  ; 00-23
time-minute     = 2DIGIT  ; 00-59
time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second
                          ; rules
time-secfrac    = "." 1*DIGIT
time-numoffset  = ("+" / "-") time-hour ":" time-minute
time-offset     = "Z" / time-numoffset

partial-time    = time-hour ":" time-minute ":" time-second
                  [time-secfrac]
full-date       = date-fullyear "-" date-month "-" date-mday
full-time       = partial-time time-offset

date-time       = full-date "T" full-time

; ------------------------------------------------------------------------------
; RFC 5234

ALPHA          =  %x41-5A / %x61-7A   ; A-Z / a-z
LF             =  %x0A
                  ; linefeed
DIGIT          =  %x30-39
                  ; 0-9
HEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"
`,Ms=class Ms{static generateApi(){let e=new Rc.default(vh);if(e.generate(),e.errors.length)throw console.error(e.errorsToAscii()),console.error(e.linesToAscii()),console.log(e.displayAttributeErrors()),new Error("ABNF grammar has errors");return e.toObject()}};Ms.grammarObj=Ms.generateApi();var Zi=Ms,Fn=class{constructor(e){let t=new Qe.default.parser;t.ast=new Qe.default.ast;let n=Qe.default.ids,s=function(b,N,$,q,w){let L=n.SEM_OK;return b===n.SEM_PRE&&(w.domain=Qe.default.utils.charsToString(N,$,q)),L};t.ast.callbacks.domain=s;let i=function(b,N,$,q,w){let L=n.SEM_OK;return b===n.SEM_PRE&&(w.address=Qe.default.utils.charsToString(N,$,q)),L};t.ast.callbacks.address=i;let o=function(b,N,$,q,w){let L=n.SEM_OK;return b===n.SEM_PRE&&(w.statement=Qe.default.utils.charsToString(N,$,q)),L};t.ast.callbacks.statement=o;let a=function(b,N,$,q,w){let L=n.SEM_OK;return b===n.SEM_PRE&&(w.uri||(w.uri=Qe.default.utils.charsToString(N,$,q))),L};t.ast.callbacks.uri=a;let c=function(b,N,$,q,w){let L=n.SEM_OK;return b===n.SEM_PRE&&(w.version=Qe.default.utils.charsToString(N,$,q)),L};t.ast.callbacks.version=c;let l=function(b,N,$,q,w){let L=n.SEM_OK;return b===n.SEM_PRE&&(w.chainId=Is(Qe.default.utils.charsToString(N,$,q))),L};t.ast.callbacks["chain-id"]=l;let h=function(b,N,$,q,w){let L=n.SEM_OK;return b===n.SEM_PRE&&(w.nonce=Qe.default.utils.charsToString(N,$,q)),L};t.ast.callbacks.nonce=h;let u=function(b,N,$,q,w){let L=n.SEM_OK;return b===n.SEM_PRE&&(w.issuedAt=Qe.default.utils.charsToString(N,$,q)),L};t.ast.callbacks["issued-at"]=u;let m=function(b,N,$,q,w){let L=n.SEM_OK;return b===n.SEM_PRE&&(w.expirationTime=Qe.default.utils.charsToString(N,$,q)),L};t.ast.callbacks["expiration-time"]=m;let T=function(b,N,$,q,w){let L=n.SEM_OK;return b===n.SEM_PRE&&(w.notBefore=Qe.default.utils.charsToString(N,$,q)),L};t.ast.callbacks["not-before"]=T;let y=function(b,N,$,q,w){let L=n.SEM_OK;return b===n.SEM_PRE&&(w.requestId=Qe.default.utils.charsToString(N,$,q)),L};t.ast.callbacks["request-id"]=y;let d=function(b,N,$,q,w){let L=n.SEM_OK;return b===n.SEM_PRE&&(w.resources=Qe.default.utils.charsToString(N,$,q).slice(3).split(`
- `)),L};t.ast.callbacks.resources=d;let A=t.parse(Zi.grammarObj,"sign-in-with-ethereum",e);if(!A.success)throw new Error(`Invalid message: ${JSON.stringify(A)}`);let p={};t.ast.translate(p);for(let[b,N]of Object.entries(p))this[b]=N;if(this.domain.length===0)throw new Error("Domain cannot be empty.");if(!Ls(this.address))throw new Error("Address not conformant to EIP-55.")}};var yu=ds(Ic());var Mc="6.8.1";function $h(r,e,t){let n=e.split("|").map(i=>i.trim());for(let i=0;i<n.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof r===e)return}let s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${t}`,s.value=r,s}async function ln(r){let e=Object.keys(r);return(await Promise.all(e.map(n=>Promise.resolve(r[n])))).reduce((n,s,i)=>(n[e[i]]=s,n),{})}function pe(r,e,t){for(let n in e){let s=e[n],i=t?t[n]:null;i&&$h(s,i,n),Object.defineProperty(r,n,{enumerable:!0,value:s,writable:!1})}}function un(r){if(r==null)return"null";if(Array.isArray(r))return"[ "+r.map(un).join(", ")+" ]";if(r instanceof Uint8Array){let e="0123456789abcdef",t="0x";for(let n=0;n<r.length;n++)t+=e[r[n]>>4],t+=e[r[n]&15];return t}if(typeof r=="object"&&typeof r.toJSON=="function")return un(r.toJSON());switch(typeof r){case"boolean":case"symbol":return r.toString();case"bigint":return BigInt(r).toString();case"number":return r.toString();case"string":return JSON.stringify(r);case"object":{let e=Object.keys(r);return e.sort(),"{ "+e.map(t=>`${un(t)}: ${un(r[t])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function _t(r,e){return r&&r.code===e}function Ps(r){return _t(r,"CALL_EXCEPTION")}function Yt(r,e,t){let n=r;{let i=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${un(t)}`);for(let o in t){if(o==="shortMessage")continue;let a=t[o];i.push(o+"="+un(a))}}i.push(`code=${e}`),i.push(`version=${Mc}`),i.length&&(r+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(r);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(r);break;default:s=new Error(r)}return pe(s,{code:e}),t&&Object.assign(s,t),s.shortMessage==null&&pe(s,{shortMessage:n}),s}function ce(r,e,t,n){if(!r)throw Yt(e,t,n)}function W(r,e,t,n){ce(r,e,"INVALID_ARGUMENT",{argument:t,value:n})}function Hn(r,e,t){t==null&&(t=""),t&&(t=": "+t),ce(r>=e,"missing arguemnt"+t,"MISSING_ARGUMENT",{count:r,expectedCount:e}),ce(r<=e,"too many arguemnts"+t,"UNEXPECTED_ARGUMENT",{count:r,expectedCount:e})}var Uh=["NFD","NFC","NFKD","NFKC"].reduce((r,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"\xE9".normalize("NFD")!=="e\u0301")throw new Error("broken");r.push(e)}catch(t){}return r},[]);function Ji(r){ce(Uh.indexOf(r)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:r}})}function fr(r,e,t){if(t==null&&(t=""),r!==e){let n=t,s="new";t&&(n+=".",s+=" "+t),ce(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function vc(r,e,t){if(r instanceof Uint8Array)return t?new Uint8Array(r):r;if(typeof r=="string"&&r.match(/^0x([0-9a-f][0-9a-f])*$/i)){let n=new Uint8Array((r.length-2)/2),s=2;for(let i=0;i<n.length;i++)n[i]=parseInt(r.substring(s,s+2),16),s+=2;return n}W(!1,"invalid BytesLike value",e||"value",r)}function Le(r,e){return vc(r,e,!1)}function He(r,e){return vc(r,e,!0)}function et(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&r.length!==2+2*e||e===!0&&r.length%2!==0)}var Pc="0123456789abcdef";function we(r){let e=Le(r),t="0x";for(let n=0;n<e.length;n++){let s=e[n];t+=Pc[(s&240)>>4]+Pc[s&15]}return t}function tt(r){return"0x"+r.map(e=>we(e).substring(2)).join("")}function pr(r){return et(r,!0)?(r.length-2)/2:Le(r).length}function dr(r,e,t){let n=Le(r);return t!=null&&t>n.length&&ce(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:t}),we(n.slice(e==null?0:e,t==null?n.length:t))}function $c(r,e,t){let n=Le(r);ce(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});let s=new Uint8Array(e);return s.fill(0),t?s.set(n,e-n.length):s.set(n,0),we(s)}function Dn(r,e){return $c(r,e,!0)}function Xi(r,e){return $c(r,e,!1)}var vs=BigInt(0),Ct=BigInt(1),hn=9007199254740991;function Qi(r,e){let t=Vn(r,"value"),n=BigInt(je(e,"width"));if(ce(t>>n===vs,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:r}),t>>n-Ct){let s=(Ct<<n)-Ct;return-((~t&s)+Ct)}return t}function eo(r,e){let t=Ke(r,"value"),n=BigInt(je(e,"width")),s=Ct<<n-Ct;if(t<vs){t=-t,ce(t<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});let i=(Ct<<n)-Ct;return(~t&i)+Ct}else ce(t<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:r});return t}function fn(r,e){let t=Vn(r,"value"),n=BigInt(je(e,"bits"));return t&(Ct<<n)-Ct}function Ke(r,e){switch(typeof r){case"bigint":return r;case"number":return W(Number.isInteger(r),"underflow",e||"value",r),W(r>=-hn&&r<=hn,"overflow",e||"value",r),BigInt(r);case"string":try{if(r==="")throw new Error("empty string");return r[0]==="-"&&r[1]!=="-"?-BigInt(r.substring(1)):BigInt(r)}catch(t){W(!1,`invalid BigNumberish string: ${t.message}`,e||"value",r)}}W(!1,"invalid BigNumberish value",e||"value",r)}function Vn(r,e){let t=Ke(r,e);return ce(t>=vs,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:r}),t}var Uc="0123456789abcdef";function $s(r){if(r instanceof Uint8Array){let e="0x0";for(let t of r)e+=Uc[t>>4],e+=Uc[t&15];return BigInt(e)}return Ke(r)}function je(r,e){switch(typeof r){case"bigint":return W(r>=-hn&&r<=hn,"overflow",e||"value",r),Number(r);case"number":return W(Number.isInteger(r),"underflow",e||"value",r),W(r>=-hn&&r<=hn,"overflow",e||"value",r),r;case"string":try{if(r==="")throw new Error("empty string");return je(BigInt(r),e)}catch(t){W(!1,`invalid numeric string: ${t.message}`,e||"value",r)}}W(!1,"invalid numeric value",e||"value",r)}function to(r){return je($s(r))}function mr(r,e){let n=Vn(r,"value").toString(16);if(e==null)n.length%2&&(n="0"+n);else{let s=je(e,"width");for(ce(s*2>=n.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:r});n.length<s*2;)n="0"+n}return"0x"+n}function Kn(r){let e=Vn(r,"value");if(e===vs)return new Uint8Array([]);let t=e.toString(16);t.length%2&&(t="0"+t);let n=new Uint8Array(t.length/2);for(let s=0;s<n.length;s++){let i=s*2;n[s]=parseInt(t.substring(i,i+2),16)}return n}var pn,Gn=class{constructor(e,t,n){U(this,"filter");U(this,"emitter");be(this,pn,void 0);ye(this,pn,t),pe(this,{emitter:e,filter:n})}async removeListener(){Y(this,pn)!=null&&await this.emitter.off(this.filter,Y(this,pn))}};pn=new WeakMap;function _h(r,e,t,n,s){W(!1,`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function _c(r,e,t,n,s){if(r==="BAD_PREFIX"||r==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<t.length&&t[o]>>6===2;o++)i++;return i}return r==="OVERRUN"?t.length-e-1:0}function Fh(r,e,t,n,s){return r==="OVERLONG"?(W(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),n.push(s),0):(n.push(65533),_c(r,e,t,n,s))}var Fc=Object.freeze({error:_h,ignore:_c,replace:Fh});function Hh(r,e){e==null&&(e=Fc.error);let t=Le(r,"bytes"),n=[],s=0;for(;s<t.length;){let i=t[s++];if(!(i>>7)){n.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,t,n):s+=e("BAD_PREFIX",s-1,t,n);continue}if(s-1+o>=t.length){s+=e("OVERRUN",s-1,t,n);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let h=t[s];if((h&192)!=128){s+=e("MISSING_CONTINUE",s,t,n),c=null;break}c=c<<6|h&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,t,n,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,t,n,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,t,n,c);continue}n.push(c)}}return n}function jt(r,e){e!=null&&(Ji(e),r=r.normalize(e));let t=[];for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);if(s<128)t.push(s);else if(s<2048)t.push(s>>6|192),t.push(s&63|128);else if((s&64512)==55296){n++;let i=r.charCodeAt(n);W(n<r.length&&(i&64512)===56320,"invalid surrogate pair","str",r);let o=65536+((s&1023)<<10)+(i&1023);t.push(o>>18|240),t.push(o>>12&63|128),t.push(o>>6&63|128),t.push(o&63|128)}else t.push(s>>12|224),t.push(s>>6&63|128),t.push(s&63|128)}return new Uint8Array(t)}function Dh(r){return r.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function ro(r,e){return Dh(Hh(r,e))}var We=32,no=new Uint8Array(We),Vh=["then"],Us={};function zn(r,e){let t=new Error(`deferred error during ABI decoding triggered accessing ${r}`);throw t.error=e,t}var gr,qn=class qn extends Array{constructor(...t){let n=t[0],s=t[1],i=(t[2]||[]).slice(),o=!0;n!==Us&&(s=t,i=[],o=!1);super(s.length);be(this,gr,void 0);s.forEach((c,l)=>{this[l]=c});let a=i.reduce((c,l)=>(typeof l=="string"&&c.set(l,(c.get(l)||0)+1),c),new Map);if(ye(this,gr,Object.freeze(s.map((c,l)=>{let h=i[l];return h!=null&&a.get(h)===1?h:null}))),!!o)return Object.freeze(this),new Proxy(this,{get:(c,l,h)=>{if(typeof l=="string"){if(l.match(/^[0-9]+$/)){let m=je(l,"%index");if(m<0||m>=this.length)throw new RangeError("out of result range");let T=c[m];return T instanceof Error&&zn(`index ${m}`,T),T}if(Vh.indexOf(l)>=0)return Reflect.get(c,l,h);let u=c[l];if(u instanceof Function)return function(...m){return u.apply(this===h?c:this,m)};if(!(l in c))return c.getValue.apply(this===h?c:this,[l])}return Reflect.get(c,l,h)}})}toArray(){let t=[];return this.forEach((n,s)=>{n instanceof Error&&zn(`index ${s}`,n),t.push(n)}),t}toObject(){return Y(this,gr).reduce((t,n,s)=>(ce(n!=null,"value at index ${ index } unnamed","UNSUPPORTED_OPERATION",{operation:"toObject()"}),n in t||(t[n]=this.getValue(n)),t),{})}slice(t,n){t==null&&(t=0),t<0&&(t+=this.length,t<0&&(t=0)),n==null&&(n=this.length),n<0&&(n+=this.length,n<0&&(n=0)),n>this.length&&(n=this.length);let s=[],i=[];for(let o=t;o<n;o++)s.push(this[o]),i.push(Y(this,gr)[o]);return new qn(Us,s,i)}filter(t,n){let s=[],i=[];for(let o=0;o<this.length;o++){let a=this[o];a instanceof Error&&zn(`index ${o}`,a),t.call(n,a,o,this)&&(s.push(a),i.push(Y(this,gr)[o]))}return new qn(Us,s,i)}map(t,n){let s=[];for(let i=0;i<this.length;i++){let o=this[i];o instanceof Error&&zn(`index ${i}`,o),s.push(t.call(n,o,i,this))}return s}getValue(t){let n=Y(this,gr).indexOf(t);if(n===-1)return;let s=this[n];return s instanceof Error&&zn(`property ${JSON.stringify(t)}`,s.error),s}static fromItems(t,n){return new qn(Us,t,n)}};gr=new WeakMap;var Ir=qn;function Hc(r){let e=Kn(r);return ce(e.length<=We,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:We,offset:e.length}),e.length!==We&&(e=He(tt([no.slice(e.length%We),e]))),e}var De=class{constructor(e,t,n,s){U(this,"name");U(this,"type");U(this,"localName");U(this,"dynamic");pe(this,{name:e,type:t,localName:n,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){W(!1,e,this.localName,t)}},Wt,Lr,dn,_s,Mr=class{constructor(){be(this,dn);be(this,Wt,void 0);be(this,Lr,void 0);ye(this,Wt,[]),ye(this,Lr,0)}get data(){return tt(Y(this,Wt))}get length(){return Y(this,Lr)}appendWriter(e){return Ie(this,dn,_s).call(this,He(e.data))}writeBytes(e){let t=He(e),n=t.length%We;return n&&(t=He(tt([t,no.slice(n)]))),Ie(this,dn,_s).call(this,t)}writeValue(e){return Ie(this,dn,_s).call(this,Hc(e))}writeUpdatableValue(){let e=Y(this,Wt).length;return Y(this,Wt).push(no),ye(this,Lr,Y(this,Lr)+We),t=>{Y(this,Wt)[e]=Hc(t)}}};Wt=new WeakMap,Lr=new WeakMap,dn=new WeakSet,_s=function(e){return Y(this,Wt).push(e),ye(this,Lr,Y(this,Lr)+e.length),e.length};var ft,xt,Hs,Dc,so=class so{constructor(e,t){be(this,Hs);U(this,"allowLoose");be(this,ft,void 0);be(this,xt,void 0);pe(this,{allowLoose:!!t}),ye(this,ft,He(e)),ye(this,xt,0)}get data(){return we(Y(this,ft))}get dataLength(){return Y(this,ft).length}get consumed(){return Y(this,xt)}get bytes(){return new Uint8Array(Y(this,ft))}subReader(e){return new so(Y(this,ft).slice(Y(this,xt)+e),this.allowLoose)}readBytes(e,t){let n=Ie(this,Hs,Dc).call(this,0,e,!!t);return ye(this,xt,Y(this,xt)+n.length),n.slice(0,e)}readValue(){return $s(this.readBytes(We))}readIndex(){return to(this.readBytes(We))}};ft=new WeakMap,xt=new WeakMap,Hs=new WeakSet,Dc=function(e,t,n){let s=Math.ceil(t/We)*We;return Y(this,xt)+s>Y(this,ft).length&&(this.allowLoose&&n&&Y(this,xt)+t<=Y(this,ft).length?s=t:ce(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:He(Y(this,ft)),length:Y(this,ft).length,offset:Y(this,xt)+s})),Y(this,ft).slice(Y(this,xt),Y(this,xt)+s)};var Fs=so;var Ds=class extends lr{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,fc(e);let n=ur(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return qt(this),this.iHash.update(e),this}digestInto(e){qt(this),Un(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},io=(r,e,t)=>new Ds(r,e).update(t).digest();io.create=(r,e)=>new Ds(r,e);function Kh(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);let s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),a=Number(t&i),c=n?4:0,l=n?0:4;r.setUint32(e+c,o,n),r.setUint32(e+l,a,n)}var Vs=class extends lr{constructor(e,t,n,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Cs(this.buffer)}update(e){qt(this);let{view:t,buffer:n,blockLen:s}=this;e=ur(e);let i=e.length;for(let o=0;o<i;){let a=Math.min(s-this.pos,i-o);if(a===s){let c=Cs(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){qt(this),ks(e,this),this.finished=!0;let{buffer:t,view:n,blockLen:s,isLE:i}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let u=o;u<s;u++)t[u]=0;Kh(n,s-8,BigInt(this.length*8),i),this.process(n,0);let a=Cs(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let l=c/4,h=this.get();if(l>h.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)a.setUint32(4*u,h[u],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%t&&e.buffer.set(n),e}};var Gh=(r,e,t)=>r&e^~r&t,zh=(r,e,t)=>r&e^r&t^e&t,qh=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),yr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),br=new Uint32Array(64),oo=class extends Vs{constructor(){super(64,32,8,!1),this.A=yr[0]|0,this.B=yr[1]|0,this.C=yr[2]|0,this.D=yr[3]|0,this.E=yr[4]|0,this.F=yr[5]|0,this.G=yr[6]|0,this.H=yr[7]|0}get(){let{A:e,B:t,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,t,n,s,i,o,a,c]}set(e,t,n,s,i,o,a,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let u=0;u<16;u++,t+=4)br[u]=e.getUint32(t,!1);for(let u=16;u<64;u++){let m=br[u-15],T=br[u-2],y=Bt(m,7)^Bt(m,18)^m>>>3,d=Bt(T,17)^Bt(T,19)^T>>>10;br[u]=d+br[u-7]+y+br[u-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:l,H:h}=this;for(let u=0;u<64;u++){let m=Bt(a,6)^Bt(a,11)^Bt(a,25),T=h+m+Gh(a,c,l)+qh[u]+br[u]|0,d=(Bt(n,2)^Bt(n,13)^Bt(n,22))+zh(n,s,i)|0;h=l,l=c,c=a,a=o+T|0,o=i,i=s,s=n,n=T+d|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,h=h+this.H|0,this.set(n,s,i,o,a,c,l,h)}roundClean(){br.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Vc=Ns(()=>new oo);var Kc=!1,Gc=function(r){return Rs(r)},zc=Gc;function rt(r){let e=Le(r,"data");return we(zc(e))}rt._=Gc;rt.lock=function(){Kc=!0};rt.register=function(r){if(Kc)throw new TypeError("keccak256 is locked");zc=r};Object.freeze(rt);var uo={};ea(uo,{bitGet:()=>Qh,bitLen:()=>Xh,bitMask:()=>Yn,bitSet:()=>ef,bytesToHex:()=>Pr,bytesToNumberBE:()=>Zt,bytesToNumberLE:()=>zs,concatBytes:()=>mn,createHmacDrbg:()=>lo,ensureBytes:()=>pt,equalBytes:()=>Zh,hexToBytes:()=>vr,hexToNumber:()=>co,numberToBytesBE:()=>wr,numberToBytesLE:()=>qs,numberToHexUnpadded:()=>jc,numberToVarBytesBE:()=>Wh,utf8ToBytes:()=>Jh,validateObject:()=>xr});var Yc=BigInt(0),Ks=BigInt(1),Yh=BigInt(2),Gs=r=>r instanceof Uint8Array,jh=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Pr(r){if(!Gs(r))throw new Error("Uint8Array expected");let e="";for(let t=0;t<r.length;t++)e+=jh[r[t]];return e}function jc(r){let e=r.toString(16);return e.length&1?`0${e}`:e}function co(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}function vr(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);let e=r.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let t=new Uint8Array(e/2);for(let n=0;n<t.length;n++){let s=n*2,i=r.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function Zt(r){return co(Pr(r))}function zs(r){if(!Gs(r))throw new Error("Uint8Array expected");return co(Pr(Uint8Array.from(r).reverse()))}function wr(r,e){return vr(r.toString(16).padStart(e*2,"0"))}function qs(r,e){return wr(r,e).reverse()}function Wh(r){return vr(jc(r))}function pt(r,e,t){let n;if(typeof e=="string")try{n=vr(e)}catch(i){throw new Error(`${r} must be valid hex string, got "${e}". Cause: ${i}`)}else if(Gs(e))n=Uint8Array.from(e);else throw new Error(`${r} must be hex string or Uint8Array`);let s=n.length;if(typeof t=="number"&&s!==t)throw new Error(`${r} expected ${t} bytes, got ${s}`);return n}function mn(...r){let e=new Uint8Array(r.reduce((n,s)=>n+s.length,0)),t=0;return r.forEach(n=>{if(!Gs(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}function Zh(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function Jh(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Xh(r){let e;for(e=0;r>Yc;r>>=Ks,e+=1);return e}function Qh(r,e){return r>>BigInt(e)&Ks}var ef=(r,e,t)=>r|(t?Ks:Yc)<<BigInt(e),Yn=r=>(Yh<<BigInt(r-1))-Ks,ao=r=>new Uint8Array(r),qc=r=>Uint8Array.from(r);function lo(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=ao(r),s=ao(r),i=0,o=()=>{n.fill(1),s.fill(0),i=0},a=(...u)=>t(s,n,...u),c=(u=ao())=>{s=a(qc([0]),u),n=a(),u.length!==0&&(s=a(qc([1]),u),n=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0,m=[];for(;u<e;){n=a();let T=n.slice();m.push(T),u+=n.length}return mn(...m)};return(u,m)=>{o(),c(u);let T;for(;!(T=m(l()));)c();return o(),T}}var tf={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||r instanceof Uint8Array,isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function xr(r,e,t={}){let n=(s,i,o)=>{let a=tf[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);let c=r[s];if(!(o&&c===void 0)&&!a(c,r))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(let[s,i]of Object.entries(e))n(s,i,!1);for(let[s,i]of Object.entries(t))n(s,i,!0);return r}var Ge=BigInt(0),Ue=BigInt(1),$r=BigInt(2),rf=BigInt(3),ho=BigInt(4),Wc=BigInt(5),Zc=BigInt(8),nf=BigInt(9),sf=BigInt(16);function nt(r,e){let t=r%e;return t>=Ge?t:e+t}function of(r,e,t){if(t<=Ge||e<Ge)throw new Error("Expected power/modulo > 0");if(t===Ue)return Ge;let n=Ue;for(;e>Ge;)e&Ue&&(n=n*r%t),r=r*r%t,e>>=Ue;return n}function dt(r,e,t){let n=r;for(;e-- >Ge;)n*=n,n%=t;return n}function Ys(r,e){if(r===Ge||e<=Ge)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=nt(r,e),n=e,s=Ge,i=Ue,o=Ue,a=Ge;for(;t!==Ge;){let l=n/t,h=n%t,u=s-o*l,m=i-a*l;n=t,t=h,s=o,i=a,o=u,a=m}if(n!==Ue)throw new Error("invert: does not exist");return nt(s,e)}function af(r){let e=(r-Ue)/$r,t,n,s;for(t=r-Ue,n=0;t%$r===Ge;t/=$r,n++);for(s=$r;s<r&&of(s,e,r)!==r-Ue;s++);if(n===1){let o=(r+Ue)/ho;return function(c,l){let h=c.pow(l,o);if(!c.eql(c.sqr(h),l))throw new Error("Cannot find square root");return h}}let i=(t+Ue)/$r;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=n,h=a.pow(a.mul(a.ONE,s),t),u=a.pow(c,i),m=a.pow(c,t);for(;!a.eql(m,a.ONE);){if(a.eql(m,a.ZERO))return a.ZERO;let T=1;for(let d=a.sqr(m);T<l&&!a.eql(d,a.ONE);T++)d=a.sqr(d);let y=a.pow(h,Ue<<BigInt(l-T-1));h=a.sqr(y),u=a.mul(u,y),m=a.mul(m,h),l=T}return u}}function cf(r){if(r%ho===rf){let e=(r+Ue)/ho;return function(n,s){let i=n.pow(s,e);if(!n.eql(n.sqr(i),s))throw new Error("Cannot find square root");return i}}if(r%Zc===Wc){let e=(r-Wc)/Zc;return function(n,s){let i=n.mul(s,$r),o=n.pow(i,e),a=n.mul(s,o),c=n.mul(n.mul(a,$r),o),l=n.mul(a,n.sub(c,n.ONE));if(!n.eql(n.sqr(l),s))throw new Error("Cannot find square root");return l}}return r%sf,af(r)}var lf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function fo(r){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=lf.reduce((n,s)=>(n[s]="function",n),e);return xr(r,t)}function uf(r,e,t){if(t<Ge)throw new Error("Expected power > 0");if(t===Ge)return r.ONE;if(t===Ue)return e;let n=r.ONE,s=e;for(;t>Ge;)t&Ue&&(n=r.mul(n,s)),s=r.sqr(s),t>>=Ue;return n}function hf(r,e){let t=new Array(e.length),n=e.reduce((i,o,a)=>r.is0(o)?i:(t[a]=i,r.mul(i,o)),r.ONE),s=r.inv(n);return e.reduceRight((i,o,a)=>r.is0(o)?i:(t[a]=r.mul(i,t[a]),r.mul(i,o)),s),t}function po(r,e){let t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function Jc(r,e,t=!1,n={}){if(r<=Ge)throw new Error(`Expected Field ORDER > 0, got ${r}`);let{nBitLength:s,nByteLength:i}=po(r,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let o=cf(r),a=Object.freeze({ORDER:r,BITS:s,BYTES:i,MASK:Yn(s),ZERO:Ge,ONE:Ue,create:c=>nt(c,r),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Ge<=c&&c<r},is0:c=>c===Ge,isOdd:c=>(c&Ue)===Ue,neg:c=>nt(-c,r),eql:(c,l)=>c===l,sqr:c=>nt(c*c,r),add:(c,l)=>nt(c+l,r),sub:(c,l)=>nt(c-l,r),mul:(c,l)=>nt(c*l,r),pow:(c,l)=>uf(a,c,l),div:(c,l)=>nt(c*Ys(l,r),r),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>Ys(c,r),sqrt:n.sqrt||(c=>o(a,c)),invertBatch:c=>hf(a,c),cmov:(c,l,h)=>h?l:c,toBytes:c=>t?qs(c,i):wr(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return t?zs(c):Zt(c)}});return Object.freeze(a)}function Xc(r){if(typeof r!="bigint")throw new Error("field order must be bigint");let e=r.toString(2).length;return Math.ceil(e/8)}function mo(r){let e=Xc(r);return e+Math.ceil(e/2)}function Qc(r,e,t=!1){let n=r.length,s=Xc(e),i=mo(e);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);let o=t?Zt(r):zs(r),a=nt(o,e-Ue)+Ue;return t?qs(a,s):wr(a,s)}var pf=BigInt(0),go=BigInt(1);function el(r,e){let t=(s,i)=>{let o=i.negate();return s?o:i},n=s=>{let i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:t,unsafeLadder(s,i){let o=r.ZERO,a=s;for(;i>pf;)i&go&&(o=o.add(a)),a=a.double(),i>>=go;return o},precomputeWindow(s,i){let{windows:o,windowSize:a}=n(i),c=[],l=s,h=l;for(let u=0;u<o;u++){h=l,c.push(h);for(let m=1;m<a;m++)h=h.add(l),c.push(h);l=h.double()}return c},wNAF(s,i,o){let{windows:a,windowSize:c}=n(s),l=r.ZERO,h=r.BASE,u=BigInt(2**s-1),m=2**s,T=BigInt(s);for(let y=0;y<a;y++){let d=y*c,A=Number(o&u);o>>=T,A>c&&(A-=m,o+=go);let p=d,b=d+Math.abs(A)-1,N=y%2!==0,$=A<0;A===0?h=h.add(t(N,i[p])):l=l.add(t($,i[b]))}return{p:l,f:h}},wNAFCached(s,i,o,a){let c=s._WINDOW_SIZE||1,l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function yo(r){return fo(r.Fp),xr(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(Xr(kt(kt({},po(r.n,r.nBitLength)),r),{p:r.Fp.ORDER}))}function df(r){let e=yo(r);xr(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:t,Fp:n,a:s}=e;if(t){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze(kt({},e))}var{bytesToNumberBE:mf,hexToBytes:gf}=uo,Ur={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(r){let{Err:e}=Ur;if(r.length<2||r[0]!==2)throw new e("Invalid signature integer tag");let t=r[1],n=r.subarray(2,t+2);if(!t||n.length!==t)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:mf(n),l:r.subarray(t+2)}},toSig(r){let{Err:e}=Ur,t=typeof r=="string"?gf(r):r;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:s,l:i}=Ur._parseInt(t.subarray(2)),{d:o,l:a}=Ur._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(r){let e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,t=l=>{let h=l.toString(16);return h.length&1?`0${h}`:h},n=e(t(r.s)),s=e(t(r.r)),i=n.length/2,o=s.length/2,a=t(i),c=t(o);return`30${t(o+i+4)}02${c}${s}02${a}${n}`}},Jt=BigInt(0),Et=BigInt(1),D0=BigInt(2),tl=BigInt(3),V0=BigInt(4);function yf(r){let e=df(r),{Fp:t}=e,n=e.toBytes||((y,d,A)=>{let p=d.toAffine();return mn(Uint8Array.from([4]),t.toBytes(p.x),t.toBytes(p.y))}),s=e.fromBytes||(y=>{let d=y.subarray(1),A=t.fromBytes(d.subarray(0,t.BYTES)),p=t.fromBytes(d.subarray(t.BYTES,2*t.BYTES));return{x:A,y:p}});function i(y){let{a:d,b:A}=e,p=t.sqr(y),b=t.mul(p,y);return t.add(t.add(b,t.mul(y,d)),A)}if(!t.eql(t.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(y){return typeof y=="bigint"&&Jt<y&&y<e.n}function a(y){if(!o(y))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(y){let{allowedPrivateKeyLengths:d,nByteLength:A,wrapPrivateKey:p,n:b}=e;if(d&&typeof y!="bigint"){if(y instanceof Uint8Array&&(y=Pr(y)),typeof y!="string"||!d.includes(y.length))throw new Error("Invalid key");y=y.padStart(A*2,"0")}let N;try{N=typeof y=="bigint"?y:Zt(pt("private key",y,A))}catch($){throw new Error(`private key must be ${A} bytes, hex or bigint, not ${typeof y}`)}return p&&(N=nt(N,b)),a(N),N}let l=new Map;function h(y){if(!(y instanceof u))throw new Error("ProjectivePoint expected")}class u{constructor(d,A,p){if(this.px=d,this.py=A,this.pz=p,d==null||!t.isValid(d))throw new Error("x required");if(A==null||!t.isValid(A))throw new Error("y required");if(p==null||!t.isValid(p))throw new Error("z required")}static fromAffine(d){let{x:A,y:p}=d||{};if(!d||!t.isValid(A)||!t.isValid(p))throw new Error("invalid affine point");if(d instanceof u)throw new Error("projective point not allowed");let b=N=>t.eql(N,t.ZERO);return b(A)&&b(p)?u.ZERO:new u(A,p,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(d){let A=t.invertBatch(d.map(p=>p.pz));return d.map((p,b)=>p.toAffine(A[b])).map(u.fromAffine)}static fromHex(d){let A=u.fromAffine(s(pt("pointHex",d)));return A.assertValidity(),A}static fromPrivateKey(d){return u.BASE.multiply(c(d))}_setWindowSize(d){this._WINDOW_SIZE=d,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:d,y:A}=this.toAffine();if(!t.isValid(d)||!t.isValid(A))throw new Error("bad point: x or y not FE");let p=t.sqr(A),b=i(d);if(!t.eql(p,b))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:d}=this.toAffine();if(t.isOdd)return!t.isOdd(d);throw new Error("Field doesn't support isOdd")}equals(d){h(d);let{px:A,py:p,pz:b}=this,{px:N,py:$,pz:q}=d,w=t.eql(t.mul(A,q),t.mul(N,b)),L=t.eql(t.mul(p,q),t.mul($,b));return w&&L}negate(){return new u(this.px,t.neg(this.py),this.pz)}double(){let{a:d,b:A}=e,p=t.mul(A,tl),{px:b,py:N,pz:$}=this,q=t.ZERO,w=t.ZERO,L=t.ZERO,ee=t.mul(b,b),xe=t.mul(N,N),P=t.mul($,$),O=t.mul(b,N);return O=t.add(O,O),L=t.mul(b,$),L=t.add(L,L),q=t.mul(d,L),w=t.mul(p,P),w=t.add(q,w),q=t.sub(xe,w),w=t.add(xe,w),w=t.mul(q,w),q=t.mul(O,q),L=t.mul(p,L),P=t.mul(d,P),O=t.sub(ee,P),O=t.mul(d,O),O=t.add(O,L),L=t.add(ee,ee),ee=t.add(L,ee),ee=t.add(ee,P),ee=t.mul(ee,O),w=t.add(w,ee),P=t.mul(N,$),P=t.add(P,P),ee=t.mul(P,O),q=t.sub(q,ee),L=t.mul(P,xe),L=t.add(L,L),L=t.add(L,L),new u(q,w,L)}add(d){h(d);let{px:A,py:p,pz:b}=this,{px:N,py:$,pz:q}=d,w=t.ZERO,L=t.ZERO,ee=t.ZERO,xe=e.a,P=t.mul(e.b,tl),O=t.mul(A,N),B=t.mul(p,$),v=t.mul(b,q),G=t.add(A,p),z=t.add(N,$);G=t.mul(G,z),z=t.add(O,B),G=t.sub(G,z),z=t.add(A,b);let j=t.add(N,q);return z=t.mul(z,j),j=t.add(O,v),z=t.sub(z,j),j=t.add(p,b),w=t.add($,q),j=t.mul(j,w),w=t.add(B,v),j=t.sub(j,w),ee=t.mul(xe,z),w=t.mul(P,v),ee=t.add(w,ee),w=t.sub(B,ee),ee=t.add(B,ee),L=t.mul(w,ee),B=t.add(O,O),B=t.add(B,O),v=t.mul(xe,v),z=t.mul(P,z),B=t.add(B,v),v=t.sub(O,v),v=t.mul(xe,v),z=t.add(z,v),O=t.mul(B,z),L=t.add(L,O),O=t.mul(j,z),w=t.mul(G,w),w=t.sub(w,O),O=t.mul(G,B),ee=t.mul(j,ee),ee=t.add(ee,O),new u(w,L,ee)}subtract(d){return this.add(d.negate())}is0(){return this.equals(u.ZERO)}wNAF(d){return T.wNAFCached(this,l,d,A=>{let p=t.invertBatch(A.map(b=>b.pz));return A.map((b,N)=>b.toAffine(p[N])).map(u.fromAffine)})}multiplyUnsafe(d){let A=u.ZERO;if(d===Jt)return A;if(a(d),d===Et)return this;let{endo:p}=e;if(!p)return T.unsafeLadder(this,d);let{k1neg:b,k1:N,k2neg:$,k2:q}=p.splitScalar(d),w=A,L=A,ee=this;for(;N>Jt||q>Jt;)N&Et&&(w=w.add(ee)),q&Et&&(L=L.add(ee)),ee=ee.double(),N>>=Et,q>>=Et;return b&&(w=w.negate()),$&&(L=L.negate()),L=new u(t.mul(L.px,p.beta),L.py,L.pz),w.add(L)}multiply(d){a(d);let A=d,p,b,{endo:N}=e;if(N){let{k1neg:$,k1:q,k2neg:w,k2:L}=N.splitScalar(A),{p:ee,f:xe}=this.wNAF(q),{p:P,f:O}=this.wNAF(L);ee=T.constTimeNegate($,ee),P=T.constTimeNegate(w,P),P=new u(t.mul(P.px,N.beta),P.py,P.pz),p=ee.add(P),b=xe.add(O)}else{let{p:$,f:q}=this.wNAF(A);p=$,b=q}return u.normalizeZ([p,b])[0]}multiplyAndAddUnsafe(d,A,p){let b=u.BASE,N=(q,w)=>w===Jt||w===Et||!q.equals(b)?q.multiplyUnsafe(w):q.multiply(w),$=N(this,A).add(N(d,p));return $.is0()?void 0:$}toAffine(d){let{px:A,py:p,pz:b}=this,N=this.is0();d==null&&(d=N?t.ONE:t.inv(b));let $=t.mul(A,d),q=t.mul(p,d),w=t.mul(b,d);if(N)return{x:t.ZERO,y:t.ZERO};if(!t.eql(w,t.ONE))throw new Error("invZ was invalid");return{x:$,y:q}}isTorsionFree(){let{h:d,isTorsionFree:A}=e;if(d===Et)return!0;if(A)return A(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:d,clearCofactor:A}=e;return d===Et?this:A?A(u,this):this.multiplyUnsafe(e.h)}toRawBytes(d=!0){return this.assertValidity(),n(u,this,d)}toHex(d=!0){return Pr(this.toRawBytes(d))}}u.BASE=new u(e.Gx,e.Gy,t.ONE),u.ZERO=new u(t.ZERO,t.ONE,t.ZERO);let m=e.nBitLength,T=el(u,e.endo?Math.ceil(m/2):m);return{CURVE:e,ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function bf(r){let e=yo(r);return xr(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze(kt({lowS:!0},e))}function rl(r){let e=bf(r),{Fp:t,n}=e,s=t.BYTES+1,i=2*t.BYTES+1;function o(z){return Jt<z&&z<t.ORDER}function a(z){return nt(z,n)}function c(z){return Ys(z,n)}let{ProjectivePoint:l,normPrivateKeyToScalar:h,weierstrassEquation:u,isWithinCurveOrder:m}=yf(Xr(kt({},e),{toBytes(z,j,re){let le=j.toAffine(),de=t.toBytes(le.x),Q=mn;return re?Q(Uint8Array.from([j.hasEvenY()?2:3]),de):Q(Uint8Array.from([4]),de,t.toBytes(le.y))},fromBytes(z){let j=z.length,re=z[0],le=z.subarray(1);if(j===s&&(re===2||re===3)){let de=Zt(le);if(!o(de))throw new Error("Point is not on curve");let Q=u(de),se=t.sqrt(Q),K=(se&Et)===Et;return(re&1)===1!==K&&(se=t.neg(se)),{x:de,y:se}}else if(j===i&&re===4){let de=t.fromBytes(le.subarray(0,t.BYTES)),Q=t.fromBytes(le.subarray(t.BYTES,2*t.BYTES));return{x:de,y:Q}}else throw new Error(`Point of length ${j} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}})),T=z=>Pr(wr(z,e.nByteLength));function y(z){let j=n>>Et;return z>j}function d(z){return y(z)?a(-z):z}let A=(z,j,re)=>Zt(z.slice(j,re));class p{constructor(j,re,le){this.r=j,this.s=re,this.recovery=le,this.assertValidity()}static fromCompact(j){let re=e.nByteLength;return j=pt("compactSignature",j,re*2),new p(A(j,0,re),A(j,re,2*re))}static fromDER(j){let{r:re,s:le}=Ur.toSig(pt("DER",j));return new p(re,le)}assertValidity(){if(!m(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!m(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(j){return new p(this.r,this.s,j)}recoverPublicKey(j){let{r:re,s:le,recovery:de}=this,Q=L(pt("msgHash",j));if(de==null||![0,1,2,3].includes(de))throw new Error("recovery id invalid");let se=de===2||de===3?re+e.n:re;if(se>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");let K=de&1?"03":"02",C=l.fromHex(K+T(se)),me=c(se),Pe=a(-Q*me),Se=a(le*me),Ee=l.BASE.multiplyAndAddUnsafe(C,Pe,Se);if(!Ee)throw new Error("point at infinify");return Ee.assertValidity(),Ee}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new p(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return vr(this.toDERHex())}toDERHex(){return Ur.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return vr(this.toCompactHex())}toCompactHex(){return T(this.r)+T(this.s)}}let b={isValidPrivateKey(z){try{return h(z),!0}catch(j){return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{let z=mo(e.n);return Qc(e.randomBytes(z),e.n)},precompute(z=8,j=l.BASE){return j._setWindowSize(z),j.multiply(BigInt(3)),j}};function N(z,j=!0){return l.fromPrivateKey(z).toRawBytes(j)}function $(z){let j=z instanceof Uint8Array,re=typeof z=="string",le=(j||re)&&z.length;return j?le===s||le===i:re?le===2*s||le===2*i:z instanceof l}function q(z,j,re=!0){if($(z))throw new Error("first arg must be private key");if(!$(j))throw new Error("second arg must be public key");return l.fromHex(j).multiply(h(z)).toRawBytes(re)}let w=e.bits2int||function(z){let j=Zt(z),re=z.length*8-e.nBitLength;return re>0?j>>BigInt(re):j},L=e.bits2int_modN||function(z){return a(w(z))},ee=Yn(e.nBitLength);function xe(z){if(typeof z!="bigint")throw new Error("bigint expected");if(!(Jt<=z&&z<ee))throw new Error(`bigint expected < 2^${e.nBitLength}`);return wr(z,e.nByteLength)}function P(z,j,re=O){if(["recovered","canonical"].some(E=>E in re))throw new Error("sign() legacy options not supported");let{hash:le,randomBytes:de}=e,{lowS:Q,prehash:se,extraEntropy:K}=re;Q==null&&(Q=!0),z=pt("msgHash",z),se&&(z=pt("prehashed msgHash",le(z)));let C=L(z),me=h(j),Pe=[xe(me),xe(C)];if(K!=null){let E=K===!0?de(t.BYTES):K;Pe.push(pt("extraEntropy",E))}let Se=mn(...Pe),Ee=C;function S(E){let M=w(E);if(!m(M))return;let X=c(M),ie=l.BASE.multiply(M).toAffine(),oe=a(ie.x);if(oe===Jt)return;let ue=a(X*a(Ee+oe*me));if(ue===Jt)return;let _=(ie.x===oe?0:2)|Number(ie.y&Et),J=ue;return Q&&y(ue)&&(J=d(ue),_^=1),new p(oe,J,_)}return{seed:Se,k2sig:S}}let O={lowS:e.lowS,prehash:!1},B={lowS:e.lowS,prehash:!1};function v(z,j,re=O){let{seed:le,k2sig:de}=P(z,j,re),Q=e;return lo(Q.hash.outputLen,Q.nByteLength,Q.hmac)(le,de)}l.BASE._setWindowSize(8);function G(z,j,re,le=B){var ie;let de=z;if(j=pt("msgHash",j),re=pt("publicKey",re),"strict"in le)throw new Error("options.strict was renamed to lowS");let{lowS:Q,prehash:se}=le,K,C;try{if(typeof de=="string"||de instanceof Uint8Array)try{K=p.fromDER(de)}catch(oe){if(!(oe instanceof Ur.Err))throw oe;K=p.fromCompact(de)}else if(typeof de=="object"&&typeof de.r=="bigint"&&typeof de.s=="bigint"){let{r:oe,s:ue}=de;K=new p(oe,ue)}else throw new Error("PARSE");C=l.fromHex(re)}catch(oe){if(oe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Q&&K.hasHighS())return!1;se&&(j=e.hash(j));let{r:me,s:Pe}=K,Se=L(j),Ee=c(Pe),S=a(Se*Ee),E=a(me*Ee),M=(ie=l.BASE.multiplyAndAddUnsafe(C,S,E))==null?void 0:ie.toAffine();return M?a(M.x)===me:!1}return{CURVE:e,getPublicKey:N,getSharedSecret:q,sign:v,verify:G,ProjectivePoint:l,Signature:p,utils:b}}function wf(r){return{hash:r,hmac:(e,...t)=>io(r,e,Ec(...t)),randomBytes:Ac}}function nl(r,e){let t=n=>rl(kt(kt({},r),wf(n)));return Object.freeze(Xr(kt({},t(e)),{create:t}))}var ol=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),sl=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),xf=BigInt(1),bo=BigInt(2),il=(r,e)=>(r+e/bo)/e;function Ef(r){let e=ol,t=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=r*r*r%e,h=l*l*r%e,u=dt(h,t,e)*h%e,m=dt(u,t,e)*h%e,T=dt(m,bo,e)*l%e,y=dt(T,s,e)*T%e,d=dt(y,i,e)*y%e,A=dt(d,a,e)*d%e,p=dt(A,c,e)*A%e,b=dt(p,a,e)*d%e,N=dt(b,t,e)*h%e,$=dt(N,o,e)*y%e,q=dt($,n,e)*l%e,w=dt(q,bo,e);if(!wo.eql(wo.sqr(w),r))throw new Error("Cannot find square root");return w}var wo=Jc(ol,void 0,void 0,{sqrt:Ef}),Xt=nl({a:BigInt(0),b:BigInt(7),Fp:wo,n:sl,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{let e=sl,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-xf*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,o=BigInt("0x100000000000000000000000000000000"),a=il(i*r,e),c=il(-n*r,e),l=nt(r-a*t-c*s,e),h=nt(-a*n-c*i,e),u=l>o,m=h>o;if(u&&(l=e-l),m&&(h=e-h),l>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:u,k1:l,k2neg:m,k2:h}}}},Vc),Q0=BigInt(0);var em=Xt.ProjectivePoint;var js="0x0000000000000000000000000000000000000000000000000000000000000000";var xo=`Ethereum Signed Message:
`;var al=BigInt(0),cl=BigInt(1),ll=BigInt(2),ul=BigInt(27),hl=BigInt(28),Ws=BigInt(35),gn={};function fl(r){return Dn(Kn(r),32)}var yn,bn,wn,_r,Nt=class Nt{constructor(e,t,n,s){be(this,yn,void 0);be(this,bn,void 0);be(this,wn,void 0);be(this,_r,void 0);fr(e,gn,"Signature"),ye(this,yn,t),ye(this,bn,n),ye(this,wn,s),ye(this,_r,null)}get r(){return Y(this,yn)}set r(e){W(pr(e)===32,"invalid r","value",e),ye(this,yn,we(e))}get s(){return Y(this,bn)}set s(e){W(pr(e)===32,"invalid s","value",e);let t=we(e);W(parseInt(t.substring(0,3))<8,"non-canonical s","value",t),ye(this,bn,t)}get v(){return Y(this,wn)}set v(e){let t=je(e,"value");W(t===27||t===28,"invalid v","v",e),ye(this,wn,t)}get networkV(){return Y(this,_r)}get legacyChainId(){let e=this.networkV;return e==null?null:Nt.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){let e=Le(this.s);return this.yParity&&(e[0]|=128),we(e)}get compactSerialized(){return tt([this.r,this.yParityAndS])}get serialized(){return tt([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){let e=new Nt(gn,this.r,this.s,this.v);return this.networkV&&ye(e,_r,this.networkV),e}toJSON(){let e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(e){let t=Ke(e,"v");return t==ul||t==hl?al:(W(t>=Ws,"invalid EIP-155 v","v",e),(t-Ws)/ll)}static getChainIdV(e,t){return Ke(e)*ll+BigInt(35+t-27)}static getNormalizedV(e){let t=Ke(e);return t===al||t===ul?27:t===cl||t===hl?28:(W(t>=Ws,"invalid v","v",e),t&cl?27:28)}static from(e){function t(l,h){W(l,h,"signature",e)}if(e==null)return new Nt(gn,js,js,27);if(typeof e=="string"){let l=Le(e,"signature");if(l.length===64){let h=we(l.slice(0,32)),u=l.slice(32,64),m=u[0]&128?28:27;return u[0]&=127,new Nt(gn,h,we(u),m)}if(l.length===65){let h=we(l.slice(0,32)),u=l.slice(32,64);t((u[0]&128)===0,"non-canonical s");let m=Nt.getNormalizedV(l[64]);return new Nt(gn,h,we(u),m)}t(!1,"invalid raw signature length")}if(e instanceof Nt)return e.clone();let n=e.r;t(n!=null,"missing r");let s=fl(n),i=function(l,h){if(l!=null)return fl(l);if(h!=null){t(et(h,32),"invalid yParityAndS");let u=Le(h);return u[0]&=127,we(u)}t(!1,"missing s")}(e.s,e.yParityAndS);t((Le(i)[0]&128)==0,"non-canonical s");let{networkV:o,v:a}=function(l,h,u){if(l!=null){let m=Ke(l);return{networkV:m>=Ws?m:void 0,v:Nt.getNormalizedV(m)}}if(h!=null)return t(et(h,32),"invalid yParityAndS"),{v:Le(h)[0]&128?28:27};if(u!=null){switch(je(u,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new Nt(gn,s,i,a);return o&&ye(c,_r,o),t(e.yParity==null||je(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};yn=new WeakMap,bn=new WeakMap,wn=new WeakMap,_r=new WeakMap;var jn=Nt;var Qt,Fr=class Fr{constructor(e){be(this,Qt,void 0);W(pr(e)===32,"invalid private key","privateKey","[REDACTED]"),ye(this,Qt,we(e))}get privateKey(){return Y(this,Qt)}get publicKey(){return Fr.computePublicKey(Y(this,Qt))}get compressedPublicKey(){return Fr.computePublicKey(Y(this,Qt),!0)}sign(e){W(pr(e)===32,"invalid digest length","digest",e);let t=Xt.sign(He(e),He(Y(this,Qt)),{lowS:!0});return jn.from({r:mr(t.r,32),s:mr(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){let t=Fr.computePublicKey(e);return we(Xt.getSharedSecret(He(Y(this,Qt)),Le(t),!1))}static computePublicKey(e,t){let n=Le(e,"key");if(n.length===32){let i=Xt.getPublicKey(n,!!t);return we(i)}if(n.length===64){let i=new Uint8Array(65);i[0]=4,i.set(n,1),n=i}let s=Xt.ProjectivePoint.fromHex(n);return we(s.toRawBytes(t))}static recoverPublicKey(e,t){W(pr(e)===32,"invalid digest length","digest",e);let n=jn.from(t),s=Xt.Signature.fromCompact(He(tt([n.r,n.s])));s=s.addRecoveryBit(n.yParity);let i=s.recoverPublicKey(He(e));return W(i!=null,"invalid signautre for digest","signature",t),"0x"+i.toHex(!1)}static addPoints(e,t,n){let s=Xt.ProjectivePoint.fromHex(Fr.computePublicKey(e).substring(2)),i=Xt.ProjectivePoint.fromHex(Fr.computePublicKey(t).substring(2));return"0x"+s.add(i).toHex(!!n)}};Qt=new WeakMap;var xn=Fr;var Tf=BigInt(0),Af=BigInt(36);function pl(r){r=r.toLowerCase();let e=r.substring(2).split(""),t=new Uint8Array(40);for(let s=0;s<40;s++)t[s]=e[s].charCodeAt(0);let n=Le(rt(t));for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(n[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}var Eo={};for(let r=0;r<10;r++)Eo[String(r)]=String(r);for(let r=0;r<26;r++)Eo[String.fromCharCode(65+r)]=String(10+r);var dl=15;function kf(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(n=>Eo[n]).join("");for(;e.length>=dl;){let n=e.substring(0,dl);e=parseInt(n,10)%97+e.substring(n.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}var Sf=function(){let r={};for(let e=0;e<36;e++){let t="0123456789abcdefghijklmnopqrstuvwxyz"[e];r[t]=BigInt(e)}return r}();function Bf(r){r=r.toLowerCase();let e=Tf;for(let t=0;t<r.length;t++)e=e*Af+Sf[r[t]];return e}function Ze(r){if(W(typeof r=="string","invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/)){r.startsWith("0x")||(r="0x"+r);let e=pl(r);return W(!r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===r,"bad address checksum","address",r),e}if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){W(r.substring(2,4)===kf(r),"bad icap checksum","address",r);let e=Bf(r.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return pl("0x"+e)}W(!1,"invalid address","address",r)}function Wn(r){return r&&typeof r.getAddress=="function"}async function To(r,e){let t=await e;return(t==null||t==="0x0000000000000000000000000000000000000000")&&(ce(typeof r!="string","unconfigured name","UNCONFIGURED_NAME",{value:r}),W(!1,"invalid AddressLike value; did not resolve to a value address","target",r)),Ze(t)}function Er(r,e){if(typeof r=="string")return r.match(/^0x[0-9a-f]{40}$/i)?Ze(r):(ce(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),To(r,e.resolveName(r)));if(Wn(r))return To(r,r.getAddress());if(r&&typeof r.then=="function")return To(r,r);W(!1,"unsupported addressable value","target",r)}var Ot={};function ae(r,e){let t=!1;return e<0&&(t=!0,e*=-1),new Re(Ot,`${t?"":"u"}int${e}`,r,{signed:t,width:e})}function Be(r,e){return new Re(Ot,`bytes${e||""}`,r,{size:e})}var ml=Symbol.for("_ethers_typed"),Hr,Rt=class Rt{constructor(e,t,n,s){U(this,"type");U(this,"value");be(this,Hr,void 0);U(this,"_typedSymbol");s==null&&(s=null),fr(Ot,e,"Typed"),pe(this,{_typedSymbol:ml,type:t,value:n}),ye(this,Hr,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return Y(this,Hr)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return Y(this,Hr)===!0?-1:Y(this,Hr)===!1?this.value.length:null}static from(e,t){return new Rt(Ot,e,t)}static uint8(e){return ae(e,8)}static uint16(e){return ae(e,16)}static uint24(e){return ae(e,24)}static uint32(e){return ae(e,32)}static uint40(e){return ae(e,40)}static uint48(e){return ae(e,48)}static uint56(e){return ae(e,56)}static uint64(e){return ae(e,64)}static uint72(e){return ae(e,72)}static uint80(e){return ae(e,80)}static uint88(e){return ae(e,88)}static uint96(e){return ae(e,96)}static uint104(e){return ae(e,104)}static uint112(e){return ae(e,112)}static uint120(e){return ae(e,120)}static uint128(e){return ae(e,128)}static uint136(e){return ae(e,136)}static uint144(e){return ae(e,144)}static uint152(e){return ae(e,152)}static uint160(e){return ae(e,160)}static uint168(e){return ae(e,168)}static uint176(e){return ae(e,176)}static uint184(e){return ae(e,184)}static uint192(e){return ae(e,192)}static uint200(e){return ae(e,200)}static uint208(e){return ae(e,208)}static uint216(e){return ae(e,216)}static uint224(e){return ae(e,224)}static uint232(e){return ae(e,232)}static uint240(e){return ae(e,240)}static uint248(e){return ae(e,248)}static uint256(e){return ae(e,256)}static uint(e){return ae(e,256)}static int8(e){return ae(e,-8)}static int16(e){return ae(e,-16)}static int24(e){return ae(e,-24)}static int32(e){return ae(e,-32)}static int40(e){return ae(e,-40)}static int48(e){return ae(e,-48)}static int56(e){return ae(e,-56)}static int64(e){return ae(e,-64)}static int72(e){return ae(e,-72)}static int80(e){return ae(e,-80)}static int88(e){return ae(e,-88)}static int96(e){return ae(e,-96)}static int104(e){return ae(e,-104)}static int112(e){return ae(e,-112)}static int120(e){return ae(e,-120)}static int128(e){return ae(e,-128)}static int136(e){return ae(e,-136)}static int144(e){return ae(e,-144)}static int152(e){return ae(e,-152)}static int160(e){return ae(e,-160)}static int168(e){return ae(e,-168)}static int176(e){return ae(e,-176)}static int184(e){return ae(e,-184)}static int192(e){return ae(e,-192)}static int200(e){return ae(e,-200)}static int208(e){return ae(e,-208)}static int216(e){return ae(e,-216)}static int224(e){return ae(e,-224)}static int232(e){return ae(e,-232)}static int240(e){return ae(e,-240)}static int248(e){return ae(e,-248)}static int256(e){return ae(e,-256)}static int(e){return ae(e,-256)}static bytes1(e){return Be(e,1)}static bytes2(e){return Be(e,2)}static bytes3(e){return Be(e,3)}static bytes4(e){return Be(e,4)}static bytes5(e){return Be(e,5)}static bytes6(e){return Be(e,6)}static bytes7(e){return Be(e,7)}static bytes8(e){return Be(e,8)}static bytes9(e){return Be(e,9)}static bytes10(e){return Be(e,10)}static bytes11(e){return Be(e,11)}static bytes12(e){return Be(e,12)}static bytes13(e){return Be(e,13)}static bytes14(e){return Be(e,14)}static bytes15(e){return Be(e,15)}static bytes16(e){return Be(e,16)}static bytes17(e){return Be(e,17)}static bytes18(e){return Be(e,18)}static bytes19(e){return Be(e,19)}static bytes20(e){return Be(e,20)}static bytes21(e){return Be(e,21)}static bytes22(e){return Be(e,22)}static bytes23(e){return Be(e,23)}static bytes24(e){return Be(e,24)}static bytes25(e){return Be(e,25)}static bytes26(e){return Be(e,26)}static bytes27(e){return Be(e,27)}static bytes28(e){return Be(e,28)}static bytes29(e){return Be(e,29)}static bytes30(e){return Be(e,30)}static bytes31(e){return Be(e,31)}static bytes32(e){return Be(e,32)}static address(e){return new Rt(Ot,"address",e)}static bool(e){return new Rt(Ot,"bool",!!e)}static bytes(e){return new Rt(Ot,"bytes",e)}static string(e){return new Rt(Ot,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new Rt(Ot,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===ml}static dereference(e,t){if(Rt.isTyped(e)){if(e.type!==t)throw new Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}};Hr=new WeakMap;var Re=Rt;var Zs=class extends De{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let n=Re.dereference(t,"string");try{n=Ze(n)}catch(s){return this._throwError(s.message,t)}return e.writeValue(n)}decode(e){return Ze(mr(e.readValue(),20))}};var Js=class extends De{constructor(t){super(t.name,t.type,"_",t.dynamic);U(this,"coder");this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,n){return this.coder.encode(t,n)}decode(t){return this.coder.decode(t)}};function Ao(r,e,t){let n=[];if(Array.isArray(t))n=t;else if(t&&typeof t=="object"){let c={};n=e.map(l=>{let h=l.localName;return ce(h,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:t}),ce(!c[h],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:t}),c[h]=!0,t[h]})}else W(!1,"invalid tuple value","tuple",t);W(e.length===n.length,"types/value length mismatch","tuple",t);let s=new Mr,i=new Mr,o=[];e.forEach((c,l)=>{let h=n[l];if(c.dynamic){let u=i.length;c.encode(i,h);let m=s.writeUpdatableValue();o.push(T=>{m(T+u)})}else c.encode(s,h)}),o.forEach(c=>{c(s.length)});let a=r.appendWriter(s);return a+=r.appendWriter(i),a}function ko(r,e){let t=[],n=[],s=r.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=r.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(_t(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(r)}catch(a){if(_t(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");t.push(o),n.push(i.localName||null)}),Ir.fromItems(t,n)}var Xs=class extends De{constructor(t,n,s){let i=t.type+"["+(n>=0?n:"")+"]",o=n===-1||t.dynamic;super("array",i,s,o);U(this,"coder");U(this,"length");pe(this,{coder:t,length:n})}defaultValue(){let t=this.coder.defaultValue(),n=[];for(let s=0;s<this.length;s++)n.push(t);return n}encode(t,n){let s=Re.dereference(n,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,t.writeValue(s.length)),Hn(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return Ao(t,o,s)}decode(t){let n=this.length;n===-1&&(n=t.readIndex(),ce(n*We<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:n*We,length:t.dataLength}));let s=[];for(let i=0;i<n;i++)s.push(new Js(this.coder));return ko(t,s)}};var Qs=class extends De{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){let n=Re.dereference(t,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}};var Zn=class extends De{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=He(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readIndex(),!0)}},ei=class extends Zn{constructor(e){super("bytes",e)}decode(e){return we(super.decode(e))}};var ti=class extends De{constructor(t,n){let s="bytes"+String(t);super(s,s,n,!1);U(this,"size");pe(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(t,n){let s=He(Re.dereference(n,this.type));return s.length!==this.size&&this._throwError("incorrect data length",n),t.writeBytes(s)}decode(t){return we(t.readBytes(this.size))}};var Of=new Uint8Array([]),ri=class extends De{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return t!=null&&this._throwError("not null",t),e.writeBytes(Of)}decode(e){return e.readBytes(0),null}};var Rf=BigInt(0),Lf=BigInt(1),If=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),ni=class extends De{constructor(t,n,s){let i=(n?"int":"uint")+t*8;super(i,i,s,!1);U(this,"size");U(this,"signed");pe(this,{size:t,signed:n},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,n){let s=Ke(Re.dereference(n,this.type)),i=fn(If,We*8);if(this.signed){let o=fn(i,this.size*8-1);(s>o||s<-(o+Lf))&&this._throwError("value out-of-bounds",n),s=eo(s,8*We)}else(s<Rf||s>fn(i,this.size*8))&&this._throwError("value out-of-bounds",n);return t.writeValue(s)}decode(t){let n=fn(t.readValue(),this.size*8);return this.signed&&(n=Qi(n,this.size*8)),n}};var si=class extends Zn{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,jt(Re.dereference(t,"string")))}decode(e){return ro(super.decode(e))}};var Dr=class extends De{constructor(t,n){let s=!1,i=[];t.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});let o="tuple("+i.join(",")+")";super("tuple",o,n,s);U(this,"coders");pe(this,{coders:Object.freeze(t.slice())})}defaultValue(){let t=[];this.coders.forEach(s=>{t.push(s.defaultValue())});let n=this.coders.reduce((s,i)=>{let o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||n[o]!==1||(o==="length"&&(o="_length"),t[o]==null&&(t[o]=t[i]))}),Object.freeze(t)}encode(t,n){let s=Re.dereference(n,"tuple");return Ao(t,this.coders,s)}decode(t){return ko(t,this.coders)}};function er(r){return rt(jt(r))}function So(r,e){return{address:Ze(r),storageKeys:e.map((t,n)=>(W(et(t,32),"invalid slot",`storageKeys[${n}]`,t),t.toLowerCase()))}}function Bo(r){if(Array.isArray(r))return r.map((t,n)=>Array.isArray(t)?(W(t.length===2,"invalid slot set",`value[${n}]`,t),So(t[0],t[1])):(W(t!=null&&typeof t=="object","invalid address-slot set","value",r),So(t.address,t.storageKeys)));W(r!=null&&typeof r=="object","invalid access list","value",r);let e=Object.keys(r).map(t=>{let n=r[t].reduce((s,i)=>(s[i]=!0,s),{});return So(t,Object.keys(n).sort())});return e.sort((t,n)=>t.address.localeCompare(n.address)),e}function gl(r){let e;return typeof r=="string"?e=xn.computePublicKey(r,!1):e=r.publicKey,Ze(rt("0x"+e.substring(4)).substring(26))}function Co(r,e){return gl(xn.recoverPublicKey(r,e))}function Jn(r){return typeof r=="string"&&(r=jt(r)),rt(tt([jt(xo),jt(String(r.length)),r]))}function ii(r,e){let t=Jn(r);return Co(t,e)}function ot(r){let e=new Set;return r.forEach(t=>e.add(t)),Object.freeze(e)}var Mf="external public payable",Pf=ot(Mf.split(" ")),Bl="constant external internal payable private public pure view",vf=ot(Bl.split(" ")),Cl="constructor error event fallback function receive struct",Nl=ot(Cl.split(" ")),Ol="calldata memory storage payable indexed",$f=ot(Ol.split(" ")),Uf="tuple returns",_f=[Cl,Ol,Uf,Bl].join(" "),Ff=ot(_f.split(" ")),Hf={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Df=new RegExp("^(\\s*)"),Vf=new RegExp("^([0-9]+)"),Kf=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Rl=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Ll=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$"),Je,Lt,es,No,ci=class ci{constructor(e){be(this,es);be(this,Je,void 0);be(this,Lt,void 0);ye(this,Je,0),ye(this,Lt,e.slice())}get offset(){return Y(this,Je)}get length(){return Y(this,Lt).length-Y(this,Je)}clone(){return new ci(Y(this,Lt))}reset(){ye(this,Je,0)}popKeyword(e){let t=this.peek();if(t.type!=="KEYWORD"||!e.has(t.text))throw new Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e)throw new Error(`expected ${e}; got ${JSON.stringify(this.peek())}`);return this.pop().text}popParen(){let e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");let t=Ie(this,es,No).call(this,Y(this,Je)+1,e.match+1);return ye(this,Je,e.match+1),t}popParams(){let e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");let t=[];for(;Y(this,Je)<e.match-1;){let n=this.peek().linkNext;t.push(Ie(this,es,No).call(this,Y(this,Je)+1,n)),ye(this,Je,n)}return ye(this,Je,e.match+1),t}peek(){if(Y(this,Je)>=Y(this,Lt).length)throw new Error("out-of-bounds");return Y(this,Lt)[Y(this,Je)]}peekKeyword(e){let t=this.peekType("KEYWORD");return t!=null&&e.has(t)?t:null}peekType(e){if(this.length===0)return null;let t=this.peek();return t.type===e?t.text:null}pop(){let e=this.peek();return ra(this,Je)._++,e}toString(){let e=[];for(let t=Y(this,Je);t<Y(this,Lt).length;t++){let n=Y(this,Lt)[t];e.push(`${n.type}:${n.text}`)}return`<TokenString ${e.join(" ")}>`}};Je=new WeakMap,Lt=new WeakMap,es=new WeakSet,No=function(e=0,t=0){return new ci(Y(this,Lt).slice(e,t).map(n=>Object.freeze(Object.assign({},n,{match:n.match-e,linkBack:n.linkBack-e,linkNext:n.linkNext-e}))))};var It=ci;function Tr(r){let e=[],t=o=>{let a=i<r.length?JSON.stringify(r[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)},n=[],s=[],i=0;for(;i<r.length;){let o=r.substring(i),a=o.match(Df);a&&(i+=a[1].length,o=r.substring(i));let c={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=Hf[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")n.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")n.length===0&&t("no matching open bracket"),c.match=n.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let h=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){let u=e.pop().text;h=u+h,e[e.length-1].value=je(u)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=h}continue}if(a=o.match(Kf),a){if(c.text=a[1],i+=c.text.length,Ff.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(Ll)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(Vf),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new It(e.map(o=>Object.freeze(o)))}function yl(r,e){let t=[];for(let n in e.keys())r.has(n)&&t.push(n);if(t.length>1)throw new Error(`conflicting types: ${t.join(", ")}`)}function li(r,e){if(e.peekKeyword(Nl)){let t=e.pop().text;if(t!==r)throw new Error(`expected ${r}, got ${t}`)}return e.popType("ID")}function rr(r,e){let t=new Set;for(;;){let n=r.peekType("KEYWORD");if(n==null||e&&!e.has(n))break;if(r.pop(),t.has(n))throw new Error(`duplicate keywords: ${JSON.stringify(n)}`);t.add(n)}return Object.freeze(t)}function Il(r){let e=rr(r,vf);return yl(e,ot("constant payable nonpayable".split(" "))),yl(e,ot("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function tr(r,e){return r.popParams().map(t=>ze.from(t,e))}function Ml(r){if(r.peekType("AT")){if(r.pop(),r.peekType("NUMBER"))return Ke(r.pop().text);throw new Error("invalid gas")}return null}function zr(r){if(r.length)throw new Error(`unexpected tokens: ${r.toString()}`)}var Gf=new RegExp(/^(.*)\[([0-9]*)\]$/);function bl(r){let e=r.match(Ll);if(W(e,"invalid type","type",r),r==="uint")return"uint256";if(r==="int")return"int256";if(e[2]){let t=parseInt(e[2]);W(t!==0&&t<=32,"invalid bytes length","type",r)}else if(e[3]){let t=parseInt(e[3]);W(t!==0&&t<=256&&t%8===0,"invalid numeric width","type",r)}return r}var Me={},ut=Symbol.for("_ethers_internal"),wl="_ParamTypeInternal",xl="_ErrorInternal",El="_EventInternal",Tl="_ConstructorInternal",Al="_FallbackInternal",kl="_FunctionInternal",Sl="_StructInternal",En,oi,Tt=class Tt{constructor(e,t,n,s,i,o,a,c){be(this,En);U(this,"name");U(this,"type");U(this,"baseType");U(this,"indexed");U(this,"components");U(this,"arrayLength");U(this,"arrayChildren");if(fr(e,Me,"ParamType"),Object.defineProperty(this,ut,{value:wl}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");pe(this,{name:t,type:n,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){let n=this.name||"";if(this.isArray()){let i=JSON.parse(this.arrayChildren.format("json"));return i.name=n,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}let s={type:this.baseType==="tuple"?"tuple":this.type,name:n};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?(e!=="sighash"&&(t+=this.type),t+="("+this.components.map(n=>n.format(e)).join(e==="full"?", ":",")+")"):t+=this.type,e!=="sighash"&&(this.indexed===!0&&(t+=" indexed"),e==="full"&&this.name&&(t+=" "+this.name)),t}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");let n=this;return e.map(s=>n.arrayChildren.walk(s,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");let n=this;return e.map((s,i)=>n.components[i].walk(s,t))}return t(this.type,e)}async walkAsync(e,t){let n=[],s=[e];return Ie(this,En,oi).call(this,n,e,t,i=>{s[0]=i}),n.length&&await Promise.all(n),s[0]}static from(e,t){if(Tt.isParamType(e))return e;if(typeof e=="string")try{return Tt.from(Tr(e),t)}catch(a){W(!1,"invalid param type","obj",e)}else if(e instanceof It){let a="",c="",l=null;rr(e,ot(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(d=>Tt.from(d)),a=`tuple(${l.map(d=>d.format()).join(",")})`):(a=bl(e.popType("TYPE")),c=a);let h=null,u=null;for(;e.length&&e.peekType("BRACKET");){let d=e.pop();h=new Tt(Me,"",a,c,null,l,u,h),u=d.value,a+=d.text,c="array",l=null}let m=null;if(rr(e,$f).has("indexed")){if(!t)throw new Error("");m=!0}let y=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Tt(Me,y,a,c,m,l,u,h)}let n=e.name;W(!n||typeof n=="string"&&n.match(Rl),"invalid name","obj.name",n);let s=e.indexed;s!=null&&(W(t,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(Gf);if(o){let a=parseInt(o[2]||"-1"),c=Tt.from({type:o[1],components:e.components});return new Tt(Me,n||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){let a=e.components!=null?e.components.map(l=>Tt.from(l)):null;return new Tt(Me,n||"",i,"tuple",s,a,null,null)}return i=bl(e.type),new Tt(Me,n||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[ut]===wl}};En=new WeakSet,oi=function(e,t,n,s){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(this.arrayLength!==-1&&t.length!==this.arrayLength)throw new Error("array is wrong length");let o=this.arrayChildren,a=t.slice();a.forEach((c,l)=>{var h;Ie(h=o,En,oi).call(h,e,c,n,u=>{a[l]=u})}),s(a);return}if(this.isTuple()){let o=this.components,a;if(Array.isArray(t))a=t.slice();else{if(t==null||typeof t!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in t))throw new Error(`missing value for component ${c.name}`);return t[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var h;Ie(h=o[l],En,oi).call(h,e,c,n,u=>{a[l]=u})}),s(a);return}let i=n(this.type,t);i.then?e.push(async function(){s(await i)}()):s(i)};var ze=Tt,qr=class r{constructor(e,t,n){U(this,"type");U(this,"inputs");fr(e,Me,"Fragment"),n=Object.freeze(n.slice()),pe(this,{type:t,inputs:n})}static from(e){if(typeof e=="string"){try{r.from(JSON.parse(e))}catch(t){}return r.from(Tr(e))}if(e instanceof It)switch(e.peekKeyword(Nl)){case"constructor":return Kr.from(e);case"error":return At.from(e);case"event":return Vr.from(e);case"fallback":case"receive":return ai.from(e);case"function":return Gr.from(e);case"struct":return Xn.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Kr.from(e);case"error":return At.from(e);case"event":return Vr.from(e);case"fallback":case"receive":return ai.from(e);case"function":return Gr.from(e);case"struct":return Xn.from(e)}ce(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}W(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Kr.isFragment(e)}static isError(e){return At.isFragment(e)}static isEvent(e){return Vr.isFragment(e)}static isFunction(e){return Gr.isFragment(e)}static isStruct(e){return Xn.isFragment(e)}},Tn=class extends qr{constructor(t,n,s,i){super(t,n,i);U(this,"name");W(typeof s=="string"&&s.match(Rl),"invalid identifier","name",s),i=Object.freeze(i.slice()),pe(this,{name:s})}};function Qn(r,e){return"("+e.map(t=>t.format(r)).join(r==="full"?", ":",")+")"}var At=class r extends Tn{constructor(e,t,n){super(e,"error",t,n),Object.defineProperty(this,ut,{value:xl})}get selector(){return er(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let t=[];return e!=="sighash"&&t.push("error"),t.push(this.name+Qn(e,this.inputs)),t.join(" ")}static from(e){if(r.isFragment(e))return e;if(typeof e=="string")return r.from(Tr(e));if(e instanceof It){let t=li("error",e),n=tr(e);return zr(e),new r(Me,t,n)}return new r(Me,e.name,e.inputs?e.inputs.map(ze.from):[])}static isFragment(e){return e&&e[ut]===xl}},Vr=class r extends Tn{constructor(t,n,s,i){super(t,"event",n,s);U(this,"anonymous");Object.defineProperty(this,ut,{value:El}),pe(this,{anonymous:i})}get topicHash(){return er(this.format("sighash"))}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(t)))});let n=[];return t!=="sighash"&&n.push("event"),n.push(this.name+Qn(t,this.inputs)),t!=="sighash"&&this.anonymous&&n.push("anonymous"),n.join(" ")}static getTopicHash(t,n){return n=(n||[]).map(i=>ze.from(i)),new r(Me,t,n,!1).topicHash}static from(t){if(r.isFragment(t))return t;if(typeof t=="string")try{return r.from(Tr(t))}catch(n){W(!1,"invalid event fragment","obj",t)}else if(t instanceof It){let n=li("event",t),s=tr(t,!0),i=!!rr(t,ot(["anonymous"])).has("anonymous");return zr(t),new r(Me,n,s,i)}return new r(Me,t.name,t.inputs?t.inputs.map(n=>ze.from(n,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[ut]===El}},Kr=class r extends qr{constructor(t,n,s,i,o){super(t,n,s);U(this,"payable");U(this,"gas");Object.defineProperty(this,ut,{value:Tl}),pe(this,{payable:i,gas:o})}format(t){if(ce(t!=null&&t!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),t==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(t)))});let n=[`constructor${Qn(t,this.inputs)}`];return this.payable&&n.push("payable"),this.gas!=null&&n.push(`@${this.gas.toString()}`),n.join(" ")}static from(t){if(r.isFragment(t))return t;if(typeof t=="string")try{return r.from(Tr(t))}catch(n){W(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof It){rr(t,ot(["constructor"]));let n=tr(t),s=!!rr(t,Pf).has("payable"),i=Ml(t);return zr(t),new r(Me,"constructor",n,s,i)}return new r(Me,"constructor",t.inputs?t.inputs.map(ze.from):[],!!t.payable,t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[ut]===Tl}},ai=class r extends qr{constructor(t,n,s){super(t,"fallback",n);U(this,"payable");Object.defineProperty(this,ut,{value:Al}),pe(this,{payable:s})}format(t){let n=this.inputs.length===0?"receive":"fallback";if(t==="json"){let s=this.payable?"payable":"nonpayable";return JSON.stringify({type:n,stateMutability:s})}return`${n}()${this.payable?" payable":""}`}static from(t){if(r.isFragment(t))return t;if(typeof t=="string")try{return r.from(Tr(t))}catch(n){W(!1,"invalid fallback fragment","obj",t)}else if(t instanceof It){let n=t.toString(),s=t.peekKeyword(ot(["fallback","receive"]));if(W(s,"type must be fallback or receive","obj",n),t.popKeyword(ot(["fallback","receive"]))==="receive"){let c=tr(t);return W(c.length===0,"receive cannot have arguments","obj.inputs",c),rr(t,ot(["payable"])),zr(t),new r(Me,[],!0)}let o=tr(t);o.length?W(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[ze.from("bytes")];let a=Il(t);if(W(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),rr(t,ot(["returns"])).has("returns")){let c=tr(t);W(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return zr(t),new r(Me,o,a==="payable")}if(t.type==="receive")return new r(Me,[],!0);if(t.type==="fallback"){let n=[ze.from("bytes")],s=t.stateMutability==="payable";return new r(Me,n,s)}W(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[ut]===Al}},Gr=class r extends Tn{constructor(t,n,s,i,o,a){super(t,"function",n,i);U(this,"constant");U(this,"outputs");U(this,"stateMutability");U(this,"payable");U(this,"gas");Object.defineProperty(this,ut,{value:kl}),o=Object.freeze(o.slice()),pe(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return er(this.format("sighash")).substring(0,10)}format(t){if(t==null&&(t="sighash"),t==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(t))),outputs:this.outputs.map(s=>JSON.parse(s.format(t)))});let n=[];return t!=="sighash"&&n.push("function"),n.push(this.name+Qn(t,this.inputs)),t!=="sighash"&&(this.stateMutability!=="nonpayable"&&n.push(this.stateMutability),this.outputs&&this.outputs.length&&(n.push("returns"),n.push(Qn(t,this.outputs))),this.gas!=null&&n.push(`@${this.gas.toString()}`)),n.join(" ")}static getSelector(t,n){return n=(n||[]).map(i=>ze.from(i)),new r(Me,t,"view",n,[],null).selector}static from(t){if(r.isFragment(t))return t;if(typeof t=="string")try{return r.from(Tr(t))}catch(s){W(!1,"invalid function fragment","obj",t)}else if(t instanceof It){let s=li("function",t),i=tr(t),o=Il(t),a=[];rr(t,ot(["returns"])).has("returns")&&(a=tr(t));let c=Ml(t);return zr(t),new r(Me,s,o,i,a,c)}let n=t.stateMutability;return n==null&&(n="payable",typeof t.constant=="boolean"?(n="view",t.constant||(n="payable",typeof t.payable=="boolean"&&!t.payable&&(n="nonpayable"))):typeof t.payable=="boolean"&&!t.payable&&(n="nonpayable")),new r(Me,t.name,n,t.inputs?t.inputs.map(ze.from):[],t.outputs?t.outputs.map(ze.from):[],t.gas!=null?t.gas:null)}static isFragment(t){return t&&t[ut]===kl}},Xn=class r extends Tn{constructor(e,t,n){super(e,"struct",t,n),Object.defineProperty(this,ut,{value:Sl})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return r.from(Tr(e))}catch(t){W(!1,"invalid struct fragment","obj",e)}else if(e instanceof It){let t=li("struct",e),n=tr(e);return zr(e),new r(Me,t,n)}return new r(Me,e.name,e.inputs?e.inputs.map(ze.from):[])}static isFragment(e){return e&&e[ut]===Sl}};var Mt=new Map;Mt.set(0,"GENERIC_PANIC");Mt.set(1,"ASSERT_FALSE");Mt.set(17,"OVERFLOW");Mt.set(18,"DIVIDE_BY_ZERO");Mt.set(33,"ENUM_RANGE_ERROR");Mt.set(34,"BAD_STORAGE_DATA");Mt.set(49,"STACK_UNDERFLOW");Mt.set(50,"ARRAY_RANGE_ERROR");Mt.set(65,"OUT_OF_MEMORY");Mt.set(81,"UNINITIALIZED_FUNCTION_CALL");var zf=new RegExp(/^bytes([0-9]*)$/),qf=new RegExp(/^(u?int)([0-9]*)$/),Oo=null;function Yf(r,e,t,n){let s="missing revert data",i=null,o=null,a=null;if(t){s="execution reverted";let l=Le(t);if(t=we(t),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(we(l.slice(0,4))==="0x08c379a0")try{i=n.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch(h){s+=" (could not decode reason; invalid string data)"}else if(we(l.slice(0,4))==="0x4e487b71")try{let h=Number(n.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[h]},i=`Panic due to ${Mt.get(h)||"UNKNOWN"}(${h})`,s+=`: ${i}`}catch(h){s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}let c={to:e.to?Ze(e.to):null,data:e.data||"0x"};return e.from&&(c.from=Ze(e.from)),Yt(s,"CALL_EXCEPTION",{action:r,data:t,reason:i,transaction:c,invocation:o,revert:a})}var Ar,An,ui=class ui{constructor(){be(this,Ar)}getDefaultValue(e){let t=e.map(s=>Ie(this,Ar,An).call(this,ze.from(s)));return new Dr(t,"_").defaultValue()}encode(e,t){Hn(t.length,e.length,"types/values length mismatch");let n=e.map(o=>Ie(this,Ar,An).call(this,ze.from(o))),s=new Dr(n,"_"),i=new Mr;return s.encode(i,t),i.data}decode(e,t,n){let s=e.map(o=>Ie(this,Ar,An).call(this,ze.from(o)));return new Dr(s,"_").decode(new Fs(t,n))}static defaultAbiCoder(){return Oo==null&&(Oo=new ui),Oo}static getBuiltinCallException(e,t,n){return Yf(e,t,n,ui.defaultAbiCoder())}};Ar=new WeakSet,An=function(e){if(e.isArray())return new Xs(Ie(this,Ar,An).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Dr(e.components.map(n=>Ie(this,Ar,An).call(this,n)),e.name);switch(e.baseType){case"address":return new Zs(e.name);case"bool":return new Qs(e.name);case"string":return new si(e.name);case"bytes":return new ei(e.name);case"":return new ri(e.name)}let t=e.type.match(qf);if(t){let n=parseInt(t[2]||"256");return W(n!==0&&n<=256&&n%8===0,"invalid "+t[1]+" bit length","param",e),new ni(n/8,t[1]==="int",e.name)}if(t=e.type.match(zf),t){let n=parseInt(t[1]);return W(n!==0&&n<=32,"invalid bytes length","param",e),new ti(n,e.name)}W(!1,"invalid type","type",e.type)};var ts=ui;var pi=class{constructor(e,t,n){U(this,"fragment");U(this,"name");U(this,"signature");U(this,"topic");U(this,"args");let s=e.name,i=e.format();pe(this,{fragment:e,name:s,signature:i,topic:t,args:n})}},di=class{constructor(e,t,n,s){U(this,"fragment");U(this,"name");U(this,"args");U(this,"signature");U(this,"selector");U(this,"value");let i=e.name,o=e.format();pe(this,{fragment:e,name:i,args:n,signature:o,selector:t,value:s})}},mi=class{constructor(e,t,n){U(this,"fragment");U(this,"name");U(this,"args");U(this,"signature");U(this,"selector");let s=e.name,i=e.format();pe(this,{fragment:e,name:s,args:n,signature:i,selector:t})}},rs=class{constructor(e){U(this,"hash");U(this,"_isIndexed");pe(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}},Pl={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},vl={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:r=>`reverted with reason string ${JSON.stringify(r)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:r=>{let e="unknown panic code";return r>=0&&r<=255&&Pl[r.toString()]&&(e=Pl[r.toString()]),`reverted with panic code 0x${r.toString(16)} (${e})`}}},Ft,Ht,Dt,st,Sn,hi,Bn,fi,kn=class kn{constructor(e){be(this,Sn);be(this,Bn);U(this,"fragments");U(this,"deploy");U(this,"fallback");U(this,"receive");be(this,Ft,void 0);be(this,Ht,void 0);be(this,Dt,void 0);be(this,st,void 0);let t=[];typeof e=="string"?t=JSON.parse(e):t=e,ye(this,Dt,new Map),ye(this,Ft,new Map),ye(this,Ht,new Map);let n=[];for(let o of t)try{n.push(qr.from(o))}catch(a){console.log("EE",a)}pe(this,{fragments:Object.freeze(n)});let s=null,i=!1;ye(this,st,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}pe(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(W(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=Y(this,Dt);break;case"event":c=Y(this,Ht);break;case"error":c=Y(this,Ft);break;default:return}let l=o.format();c.has(l)||c.set(l,o)}),this.deploy||pe(this,{deploy:Kr.from("constructor()")}),pe(this,{fallback:s,receive:i})}format(e){let t=e?"minimal":"full";return this.fragments.map(s=>s.format(t))}formatJson(){let e=this.fragments.map(t=>t.format("json"));return JSON.stringify(e.map(t=>JSON.parse(t)))}getAbiCoder(){return ts.defaultAbiCoder()}getFunctionName(e){let t=Ie(this,Sn,hi).call(this,e,null,!1);return W(t,"no matching function","key",e),t.name}hasFunction(e){return!!Ie(this,Sn,hi).call(this,e,null,!1)}getFunction(e,t){return Ie(this,Sn,hi).call(this,e,t||null,!0)}forEachFunction(e){let t=Array.from(Y(this,Dt).keys());t.sort((n,s)=>n.localeCompare(s));for(let n=0;n<t.length;n++){let s=t[n];e(Y(this,Dt).get(s),n)}}getEventName(e){let t=Ie(this,Bn,fi).call(this,e,null,!1);return W(t,"no matching event","key",e),t.name}hasEvent(e){return!!Ie(this,Bn,fi).call(this,e,null,!1)}getEvent(e,t){return Ie(this,Bn,fi).call(this,e,t||null,!0)}forEachEvent(e){let t=Array.from(Y(this,Ht).keys());t.sort((n,s)=>n.localeCompare(s));for(let n=0;n<t.length;n++){let s=t[n];e(Y(this,Ht).get(s),n)}}getError(e,t){if(et(e)){let s=e.toLowerCase();if(vl[s])return At.from(vl[s].signature);for(let i of Y(this,Ft).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){let s=[];for(let[i,o]of Y(this,Ft))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?At.from("error Error(string)"):e==="Panic"?At.from("error Panic(uint256)"):null;if(s.length>1){let i=s.map(o=>JSON.stringify(o.format())).join(", ");W(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=At.from(e).format(),e==="Error(string)")return At.from("error Error(string)");if(e==="Panic(uint256)")return At.from("error Panic(uint256)");let n=Y(this,Ft).get(e);return n||null}forEachError(e){let t=Array.from(Y(this,Ft).keys());t.sort((n,s)=>n.localeCompare(s));for(let n=0;n<t.length;n++){let s=t[n];e(Y(this,Ft).get(s),n)}}_decodeParams(e,t){return Y(this,st).decode(e,t)}_encodeParams(e,t){return Y(this,st).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if(typeof e=="string"){let n=this.getError(e);W(n,"unknown error","fragment",e),e=n}return W(dr(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,dr(t,4))}encodeErrorResult(e,t){if(typeof e=="string"){let n=this.getError(e);W(n,"unknown error","fragment",e),e=n}return tt([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if(typeof e=="string"){let n=this.getFunction(e);W(n,"unknown function","fragment",e),e=n}return W(dr(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,dr(t,4))}encodeFunctionData(e,t){if(typeof e=="string"){let n=this.getFunction(e);W(n,"unknown function","fragment",e),e=n}return tt([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if(typeof e=="string"){let i=this.getFunction(e);W(i,"unknown function","fragment",e),e=i}let n="invalid length for result data",s=He(t);if(s.length%32===0)try{return Y(this,st).decode(e.outputs,s)}catch(i){n="could not decode result data"}ce(!1,n,"BAD_DATA",{value:we(s),info:{method:e.name,signature:e.format()}})}makeError(e,t){let n=Le(e,"data"),s=ts.getBuiltinCallException("call",t,n),i="execution reverted (unknown custom error)";if(s.message.startsWith(i)){let a=we(n.slice(0,4)),c=this.getError(a);if(c)try{let l=Y(this,st).decode(c.inputs,n.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch(l){s.message="execution reverted (coult not decode custom error)"}}let o=this.parseTransaction(t);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,t){if(typeof e=="string"){let n=this.getFunction(e);W(n,"unknown function","fragment",e),e=n}return we(Y(this,st).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if(typeof e=="string"){let i=this.getEvent(e);W(i,"unknown event","eventFragment",e),e=i}ce(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});let n=[];e.anonymous||n.push(e.topicHash);let s=(i,o)=>i.type==="string"?er(o):i.type==="bytes"?rt(we(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=mr(o):i.type.match(/^bytes/)?o=Xi(o,32):i.type==="address"&&Y(this,st).encode(["address"],[o]),Dn(we(o),32));for(t.forEach((i,o)=>{let a=e.inputs[o];if(!a.indexed){W(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?W(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?n.push(i.map(c=>s(a,c))):n.push(s(a,i))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,t){if(typeof e=="string"){let o=this.getEvent(e);W(o,"unknown event","eventFragment",e),e=o}let n=[],s=[],i=[];return e.anonymous||n.push(e.topicHash),W(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((o,a)=>{let c=t[a];if(o.indexed)if(o.type==="string")n.push(er(c));else if(o.type==="bytes")n.push(rt(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(Y(this,st).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:Y(this,st).encode(s,i),topics:n}}decodeEventLog(e,t,n){if(typeof e=="string"){let T=this.getEvent(e);W(T,"unknown event","eventFragment",e),e=T}if(n!=null&&!e.anonymous){let T=e.topicHash;W(et(n[0],32)&&n[0].toLowerCase()===T,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}let s=[],i=[],o=[];e.inputs.forEach((T,y)=>{T.indexed?T.type==="string"||T.type==="bytes"||T.baseType==="tuple"||T.baseType==="array"?(s.push(ze.from({type:"bytes32",name:T.name})),o.push(!0)):(s.push(T),o.push(!1)):(i.push(T),o.push(!1))});let a=n!=null?Y(this,st).decode(s,tt(n)):null,c=Y(this,st).decode(i,t,!0),l=[],h=[],u=0,m=0;return e.inputs.forEach((T,y)=>{let d=null;if(T.indexed)if(a==null)d=new rs(null);else if(o[y])d=new rs(a[m++]);else try{d=a[m++]}catch(A){d=A}else try{d=c[u++]}catch(A){d=A}l.push(d),h.push(T.name||null)}),Ir.fromItems(l,h)}parseTransaction(e){let t=Le(e.data,"tx.data"),n=Ke(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(we(t.slice(0,4)));if(!s)return null;let i=Y(this,st).decode(s.inputs,t.slice(4));return new di(s,s.selector,i,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new pi(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){let t=we(e),n=this.getError(dr(t,0,4));if(!n)return null;let s=Y(this,st).decode(n.inputs,dr(t,4));return new mi(n,n.selector,s)}static from(e){return e instanceof kn?e:typeof e=="string"?new kn(JSON.parse(e)):typeof e.format=="function"?new kn(e.format("json")):new kn(e)}};Ft=new WeakMap,Ht=new WeakMap,Dt=new WeakMap,st=new WeakMap,Sn=new WeakSet,hi=function(e,t,n){if(et(e)){let i=e.toLowerCase();for(let o of Y(this,Dt).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){let i=[];for(let[o,a]of Y(this,Dt))o.split("(")[0]===e&&i.push(a);if(t){let o=t.length>0?t[t.length-1]:null,a=t.length,c=!0;Re.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){let h=i[l].inputs.length;h!==a&&(!c||h!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){let h=i[l].inputs;for(let u=0;u<t.length;u++)if(Re.isTyped(t[u])){if(u>=h.length){if(t[u].type==="overrides")continue;i.splice(l,1);break}if(t[u].type!==h[u].baseType){i.splice(l,1);break}}}}if(i.length===1&&t&&t.length!==i[0].inputs.length){let o=t[t.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&n){let o=i.map(a=>JSON.stringify(a.format())).join(", ");W(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}let s=Y(this,Dt).get(Gr.from(e).format());return s||null},Bn=new WeakSet,fi=function(e,t,n){if(et(e)){let i=e.toLowerCase();for(let o of Y(this,Ht).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){let i=[];for(let[o,a]of Y(this,Ht))o.split("(")[0]===e&&i.push(a);if(t){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<t.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){let a=i[o].inputs;for(let c=0;c<t.length;c++)if(Re.isTyped(t[c])&&t[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&n){let o=i.map(a=>JSON.stringify(a.format())).join(", ");W(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}let s=Y(this,Ht).get(Vr.from(e).format());return s||null};var ns=kn;var _l=BigInt(0);function $l(r){return r==null?null:r}function mt(r){return r==null?null:r.toString()}function Fl(r){let e={};r.to&&(e.to=r.to),r.from&&(e.from=r.from),r.data&&(e.data=we(r.data));let t="chainId,gasLimit,gasPrice,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(let s of t)!(s in r)||r[s]==null||(e[s]=Ke(r[s],`request.${s}`));let n="type,nonce".split(/,/);for(let s of n)!(s in r)||r[s]==null||(e[s]=je(r[s],`request.${s}`));return r.accessList&&(e.accessList=Bo(r.accessList)),"blockTag"in r&&(e.blockTag=r.blockTag),"enableCcipRead"in r&&(e.enableCcipRead=!!r.enableCcipRead),"customData"in r&&(e.customData=r.customData),e}var nr,Ul=class{constructor(e,t){U(this,"provider");U(this,"number");U(this,"hash");U(this,"timestamp");U(this,"parentHash");U(this,"nonce");U(this,"difficulty");U(this,"gasLimit");U(this,"gasUsed");U(this,"miner");U(this,"extraData");U(this,"baseFeePerGas");be(this,nr,void 0);ye(this,nr,e.transactions.map(n=>typeof n!="string"?new ss(n,t):n)),pe(this,{provider:t,hash:$l(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,miner:e.miner,extraData:e.extraData,baseFeePerGas:$l(e.baseFeePerGas)})}get transactions(){return Y(this,nr).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){let e=Y(this,nr).slice();return e.length===0?[]:(ce(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){let{baseFeePerGas:e,difficulty:t,extraData:n,gasLimit:s,gasUsed:i,hash:o,miner:a,nonce:c,number:l,parentHash:h,timestamp:u,transactions:m}=this;return{_type:"Block",baseFeePerGas:mt(e),difficulty:mt(t),extraData:n,gasLimit:mt(s),gasUsed:mt(i),hash:o,miner:a,nonce:c,number:l,parentHash:h,timestamp:u,transactions:m}}[Symbol.iterator](){let e=0,t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return Y(this,nr).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let t;if(typeof e=="number")t=Y(this,nr)[e];else{let n=e.toLowerCase();for(let s of Y(this,nr))if(typeof s=="string"){if(s!==n)continue;t=s;break}else{if(s.hash===n)continue;t=s;break}}if(t==null)throw new Error("no such tx");return typeof t=="string"?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){let t=this.prefetchedTransactions;if(typeof e=="number")return t[e];e=e.toLowerCase();for(let n of t)if(n.hash===e)return n;W(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return Wf(this)}};nr=new WeakMap;var Sr=class{constructor(e,t){U(this,"provider");U(this,"transactionHash");U(this,"blockHash");U(this,"blockNumber");U(this,"removed");U(this,"address");U(this,"data");U(this,"topics");U(this,"index");U(this,"transactionIndex");this.provider=t;let n=Object.freeze(e.topics.slice());pe(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){let{address:e,blockHash:t,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:t,blockNumber:n,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){let e=await this.provider.getBlock(this.blockHash);return ce(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){let e=await this.provider.getTransaction(this.transactionHash);return ce(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){let e=await this.provider.getTransactionReceipt(this.transactionHash);return ce(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return Zf(this)}},is,gi=class{constructor(e,t){U(this,"provider");U(this,"to");U(this,"from");U(this,"contractAddress");U(this,"hash");U(this,"index");U(this,"blockHash");U(this,"blockNumber");U(this,"logsBloom");U(this,"gasUsed");U(this,"cumulativeGasUsed");U(this,"gasPrice");U(this,"type");U(this,"status");U(this,"root");be(this,is,void 0);ye(this,is,Object.freeze(e.logs.map(s=>new Sr(s,t))));let n=_l;e.effectiveGasPrice!=null?n=e.effectiveGasPrice:e.gasPrice!=null&&(n=e.gasPrice),pe(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,gasPrice:n,type:e.type,status:e.status,root:e.root})}get logs(){return Y(this,is)}toJSON(){let{to:e,from:t,contractAddress:n,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:h,root:u}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:n,cumulativeGasUsed:mt(this.cumulativeGasUsed),from:t,gasPrice:mt(this.gasPrice),gasUsed:mt(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:u,status:h,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){let e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){let e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Dl(this)}reorderedEvent(e){return ce(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Hl(this,e)}};is=new WeakMap;var kr,Ro=class Ro{constructor(e,t){U(this,"provider");U(this,"blockNumber");U(this,"blockHash");U(this,"index");U(this,"hash");U(this,"type");U(this,"to");U(this,"from");U(this,"nonce");U(this,"gasLimit");U(this,"gasPrice");U(this,"maxPriorityFeePerGas");U(this,"maxFeePerGas");U(this,"data");U(this,"value");U(this,"chainId");U(this,"signature");U(this,"accessList");be(this,kr,void 0);this.provider=t,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,ye(this,kr,-1)}toJSON(){let{blockNumber:e,blockHash:t,index:n,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:h,accessList:u}=this;return{_type:"TransactionReceipt",accessList:u,blockNumber:e,blockHash:t,chainId:mt(this.chainId),data:l,from:a,gasLimit:mt(this.gasLimit),gasPrice:mt(this.gasPrice),hash:s,maxFeePerGas:mt(this.maxFeePerGas),maxPriorityFeePerGas:mt(this.maxPriorityFeePerGas),nonce:c,signature:h,to:o,index:n,type:i,value:mt(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){let n=await this.getTransaction();n&&(e=n.blockNumber)}if(e==null)return null;let t=this.provider.getBlock(e);if(t==null)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){let{tx:t,blockNumber:n}=await ln({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return t==null||t.blockNumber==null?0:n-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){let n=e==null?1:e,s=t==null?0:t,i=Y(this,kr),o=-1,a=i===-1,c=async()=>{if(a)return null;let{blockNumber:m,nonce:T}=await ln({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(T<this.nonce){i=m;return}if(a)return null;let y=await this.getTransaction();if(!(y&&y.blockNumber!=null))for(o===-1&&(o=i-3,o<Y(this,kr)&&(o=Y(this,kr)));o<=m;){if(a)return null;let d=await this.provider.getBlock(o,!0);if(d==null)return;for(let A of d)if(A===this.hash)return;for(let A=0;A<d.length;A++){let p=await d.getTransaction(A);if(p.from===this.from&&p.nonce===this.nonce){if(a)return null;let b=await this.provider.getTransactionReceipt(p.hash);if(b==null||m-b.blockNumber+1<n)return;let N="replaced";p.data===this.data&&p.to===this.to&&p.value===this.value?N="repriced":p.data==="0x"&&p.from===p.to&&p.value===_l&&(N="cancelled"),ce(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:N==="replaced"||N==="cancelled",reason:N,replacement:p.replaceableTransaction(i),hash:p.hash,receipt:b})}}o++}},l=m=>{if(m==null||m.status!==0)return m;ce(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:m.to,from:m.from,data:""},receipt:m})},h=await this.provider.getTransactionReceipt(this.hash);if(n===0)return l(h);if(h){if(await h.confirmations()>=n)return l(h)}else if(await c(),n===0)return null;return await new Promise((m,T)=>{let y=[],d=()=>{y.forEach(p=>p())};if(y.push(()=>{a=!0}),s>0){let p=setTimeout(()=>{d(),T(Yt("wait for transaction timeout","TIMEOUT"))},s);y.push(()=>{clearTimeout(p)})}let A=async p=>{if(await p.confirmations()>=n){d();try{m(l(p))}catch(b){T(b)}}};if(y.push(()=>{this.provider.off(this.hash,A)}),this.provider.on(this.hash,A),i>=0){let p=async()=>{try{await c()}catch(b){if(_t(b,"TRANSACTION_REPLACED")){d(),T(b);return}}a||this.provider.once("block",p)};y.push(()=>{this.provider.off("block",p)}),this.provider.once("block",p)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}removedEvent(){return ce(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Dl(this)}reorderedEvent(e){return ce(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ce(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Hl(this,e)}replaceableTransaction(e){W(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);let t=new Ro(this,this.provider);return ye(t,kr,e),t}};kr=new WeakMap;var ss=Ro;function Wf(r){return{orphan:"drop-block",hash:r.hash,number:r.number}}function Hl(r,e){return{orphan:"reorder-transaction",tx:r,other:e}}function Dl(r){return{orphan:"drop-transaction",tx:r}}function Zf(r){return{orphan:"drop-log",log:{transactionHash:r.transactionHash,blockHash:r.blockHash,blockNumber:r.blockNumber,address:r.address,data:r.data,topics:Object.freeze(r.topics.slice()),index:r.index}}}var Yr=class extends Sr{constructor(t,n,s){super(t,t.provider);U(this,"interface");U(this,"fragment");U(this,"args");let i=n.decodeEventLog(s,t.data,t.topics);pe(this,{args:i,fragment:s,interface:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}},Nn=class extends Sr{constructor(t,n){super(t,t.provider);U(this,"error");pe(this,{error:n})}},Cn,yi=class extends gi{constructor(t,n,s){super(s,n);be(this,Cn,void 0);ye(this,Cn,t)}get logs(){return super.logs.map(t=>{let n=t.topics.length?Y(this,Cn).getEvent(t.topics[0]):null;if(n)try{return new Yr(t,Y(this,Cn),n)}catch(s){return new Nn(t,s)}return t})}};Cn=new WeakMap;var as,jr=class extends ss{constructor(t,n,s){super(s,n);be(this,as,void 0);ye(this,as,t)}async wait(t){let n=await super.wait(t);return n==null?null:new yi(Y(this,as),this.provider,n)}};as=new WeakMap;var On=class extends Gn{constructor(t,n,s,i){super(t,n,s);U(this,"log");pe(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}},os=class extends On{constructor(e,t,n,s,i){super(e,t,n,new Yr(i,e.interface,s));let o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);pe(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}};var Vl=BigInt(0);function Gl(r){return r&&typeof r.call=="function"}function zl(r){return r&&typeof r.estimateGas=="function"}function xi(r){return r&&typeof r.resolveName=="function"}function ql(r){return r&&typeof r.sendTransaction=="function"}function Yl(r){if(r!=null){if(xi(r))return r;if(r.provider)return r.provider}}var hs,Lo=class{constructor(e,t,n){be(this,hs,void 0);U(this,"fragment");if(pe(this,{fragment:t}),t.inputs.length<n.length)throw new Error("too many arguments");let s=Zr(e.runner,"resolveName"),i=xi(s)?s:null;ye(this,hs,async function(){let o=await Promise.all(t.inputs.map((a,c)=>n[c]==null?null:a.walkAsync(n[c],(h,u)=>h==="address"?Array.isArray(u)?Promise.all(u.map(m=>Er(m,i))):Er(u,i):u)));return e.interface.encodeFilterTopics(t,o)}())}getTopicFilter(){return Y(this,hs)}};hs=new WeakMap;function Zr(r,e){return r==null?null:typeof r[e]=="function"?r:r.provider&&typeof r.provider[e]=="function"?r.provider:null}function Wr(r){return r==null?null:r.provider||null}async function jl(r,e){let t=Re.dereference(r,"overrides");W(typeof t=="object","invalid overrides parameter","overrides",r);let n=Fl(t);return W(n.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),W(n.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function Jf(r,e,t){let n=Zr(r,"resolveName"),s=xi(n)?n:null;return await Promise.all(e.map((i,o)=>i.walkAsync(t[o],(a,c)=>(c=Re.dereference(c,a),a==="address"?Er(c,s):c))))}function Xf(r){let e=async function(o){let a=await jl(o,["data"]);a.to=await r.getAddress(),a.from&&(a.from=await Er(a.from,Yl(r.runner)));let c=r.interface,l=Ke(a.value||Vl,"overrides.value")===Vl,h=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!h&&!l&&W(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),W(c.fallback||h,"cannot send data to receive-only contract","overrides.data",a.data);let u=c.receive||c.fallback&&c.fallback.payable;return W(u||l,"cannot send value to non-payable fallback","overrides.value",a.value),W(c.fallback||h,"cannot send data to receive-only contract","overrides.data",a.data),a},t=async function(o){let a=Zr(r.runner,"call");ce(Gl(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let c=await e(o);try{return await a.call(c)}catch(l){throw Ps(l)&&l.data?r.interface.makeError(l.data,c):l}},n=async function(o){let a=r.runner;ce(ql(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let c=await a.sendTransaction(await e(o)),l=Wr(r.runner);return new jr(r.interface,l,c)},s=async function(o){let a=Zr(r.runner,"estimateGas");return ce(zl(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await n(o);return pe(i,{_contract:r,estimateGas:s,populateTransaction:e,send:n,staticCall:t}),i}function Qf(r,e){let t=function(...l){let h=r.interface.getFunction(e,l);return ce(h,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),h},n=async function(...l){let h=t(...l),u={};if(h.inputs.length+1===l.length&&(u=await jl(l.pop()),u.from&&(u.from=await Er(u.from,Yl(r.runner)))),h.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");let m=await Jf(r.runner,h.inputs,l);return Object.assign({},u,await ln({to:r.getAddress(),data:r.interface.encodeFunctionData(h,m)}))},s=async function(...l){let h=await a(...l);return h.length===1?h[0]:h},i=async function(...l){let h=r.runner;ce(ql(h),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let u=await h.sendTransaction(await n(...l)),m=Wr(r.runner);return new jr(r.interface,m,u)},o=async function(...l){let h=Zr(r.runner,"estimateGas");return ce(zl(h),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await h.estimateGas(await n(...l))},a=async function(...l){let h=Zr(r.runner,"call");ce(Gl(h),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let u=await n(...l),m="0x";try{m=await h.call(u)}catch(y){throw Ps(y)&&y.data?r.interface.makeError(y.data,u):y}let T=t(...l);return r.interface.decodeFunctionResult(T,m)},c=async(...l)=>t(...l).constant?await s(...l):await i(...l);return pe(c,{name:r.interface.getFunctionName(e),_contract:r,_key:e,getFragment:t,estimateGas:o,populateTransaction:n,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{let l=r.interface.getFunction(e);return ce(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function ep(r,e){let t=function(...s){let i=r.interface.getEvent(e,s);return ce(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},n=function(...s){return new Lo(r,t(...s),s)};return pe(n,{name:r.interface.getEventName(e),_contract:r,_key:e,getFragment:t}),Object.defineProperty(n,"fragment",{configurable:!1,enumerable:!0,get:()=>{let s=r.interface.getEvent(e);return ce(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),n}var wi=Symbol.for("_ethersInternal_contract"),Wl=new WeakMap;function tp(r,e){Wl.set(r[wi],e)}function gt(r){return Wl.get(r[wi])}function rp(r){return r&&typeof r=="object"&&"getTopicFilter"in r&&typeof r.getTopicFilter=="function"&&r.fragment}async function Po(r,e){let t,n=null;if(Array.isArray(e)){let i=function(o){if(et(o,32))return o;let a=r.interface.getEvent(o);return W(a,"unknown fragment","name",o),a.topicHash};t=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?t=[null]:typeof e=="string"?et(e,32)?t=[e]:(n=r.interface.getEvent(e),W(n,"unknown fragment","event",e),t=[n.topicHash]):rp(e)?t=await e.getTopicFilter():"fragment"in e?(n=e.fragment,t=[n.topicHash]):W(!1,"unknown event name","event",e);t=t.map(i=>{if(i==null)return null;if(Array.isArray(i)){let o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});let s=t.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:n,tag:s,topics:t}}async function cs(r,e){let{subs:t}=gt(r);return t.get((await Po(r,e)).tag)||null}async function Kl(r,e,t){let n=Wr(r.runner);ce(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});let{fragment:s,tag:i,topics:o}=await Po(r,t),{addr:a,subs:c}=gt(r),l=c.get(i);if(!l){let u={address:a||r,topics:o},m=A=>{let p=s;if(p==null)try{p=r.interface.getEvent(A.topics[0])}catch(b){}if(p){let b=p,N=s?r.interface.decodeEventLog(s,A.data,A.topics):[];Mo(r,t,N,$=>new os(r,$,t,b,A))}else Mo(r,t,[],b=>new On(r,b,t,A))},T=[];l={tag:i,listeners:[],start:()=>{T.length||T.push(n.on(u,m))},stop:async()=>{if(T.length==0)return;let A=T;T=[],await Promise.all(A),n.off(u,m)}},c.set(i,l)}return l}var Io=Promise.resolve();async function np(r,e,t,n){await Io;let s=await cs(r,e);if(!s)return!1;let i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{let c=Array.from(t);n&&c.push(n(a?null:o));try{o.call(r,...c)}catch(l){}return!a}),s.listeners.length===0&&(s.stop(),gt(r).subs.delete(s.tag)),i>0}async function Mo(r,e,t,n){try{await Io}catch(i){}let s=np(r,e,t,n);return Io=s,await s}var bi=["then"],ip,ls=class ls{constructor(e,t,n,s){U(this,"target");U(this,"interface");U(this,"runner");U(this,"filters");U(this,ip);U(this,"fallback");W(typeof e=="string"||Wn(e),"invalid value for Contract target","target",e),n==null&&(n=null);let i=ns.from(t);pe(this,{target:e,runner:n,interface:i}),Object.defineProperty(this,wi,{value:{}});let o,a=null,c=null;if(s){let u=Wr(n);c=new jr(this.interface,u,s)}let l=new Map;if(typeof e=="string")if(et(e))a=e,o=Promise.resolve(e);else{let u=Zr(n,"resolveName");if(!xi(u))throw Yt("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=u.resolveName(e).then(m=>{if(m==null)throw Yt("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return gt(this).addr=m,m})}else o=e.getAddress().then(u=>{if(u==null)throw new Error("TODO");return gt(this).addr=u,u});tp(this,{addrPromise:o,addr:a,deployTx:c,subs:l});let h=new Proxy({},{get:(u,m,T)=>{if(typeof m=="symbol"||bi.indexOf(m)>=0)return Reflect.get(u,m,T);try{return this.getEvent(m)}catch(y){if(!_t(y,"INVALID_ARGUMENT")||y.argument!=="key")throw y}},has:(u,m)=>bi.indexOf(m)>=0?Reflect.has(u,m):Reflect.has(u,m)||this.interface.hasEvent(String(m))});return pe(this,{filters:h}),pe(this,{fallback:i.receive||i.fallback?Xf(this):null}),new Proxy(this,{get:(u,m,T)=>{if(typeof m=="symbol"||m in u||bi.indexOf(m)>=0)return Reflect.get(u,m,T);try{return u.getFunction(m)}catch(y){if(!_t(y,"INVALID_ARGUMENT")||y.argument!=="key")throw y}},has:(u,m)=>typeof m=="symbol"||m in u||bi.indexOf(m)>=0?Reflect.has(u,m):u.interface.hasFunction(m)})}connect(e){return new ls(this.target,this.interface,e)}attach(e){return new ls(e,this.interface,this.runner)}async getAddress(){return await gt(this).addrPromise}async getDeployedCode(){let e=Wr(this.runner);ce(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});let t=await e.getCode(await this.getAddress());return t==="0x"?null:t}async waitForDeployment(){let e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;let n=Wr(this.runner);return ce(n!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{let o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);n.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return gt(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),Qf(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),ep(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,n){t==null&&(t=0),n==null&&(n="latest");let{addr:s,addrPromise:i}=gt(this),o=s||await i,{fragment:a,topics:c}=await Po(this,e),l={address:o,topics:c,fromBlock:t,toBlock:n},h=Wr(this.runner);return ce(h,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await h.getLogs(l)).map(u=>{let m=a;if(m==null)try{m=this.interface.getEvent(u.topics[0])}catch(T){}if(m)try{return new Yr(u,this.interface,m)}catch(T){return new Nn(u,T)}return new Sr(u,h)})}async on(e,t){let n=await Kl(this,"on",e);return n.listeners.push({listener:t,once:!1}),n.start(),this}async once(e,t){let n=await Kl(this,"once",e);return n.listeners.push({listener:t,once:!0}),n.start(),this}async emit(e,...t){return await Mo(this,e,t,null)}async listenerCount(e){if(e){let s=await cs(this,e);return s?s.listeners.length:0}let{subs:t}=gt(this),n=0;for(let{listeners:s}of t.values())n+=s.length;return n}async listeners(e){if(e){let s=await cs(this,e);return s?s.listeners.map(({listener:i})=>i):[]}let{subs:t}=gt(this),n=[];for(let{listeners:s}of t.values())n=n.concat(s.map(({listener:i})=>i));return n}async off(e,t){let n=await cs(this,e);if(!n)return this;if(t){let s=n.listeners.map(({listener:i})=>i).indexOf(t);s>=0&&n.listeners.splice(s,1)}return(t==null||n.listeners.length===0)&&(n.stop(),gt(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){let t=await cs(this,e);if(!t)return this;t.stop(),gt(this).subs.delete(t.tag)}else{let{subs:t}=gt(this);for(let{tag:n,stop:s}of t.values())s(),t.delete(n)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends ls{constructor(s,i=null){super(s,e,i)}}return t}static from(e,t,n){return n==null&&(n=null),new this(e,t,n)}};ip=wi;var us=ls;function sp(){return us}var Rn=class extends sp(){};var Zl=ii,Jl=Jn,Xl=Ze;var vo=["signature","domain","nonce","time"],$o=["provider","suppressExceptions","verificationFallback"],at=class{constructor(e,t,n){this.type=e,this.expected=t,this.received=n}},Uo=(m=>(m.EXPIRED_MESSAGE="Expired message.",m.INVALID_DOMAIN="Invalid domain.",m.DOMAIN_MISMATCH="Domain does not match provided domain for verification.",m.NONCE_MISMATCH="Nonce does not match provided nonce for verification.",m.INVALID_ADDRESS="Invalid address.",m.INVALID_URI="URI does not conform to RFC 3986.",m.INVALID_NONCE="Nonce size smaller then 8 characters or is not alphanumeric.",m.NOT_YET_VALID_MESSAGE="Message is not valid yet.",m.INVALID_SIGNATURE="Signature does not match address of the message.",m.INVALID_TIME_FORMAT="Invalid time format.",m.INVALID_MESSAGE_VERSION="Invalid message version.",m.UNABLE_TO_PARSE="Unable to parse the message.",m))(Uo||{});var gu=ds(du());var Hp=["function isValidSignature(bytes32 _message, bytes _signature) public view returns (bytes4)"],Dp="0x1626ba7e",mu=new RegExp("^(?<date>[0-9]{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01]))[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(.[0-9]+)?(([Zz])|([+|-]([01][0-9]|2[0-3]):[0-5][0-9]))$"),jo=async(r,e,t)=>{if(!t)return!1;let n=new Rn(r.address,Hp,t),s=Jl(r.prepareMessage());return await n.isValidSignature(s,e)===Dp},Bi=()=>{let r=(0,gu.randomStringForEntropy)(96);if(!r||r.length<8)throw new Error("Error during nonce creation.");return r},fs=r=>{let e=mu.exec(r);if(!r)return!1;let t=new Date(e.groups.date).toISOString(),n=mu.exec(t);return e.groups.date===n.groups.date},Ci=(r,e)=>{let t=[];return Object.keys(r).forEach(n=>{e.includes(n)||t.push(n)}),t};var Wo=class{constructor(e){if(typeof e=="string"){let t=new Fn(e);this.domain=t.domain,this.address=t.address,this.statement=t.statement,this.uri=t.uri,this.version=t.version,this.nonce=t.nonce,this.issuedAt=t.issuedAt,this.expirationTime=t.expirationTime,this.notBefore=t.notBefore,this.requestId=t.requestId,this.chainId=t.chainId,this.resources=t.resources}else this.domain=e.domain,this.address=e.address,this.statement=e==null?void 0:e.statement,this.uri=e.uri,this.version=e.version,this.chainId=e.chainId,this.nonce=e.nonce,this.issuedAt=e==null?void 0:e.issuedAt,this.expirationTime=e==null?void 0:e.expirationTime,this.notBefore=e==null?void 0:e.notBefore,this.requestId=e==null?void 0:e.requestId,this.resources=e==null?void 0:e.resources,typeof this.chainId=="string"&&(this.chainId=Is(this.chainId));this.nonce=this.nonce||Bi(),this.validateMessage()}toMessage(){this.validateMessage();let e=`${this.domain} wants you to sign in with your Ethereum account:`,t=`URI: ${this.uri}`,n=[e,this.address].join(`
`),s=`Version: ${this.version}`;this.nonce||(this.nonce=Bi());let i="Chain ID: "+this.chainId||"1",o=`Nonce: ${this.nonce}`,a=[t,s,i,o];if(this.issuedAt=this.issuedAt||new Date().toISOString(),a.push(`Issued At: ${this.issuedAt}`),this.expirationTime){let l=`Expiration Time: ${this.expirationTime}`;a.push(l)}this.notBefore&&a.push(`Not Before: ${this.notBefore}`),this.requestId&&a.push(`Request ID: ${this.requestId}`),this.resources&&a.push(["Resources:",...this.resources.map(l=>`- ${l}`)].join(`
`));let c=a.join(`
`);return n=[n,this.statement].join(`

`),this.statement&&(n+=`
`),[n,c].join(`
`)}prepareMessage(){let e;switch(this.version){case"1":{e=this.toMessage();break}default:{e=this.toMessage();break}}return e}async validate(e,t){return console.warn("validate() has been deprecated, please update your code to use verify(). validate() may be removed in future versions."),this.verify({signature:e},{provider:t,suppressExceptions:!1}).then(({data:n})=>n).catch(({error:n})=>{throw n})}async verify(e,t={suppressExceptions:!1}){return new Promise((n,s)=>{var d,A,p;let i=b=>t.suppressExceptions?n(b):s(b),o=Ci(e,vo);o.length>0&&i({success:!1,data:this,error:new Error(`${o.join(", ")} is/are not valid key(s) for VerifyParams.`)});let a=Ci(t,$o);o.length>0&&i({success:!1,data:this,error:new Error(`${a.join(", ")} is/are not valid key(s) for VerifyOpts.`)});let{signature:c,domain:l,nonce:h,time:u}=e;l&&l!==this.domain&&i({success:!1,data:this,error:new at("Domain does not match provided domain for verification.",l,this.domain)}),h&&h!==this.nonce&&i({success:!1,data:this,error:new at("Nonce does not match provided nonce for verification.",h,this.nonce)});let m=new Date(u||new Date);if(this.expirationTime){let b=new Date(this.expirationTime);m.getTime()>=b.getTime()&&i({success:!1,data:this,error:new at("Expired message.",`${m.toISOString()} < ${b.toISOString()}`,`${m.toISOString()} >= ${b.toISOString()}`)})}if(this.notBefore){let b=new Date(this.notBefore);m.getTime()<b.getTime()&&i({success:!1,data:this,error:new at("Message is not valid yet.",`${m.toISOString()} >= ${b.toISOString()}`,`${m.toISOString()} < ${b.toISOString()}`)})}let T;try{T=this.prepareMessage()}catch(b){i({success:!1,data:this,error:b})}let y;try{y=Zl(T,c)}catch(b){console.error(b)}if(y===this.address)return n({success:!0,data:this});{let b=jo(this,c,t.provider).then(N=>N?{success:!0,data:this}:{success:!1,data:this,error:new at("Signature does not match address of the message.",y,`Resolved address to be ${this.address}`)}).catch(N=>({success:!1,data:this,error:N}));Promise.all([b,(p=(A=(d=t==null?void 0:t.verificationFallback)==null?void 0:d.call(t,e,t,this,b))==null?void 0:A.then(N=>N))==null?void 0:p.catch(N=>N)]).then(([N,$])=>{if($){if($.success)return n($);i($)}else{if(N.success)return n(N);i(N)}})}})}validateMessage(...e){var n;if(e.length>0)throw new at("Unable to parse the message.","Unexpected argument in the validateMessage function.");if(!this.domain||this.domain.length===0||!/[^#?]*/.test(this.domain))throw new at("Invalid domain.",`${this.domain} to be a valid domain.`);if(!Ls(this.address))throw new at("Invalid address.",Xl(this.address),this.address);if(!yu.isUri(this.uri))throw new at("URI does not conform to RFC 3986.",`${this.uri} to be a valid uri.`);if(this.version!=="1")throw new at("Invalid message version.","1",this.version);let t=(n=this==null?void 0:this.nonce)==null?void 0:n.match(/[a-zA-Z0-9]{8,}/);if(!t||this.nonce.length<8||t[0]!==this.nonce)throw new at("Nonce size smaller then 8 characters or is not alphanumeric.",`Length > 8 (${t.length}). Alphanumeric.`,this.nonce);if(this.issuedAt&&!fs(this.issuedAt))throw new Error("Invalid time format.");if(this.expirationTime&&!fs(this.expirationTime))throw new Error("Invalid time format.");if(this.notBefore&&!fs(this.notBefore))throw new Error("Invalid time format.")}};return Su(Vp);})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=siwe.js.map
